/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ru="ionic";let Ei,Vd,jo,$d=!1,_o=!1,cc=!1,he=!1,ku=!1;const Oe=typeof window!="undefined"?window:{},Dt=Oe.document||{head:{}},yt={t:0,l:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,s)=>e.addEventListener(t,n,s),rel:(e,t,n,s)=>e.removeEventListener(t,n,s),ce:(e,t)=>new CustomEvent(e,t)},t_=e=>{Object.assign(yt,e)},Hd=e=>Promise.resolve(e),e_=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})(),qd=(e,t,n)=>{n&&n.map(([s,r,a])=>{const c=i_(e,s),h=n_(t,a),f=s_(s);yt.ael(c,r,h,f),(t.o=t.o||[]).push(()=>yt.rel(c,r,h,f))})},n_=(e,t)=>n=>{try{256&e.t?e.i[t](n):(e.u=e.u||[]).push([t,n])}catch(s){ei(s)}},i_=(e,t)=>4&t?Dt:8&t?Oe:16&t?Dt.body:e,s_=e=>(2&e)!=0,ah="http://www.w3.org/1999/xlink",uh=new WeakMap,jd=(e,t,n)=>{let s=yo.get(e);e_&&n?(s=s||new CSSStyleSheet,s.replace(t)):s=t,yo.set(e,s)},Wd=(e,t,n)=>{let s=Zd(t,n),r=yo.get(s);if(e=e.nodeType===11?e:Dt,r)if(typeof r=="string"){let a,c=uh.get(e=e.head||e);c||uh.set(e,c=new Set),c.has(s)||(e.host&&(a=e.querySelector(`[sty-id="${s}"]`))?a.innerHTML=r:(a=Dt.createElement("style"),a.innerHTML=r,e.insertBefore(a,e.querySelector("link"))),c&&c.add(s))}else e.adoptedStyleSheets.includes(r)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,r]);return s},Zd=(e,t)=>"sc-"+(t&&32&e.t?e.$+"-"+t:e.$),r_=e=>e.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),o_=e=>of.push(e),ch={},lc=e=>(e=typeof e)=="object"||e==="function",Gd=(e,t,...n)=>{let s=null,r=null,a=null,c=!1,h=!1,f=[];const p=_=>{for(let w=0;w<_.length;w++)s=_[w],Array.isArray(s)?p(s):s!=null&&typeof s!="boolean"&&((c=typeof e!="function"&&!lc(s))&&(s+=""),c&&h?f[f.length-1].p+=s:f.push(c?Ni(null,s):s),h=c)};if(p(n),t){t.key&&(r=t.key),t.name&&(a=t.name);{const _=t.className||t.class;_&&(t.class=typeof _!="object"?_:Object.keys(_).filter(w=>_[w]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,f,u_);const g=Ni(e,null);return g.m=t,f.length>0&&(g.g=f),g.v=r,g.k=a,g},Ni=(e,t)=>({t:0,j:e,p:t,S:null,g:null,m:null,v:null,k:null}),a_={},u_={forEach:(e,t)=>e.map(lh).forEach(t),map:(e,t)=>e.map(lh).map(t).map(c_)},lh=e=>({vattrs:e.m,vchildren:e.g,vkey:e.v,vname:e.k,vtag:e.j,vtext:e.p}),c_=e=>{if(typeof e.vtag=="function"){const n=Object.assign({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),Gd(e.vtag,n,...e.vchildren||[])}const t=Ni(e.vtag,e.vtext);return t.m=e.vattrs,t.g=e.vchildren,t.v=e.vkey,t.k=e.vname,t},hh=(e,t,n,s,r,a)=>{if(n!==s){let c=vh(e,t),h=t.toLowerCase();if(t==="class"){const f=e.classList,p=dh(n),g=dh(s);f.remove(...p.filter(_=>_&&!g.includes(_))),f.add(...g.filter(_=>_&&!p.includes(_)))}else if(t==="style"){for(const f in n)s&&s[f]!=null||(f.includes("-")?e.style.removeProperty(f):e.style[f]="");for(const f in s)n&&s[f]===n[f]||(f.includes("-")?e.style.setProperty(f,s[f]):e.style[f]=s[f])}else if(t!=="key")if(t==="ref")s&&s(e);else if(c||t[0]!=="o"||t[1]!=="n"){const f=lc(s);if((c||f&&s!==null)&&!r)try{if(e.tagName.includes("-"))e[t]=s;else{let g=s==null?"":s;t==="list"?c=!1:n!=null&&e[t]==g||(e[t]=g)}}catch{}let p=!1;h!==(h=h.replace(/^xlink\:?/,""))&&(t=h,p=!0),s==null||s===!1?s===!1&&e.getAttribute(t)!==""||(p?e.removeAttributeNS(ah,t):e.removeAttribute(t)):(!c||4&a||r)&&!f&&(s=s===!0?"":s,p?e.setAttributeNS(ah,t,s):e.setAttribute(t,s))}else t=t[2]==="-"?t.slice(3):vh(Oe,h)?h.slice(2):h[2]+t.slice(3),n&&yt.rel(e,t,n,!1),s&&yt.ael(e,t,s,!1)}},l_=/\s/,dh=e=>e?e.split(l_):[],Kd=(e,t,n,s)=>{const r=t.S.nodeType===11&&t.S.host?t.S.host:t.S,a=e&&e.m||ch,c=t.m||ch;for(s in a)s in c||hh(r,s,a[s],void 0,n,t.t);for(s in c)hh(r,s,a[s],c[s],n,t.t)},vo=(e,t,n,s)=>{let r,a,c,h=t.g[n],f=0;if($d||(cc=!0,h.j==="slot"&&(Ei&&s.classList.add(Ei+"-s"),h.t|=h.g?2:1)),h.p!==null)r=h.S=Dt.createTextNode(h.p);else if(1&h.t)r=h.S=Dt.createTextNode("");else{if(he||(he=h.j==="svg"),r=h.S=Dt.createElementNS(he?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&h.t?"slot-fb":h.j),he&&h.j==="foreignObject"&&(he=!1),Kd(null,h,he),Ei!=null&&r["s-si"]!==Ei&&r.classList.add(r["s-si"]=Ei),h.g)for(f=0;f<h.g.length;++f)a=vo(e,h,f,r),a&&r.appendChild(a);h.j==="svg"?he=!1:r.tagName==="foreignObject"&&(he=!0)}return r["s-hn"]=jo,3&h.t&&(r["s-sr"]=!0,r["s-cr"]=Vd,r["s-sn"]=h.k||"",c=e&&e.g&&e.g[n],c&&c.j===h.j&&e.S&&Ms(e.S,!1)),r},Ms=(e,t)=>{yt.t|=1;const n=e.childNodes;for(let s=n.length-1;s>=0;s--){const r=n[s];r["s-hn"]!==jo&&r["s-ol"]&&(Xd(r).insertBefore(r,hc(r)),r["s-ol"].remove(),r["s-ol"]=void 0,cc=!0),t&&Ms(r,t)}yt.t&=-2},fh=(e,t,n,s,r,a)=>{let c,h=e["s-cr"]&&e["s-cr"].parentNode||e;for(h.shadowRoot&&h.tagName===jo&&(h=h.shadowRoot);r<=a;++r)s[r]&&(c=vo(null,n,r,e),c&&(s[r].S=c,h.insertBefore(c,hc(t))))},ph=(e,t,n,s,r)=>{for(;t<=n;++t)(s=e[t])&&(r=s.S,Qd(s),_o=!0,r["s-ol"]?r["s-ol"].remove():Ms(r,!0),r.remove())},Xr=(e,t)=>e.j===t.j&&(e.j==="slot"?e.k===t.k:e.v===t.v),hc=e=>e&&e["s-ol"]||e,Xd=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Ii=(e,t)=>{const n=t.S=e.S,s=e.g,r=t.g,a=t.j,c=t.p;let h;c===null?(he=a==="svg"||a!=="foreignObject"&&he,a==="slot"||Kd(e,t,he),s!==null&&r!==null?((f,p,g,_)=>{let w,I,E=0,P=0,H=0,W=0,j=p.length-1,$=p[0],et=p[j],ct=_.length-1,F=_[0],B=_[ct];for(;E<=j&&P<=ct;)if($==null)$=p[++E];else if(et==null)et=p[--j];else if(F==null)F=_[++P];else if(B==null)B=_[--ct];else if(Xr($,F))Ii($,F),$=p[++E],F=_[++P];else if(Xr(et,B))Ii(et,B),et=p[--j],B=_[--ct];else if(Xr($,B))$.j!=="slot"&&B.j!=="slot"||Ms($.S.parentNode,!1),Ii($,B),f.insertBefore($.S,et.S.nextSibling),$=p[++E],B=_[--ct];else if(Xr(et,F))$.j!=="slot"&&B.j!=="slot"||Ms(et.S.parentNode,!1),Ii(et,F),f.insertBefore(et.S,$.S),et=p[--j],F=_[++P];else{for(H=-1,W=E;W<=j;++W)if(p[W]&&p[W].v!==null&&p[W].v===F.v){H=W;break}H>=0?(I=p[H],I.j!==F.j?w=vo(p&&p[P],g,H,f):(Ii(I,F),p[H]=void 0,w=I.S),F=_[++P]):(w=vo(p&&p[P],g,P,f),F=_[++P]),w&&Xd($.S).insertBefore(w,hc($.S))}E>j?fh(f,_[ct+1]==null?null:_[ct+1].S,g,_,P,ct):P>ct&&ph(p,E,j)})(n,s,t,r):r!==null?(e.p!==null&&(n.textContent=""),fh(n,null,t,r,0,r.length-1)):s!==null&&ph(s,0,s.length-1),he&&a==="svg"&&(he=!1)):(h=n["s-cr"])?h.parentNode.textContent=c:e.p!==c&&(n.data=c)},Jd=e=>{let t,n,s,r,a,c,h=e.childNodes;for(n=0,s=h.length;n<s;n++)if(t=h[n],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,r=0;r<s;r++)if(c=h[r].nodeType,h[r]["s-hn"]!==t["s-hn"]||a!==""){if(c===1&&a===h[r].getAttribute("slot")){t.hidden=!0;break}}else if(c===1||c===3&&h[r].textContent.trim()!==""){t.hidden=!0;break}}Jd(t)}},ke=[],Yd=e=>{let t,n,s,r,a,c,h=0,f=e.childNodes,p=f.length;for(;h<p;h++){if(t=f[h],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(s=n.parentNode.childNodes,r=t["s-sn"],c=s.length-1;c>=0;c--)n=s[c],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(mh(n,r)?(a=ke.find(g=>g.O===n),_o=!0,n["s-sn"]=n["s-sn"]||r,a?a.M=t:ke.push({M:t,O:n}),n["s-sr"]&&ke.map(g=>{mh(g.O,n["s-sn"])&&(a=ke.find(_=>_.O===n),a&&!g.M&&(g.M=a.M))})):ke.some(g=>g.O===n)||ke.push({O:n}));t.nodeType===1&&Yd(t)}},mh=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t||t==="",Qd=e=>{e.m&&e.m.ref&&e.m.ref(null),e.g&&e.g.map(Qd)},h_=(e,t,n)=>{const s=yt.ce(t,n);return e.dispatchEvent(s),s},tf=(e,t)=>{t&&!e.R&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.R=n))},dc=(e,t)=>{if(e.t|=16,!(4&e.t))return tf(e,e.T),b_(()=>d_(e,t));e.t|=512},d_=(e,t)=>{const n=e.i;let s;return t&&(e.t|=256,e.u&&(e.u.map(([r,a])=>$n(n,r,a)),e.u=null),s=$n(n,"componentWillLoad")),s=gh(s,()=>$n(n,"componentWillRender")),gh(s,()=>f_(e,n,t))},f_=async(e,t,n)=>{const s=e.C,r=s["s-rc"];n&&(a=>{const c=a.L,h=a.C,f=c.t,p=Wd(h.shadowRoot?h.shadowRoot:h.getRootNode(),c,a.h);10&f&&(h["s-sc"]=p,h.classList.add(p+"-h"),2&f&&h.classList.add(p+"-s"))})(e),p_(e,t),r&&(r.map(a=>a()),s["s-rc"]=void 0);{const a=s["s-p"],c=()=>m_(e);a.length===0?c():(Promise.all(a).then(c),e.t|=4,a.length=0)}},p_=(e,t)=>{try{t=t.render&&t.render(),e.t&=-17,e.t|=2,((n,s)=>{const r=n.C,a=n.L,c=n.P||Ni(null,null),h=(f=>f&&f.j===a_)(s)?s:Gd(null,null,s);if(jo=r.tagName,a._&&(h.m=h.m||{},a._.map(([f,p])=>h.m[p]=r[f])),h.j=null,h.t|=4,n.P=h,h.S=c.S=r.shadowRoot||r,Ei=r["s-sc"],Vd=r["s-cr"],$d=(1&a.t)!=0,_o=!1,Ii(c,h),yt.t|=1,cc){let f,p,g,_,w,I;Yd(h.S);let E=0;for(;E<ke.length;E++)f=ke[E],p=f.O,p["s-ol"]||(g=Dt.createTextNode(""),g["s-nr"]=p,p.parentNode.insertBefore(p["s-ol"]=g,p));for(E=0;E<ke.length;E++)if(f=ke[E],p=f.O,f.M){for(_=f.M.parentNode,w=f.M.nextSibling,g=p["s-ol"];g=g.previousSibling;)if(I=g["s-nr"],I&&I["s-sn"]===p["s-sn"]&&_===I.parentNode&&(I=I.nextSibling,!I||!I["s-nr"])){w=I;break}(!w&&_!==p.parentNode||p.nextSibling!==w)&&p!==w&&(!p["s-hn"]&&p["s-ol"]&&(p["s-hn"]=p["s-ol"].parentNode.nodeName),_.insertBefore(p,w))}else p.nodeType===1&&(p.hidden=!0)}_o&&Jd(h.S),yt.t&=-2,ke.length=0})(e,t)}catch(n){ei(n,e.C)}return null},m_=e=>{const t=e.C,n=e.i,s=e.T;64&e.t?$n(n,"componentDidUpdate"):(e.t|=64,nf(t),$n(n,"componentDidLoad"),e.I(t),s||ef()),e.U(t),e.R&&(e.R(),e.R=void 0),512&e.t&&Wo(()=>dc(e,!1)),e.t&=-517},ef=()=>{nf(Dt.documentElement),Wo(()=>h_(Oe,"appload",{detail:{namespace:"ionic"}}))},$n=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(s){ei(s)}},gh=(e,t)=>e&&e.then?e.then(t):t(),nf=e=>e.classList.add("hydrated"),Pu=(e,t,n,s,r,a,c)=>{let h,f,p,g;if(a.nodeType===1){for(h=a.getAttribute("c-id"),h&&(f=h.split("."),f[0]!==c&&f[0]!=="0"||(p={t:0,W:f[0],D:f[1],F:f[2],N:f[3],j:a.tagName.toLowerCase(),S:a,m:null,g:null,v:null,k:null,p:null},t.push(p),a.removeAttribute("c-id"),e.g||(e.g=[]),e.g[p.N]=p,e=p,s&&p.F==="0"&&(s[p.N]=p.S))),g=a.childNodes.length-1;g>=0;g--)Pu(e,t,n,s,r,a.childNodes[g],c);if(a.shadowRoot)for(g=a.shadowRoot.childNodes.length-1;g>=0;g--)Pu(e,t,n,s,r,a.shadowRoot.childNodes[g],c)}else if(a.nodeType===8)f=a.nodeValue.split("."),f[1]!==c&&f[1]!=="0"||(h=f[0],p={t:0,W:f[1],D:f[2],F:f[3],N:f[4],S:a,m:null,g:null,v:null,k:null,j:null,p:null},h==="t"?(p.S=a.nextSibling,p.S&&p.S.nodeType===3&&(p.p=p.S.textContent,t.push(p),a.remove(),e.g||(e.g=[]),e.g[p.N]=p,s&&p.F==="0"&&(s[p.N]=p.S))):p.W===c&&(h==="s"?(p.j="slot",a["s-sn"]=f[5]?p.k=f[5]:"",a["s-sr"]=!0,s&&(p.S=Dt.createElement(p.j),p.k&&p.S.setAttribute("name",p.k),a.parentNode.insertBefore(p.S,a),a.remove(),p.F==="0"&&(s[p.N]=p.S)),n.push(p),e.g||(e.g=[]),e.g[p.N]=p):h==="r"&&(s?a.remove():(r["s-cr"]=a,a["s-cn"]=!0))));else if(e&&e.j==="style"){const _=Ni(null,a.textContent);_.S=a,_.N="0",e.g=[_]}},Au=(e,t)=>{if(e.nodeType===1){let n=0;for(;n<e.childNodes.length;n++)Au(e.childNodes[n],t);if(e.shadowRoot)for(n=0;n<e.shadowRoot.childNodes.length;n++)Au(e.shadowRoot.childNodes[n],t)}else if(e.nodeType===8){const n=e.nodeValue.split(".");n[0]==="o"&&(t.set(n[1]+"."+n[2],e),e.nodeValue="",e["s-en"]=n[3])}},sf=(e,t,n)=>{if(t.A){e.watchers&&(t.B=e.watchers);const s=Object.entries(t.A),r=e.prototype;if(s.map(([a,[c]])=>{31&c||2&n&&32&c?Object.defineProperty(r,a,{get(){return((h,f)=>Ai(this).H.get(f))(0,a)},set(h){((f,p,g,_)=>{const w=Ai(f),I=w.C,E=w.H.get(p),P=w.t,H=w.i;if(g=((W,j)=>W==null||lc(W)?W:4&j?W!=="false"&&(W===""||!!W):2&j?parseFloat(W):1&j?W+"":W)(g,_.A[p][0]),!(8&P&&E!==void 0||g===E)&&(w.H.set(p,g),H)){if(_.B&&128&P){const W=_.B[p];W&&W.map(j=>{try{H[j](g,E,p)}catch($){ei($,I)}})}(18&P)==2&&dc(w,!1)}})(this,a,h,t)},configurable:!0,enumerable:!0}):1&n&&64&c&&Object.defineProperty(r,a,{value(...h){const f=Ai(this);return f.q.then(()=>f.i[a](...h))}})}),1&n){const a=new Map;r.attributeChangedCallback=function(c,h,f){yt.jmp(()=>{const p=a.get(c);if(this.hasOwnProperty(p))f=this[p],delete this[p];else if(r.hasOwnProperty(p)&&typeof this[p]=="number"&&this[p]==f)return;this[p]=(f!==null||typeof this[p]!="boolean")&&f})},e.observedAttributes=s.filter(([c,h])=>15&h[0]).map(([c,h])=>{const f=h[1]||c;return a.set(f,c),512&h[0]&&t._.push([c,f]),f})}}return e},_h=e=>{$n(e,"connectedCallback")},g_=e=>{if((1&yt.t)==0){const t=Ai(e),n=t.L;if(1&t.t)qd(e,t,n.V),_h(t.i);else{let s;if(t.t|=1,s=e.getAttribute("s-id"),s){if(1&n.t){const r=Wd(e.shadowRoot,n,e.getAttribute("s-mode"));e.classList.remove(r+"-h",r+"-s")}((r,a,c,h)=>{const f=r.shadowRoot,p=[],g=f?[]:null,_=h.P=Ni(a,null);yt.G||Au(Dt.body,yt.G=new Map),r["s-id"]=c,r.removeAttribute("s-id"),Pu(_,p,[],g,r,r,c),p.map(w=>{const I=w.W+"."+w.D,E=yt.G.get(I),P=w.S;E&&E["s-en"]===""&&E.parentNode.insertBefore(P,E.nextSibling),f||(P["s-hn"]=a,E&&(P["s-ol"]=E,P["s-ol"]["s-nr"]=P)),yt.G.delete(I)}),f&&g.map(w=>{w&&f.appendChild(w)})})(e,n.$,s,t)}s||12&n.t&&__(e);{let r=e;for(;r=r.parentNode||r.host;)if(r.nodeType===1&&r.hasAttribute("s-id")&&r["s-p"]||r["s-p"]){tf(t,t.T=r);break}}n.A&&Object.entries(n.A).map(([r,[a]])=>{if(31&a&&e.hasOwnProperty(r)){const c=e[r];delete e[r],e[r]=c}}),Wo(()=>(async(r,a,c,h,f)=>{if((32&a.t)==0){{a.t|=32,(f=w_(c)).then&&(f=await f),f.isProxied||(c.B=f.watchers,sf(f,c,2),f.isProxied=!0),a.t|=8;try{new f(a)}catch(_){ei(_)}a.t&=-9,a.t|=128,_h(a.i)}if(f.style){let _=f.style;typeof _!="string"&&(_=_[a.h=(I=>of.map(E=>E(I)).find(E=>!!E))(r)]);const w=Zd(c,a.h);yo.has(w)||jd(w,_,!!(1&c.t))}}const p=a.T,g=()=>dc(a,!0);p&&p["s-rc"]?p["s-rc"].push(g):g()})(e,t,n))}}},__=e=>{const t=e["s-cr"]=Dt.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},v_=(e,t={})=>{const n=[],s=t.exclude||[],r=Oe.customElements,a=Dt.head,c=a.querySelector("meta[charset]"),h=Dt.createElement("style"),f=[],p=Dt.querySelectorAll("[sty-id]");let g,_=!0,w=0;for(Object.assign(yt,t),yt.l=new URL(t.resourcesUrl||"./",Dt.baseURI).href,yt.t|=2;w<p.length;w++)jd(p[w].getAttribute("sty-id"),r_(p[w].innerHTML),!0);e.map(I=>{I[1].map(E=>{const P={t:E[0],$:E[1],A:E[2],V:E[3]};P.A=E[2],P.V=E[3],P._=[],P.B={};const H=P.$,W=class extends HTMLElement{constructor(j){super(j),y_(j=this,P),1&P.t&&j.attachShadow({mode:"open",delegatesFocus:!!(16&P.t)})}connectedCallback(){g&&(clearTimeout(g),g=null),_?f.push(this):yt.jmp(()=>g_(this))}disconnectedCallback(){yt.jmp(()=>(()=>{if((1&yt.t)==0){const j=Ai(this),$=j.i;j.o&&(j.o.map(et=>et()),j.o=void 0),$n($,"disconnectedCallback")}})())}componentOnReady(){return Ai(this).J}};P.K=I[0],s.includes(H)||r.get(H)||(n.push(H),r.define(H,sf(W,P,1)))})}),h.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}",h.setAttribute("data-styles",""),a.insertBefore(h,c?c.nextSibling:a.firstChild),_=!1,f.length?f.map(I=>I.connectedCallback()):yt.jmp(()=>g=setTimeout(ef,30))},rf=new WeakMap,Ai=e=>rf.get(e),y_=(e,t)=>{const n={t:0,C:e,L:t,H:new Map};return n.q=new Promise(s=>n.U=s),n.J=new Promise(s=>n.I=s),e["s-p"]=[],e["s-rc"]=[],qd(e,n,t.V),rf.set(e,n)},vh=(e,t)=>t in e,ei=(e,t)=>(0,console.error)(e,t),yh=new Map,w_=e=>{const t=e.$.replace(/-/g,"_"),n=e.K,s=yh.get(n);return s?s[t]:__sc_import_ionic(`./${n}.entry.js`).then(r=>(yh.set(n,r),r[t]),ei)},yo=new Map,of=[],wh=[],af=[],T_=(e,t)=>n=>{e.push(n),ku||(ku=!0,t&&4&yt.t?Wo(Cu):yt.raf(Cu))},Th=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){ei(n)}e.length=0},Cu=()=>{Th(wh),Th(af),(ku=wh.length>0)&&yt.raf(Cu)},Wo=e=>Hd().then(e),b_=T_(af,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class E_{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,n){const s=this.m.get(t);return s!==void 0?s:n}getBoolean(t,n=!1){const s=this.m.get(t);return s===void 0?n:typeof s=="string"?s==="true":!!s}getNumber(t,n){const s=parseFloat(this.m.get(t));return isNaN(s)?n!==void 0?n:NaN:s}set(t,n){this.m.set(t,n)}}const pn=new E_,I_=e=>uf(e),S_=(e,t)=>(typeof e=="string"&&(t=e,e=void 0),I_(e).includes(t)),uf=(e=window)=>{if(e===void 0)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return t==null&&(t=e.Ionic.platforms=k_(e),t.forEach(n=>e.document.documentElement.classList.add(`plt-${n}`))),t},k_=e=>{const t=pn.get("platform");return Object.keys(Ih).filter(n=>{const s=t&&t[n];return typeof s=="function"?s(e):Ih[n](e)})},ou=e=>!!Un(e,/iPad/i)||!(!Un(e,/Macintosh/i)||!ro(e)),bh=e=>Un(e,/android|sink/i),ro=e=>P_(e,"(any-pointer:coarse)"),Eh=e=>cf(e)||lf(e),cf=e=>!!(e.cordova||e.phonegap||e.PhoneGap),lf=e=>{const t=e.Capacitor;return!(!t||!t.isNative)},Un=(e,t)=>t.test(e.navigator.userAgent),P_=(e,t)=>e.matchMedia&&e.matchMedia(t).matches,Ih={ipad:ou,iphone:e=>Un(e,/iPhone/i),ios:e=>Un(e,/iPhone|iPod/i)||ou(e),android:bh,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,s=Math.min(t,n),r=Math.max(t,n);return s>390&&s<520&&r>620&&r<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,s=Math.min(t,n),r=Math.max(t,n);return ou(e)||(a=>bh(a)&&!Un(a,/mobile/i))(e)||s>460&&s<820&&r>780&&r<1400},cordova:cf,capacitor:lf,electron:e=>Un(e,/electron/i),pwa:e=>!!(e.matchMedia&&e.matchMedia("(display-mode: standalone)").matches||e.navigator.standalone),mobile:ro,mobileweb:e=>ro(e)&&!Eh(e),desktop:e=>!ro(e),hybrid:Eh};let ws;const A_=(e={})=>{if(typeof window=="undefined")return;const t=window.document,n=window,s=n.Ionic=n.Ionic||{},r={};e._ael&&(r.ael=e._ael),e._rel&&(r.rel=e._rel),e._ce&&(r.ce=e._ce),t_(r);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(f=>{try{const p=f.sessionStorage.getItem("ionic-persist-config");return p!==null?JSON.parse(p):{}}catch{return{}}})(n)),{persistConfig:!1}),s.config),(f=>{const p={};return f.location.search.slice(1).split("&").map(g=>g.split("=")).map(([g,_])=>[decodeURIComponent(g),decodeURIComponent(_)]).filter(([g])=>{return g.substr(0,(_="ionic:").length)===_;var _}).map(([g,_])=>[g.slice(6),_]).forEach(([g,_])=>{p[g]=_}),p})(n)),e);pn.reset(a),pn.getBoolean("persistConfig")&&((f,p)=>{try{f.sessionStorage.setItem("ionic-persist-config",JSON.stringify(p))}catch{return}})(n,a),uf(n),s.config=pn,s.mode=ws=pn.get("mode",t.documentElement.getAttribute("mode")||(S_(n,"ios")?"ios":"md")),pn.set("mode",ws),t.documentElement.setAttribute("mode",ws),t.documentElement.classList.add(ws),pn.getBoolean("_testing")&&pn.set("animated",!1);const c=f=>f.tagName&&f.tagName.startsWith("ION-"),h=f=>["ios","md"].includes(f);o_(f=>{for(;f;){const p=f.mode||f.getAttribute("mode");if(p){if(h(p))return p;c(f)&&console.warn('Invalid ionic mode: "'+p+'", expected: "ios" or "md"')}f=f.parentElement}return ws})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const C_=A_;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */(()=>{const e=Array.from(Dt.querySelectorAll("script")).find(n=>new RegExp(`/${ru}(\\.esm)?\\.js($|\\?|#)`).test(n.src)||n.getAttribute("data-stencil-namespace")===ru),t=e["data-opts"]||{};return t.resourcesUrl=new URL(".",new URL(e.getAttribute("data-resources-url")||e.src,Oe.location.href)).href,((n,s)=>{const r=`__sc_import_${ru.replace(/\s|-/g,"_")}`;try{Oe[r]=new Function("w",`return import(w);//${Math.random()}`)}catch{const c=new Map;Oe[r]=h=>{const f=new URL(h,n).href;let p=c.get(f);if(!p){const g=Dt.createElement("script");g.type="module",g.crossOrigin=s.crossOrigin,g.src=URL.createObjectURL(new Blob([`import * as m from '${f}'; window.${r}.m = m;`],{type:"application/javascript"})),p=new Promise(_=>{g.onload=()=>{_(Oe[r].m),g.remove()}}),c.set(f,p),Dt.head.appendChild(g)}return p}}})(t.resourcesUrl,e),Oe.customElements?Hd(t):__sc_import_ionic("./p-bb2dd691.js").then(()=>t)})().then(e=>(C_(),v_(JSON.parse('[["p-08fd861b",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["p-61ad9792",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["p-403286a4",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["p-173a3833",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["p-3a3e1695",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["p-f6f754dc",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["p-02749433",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["p-1c1d4c37",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["p-31eef9f0",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["p-956cc19e",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["p-1c9b798f",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["p-a25b1551",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["p-9a8faac3",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["p-378d6177",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["p-db2008ef",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["p-4d9719e8",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["p-da2d88c1",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["p-da350c44",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["p-808d48b0",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["p-8610e7f3",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["p-c8dedb25",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["p-47f027d4",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["p-c272dc76",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["p-7a85117f",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["p-549b1429",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["p-d02f7564",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["p-db2cac9b",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["p-961ee064",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["p-32146060",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["p-211c74aa",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["p-5c61fa1c",[[1,"ion-text",{"color":[513]}]]],["p-3c515bd9",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["p-62a488e1",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["p-5090382b",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["p-ce4ec06a",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["p-20d50131",[[33,"ion-picker-internal"]]],["p-e83688a0",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["p-e1c0ed69",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["p-8b5cee7c",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["p-f2be9383",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["p-3fce1242",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["p-97b0b44b",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["p-e0dedb88",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["p-d9cf2d81",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["p-eb0d8213",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["p-01674da2",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["p-5f3dd979",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]]]'),e)));function Hn(){}function hf(e){return e()}function Sh(){return Object.create(null)}function Ys(e){e.forEach(hf)}function df(e){return typeof e=="function"}function L_(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function x_(e){return Object.keys(e).length===0}function R_(e,...t){if(e==null)return Hn;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function v1(e,t,n){e.$$.on_destroy.push(R_(t,n))}function y1(e){return e==null?"":e}function w1(e,t,n){return e.set(n),t}function T1(e){return e&&df(e.destroy)?e.destroy:Hn}function b1(e,t){e.appendChild(t)}function E1(e,t,n){e.insertBefore(t,n||null)}function N_(e){e.parentNode.removeChild(e)}function I1(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S1(e){return document.createElement(e)}function ff(e){return document.createTextNode(e)}function k1(){return ff(" ")}function P1(){return ff("")}function A1(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function M_(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C1(e,t,n){t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:M_(e,t,n)}function O_(e){return Array.from(e.childNodes)}function L1(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x1(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function D_(e,t,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,!1,t),s}let Os;function Ps(e){Os=e}function pf(){if(!Os)throw new Error("Function called outside component initialization");return Os}function R1(e){pf().$$.on_mount.push(e)}function N1(){const e=pf();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const r=D_(t,n);s.slice().forEach(a=>{a.call(e,r)})}}}const bs=[],kh=[],oo=[],Lu=[],B_=Promise.resolve();let xu=!1;function U_(){xu||(xu=!0,B_.then(mf))}function Ru(e){oo.push(e)}function M1(e){Lu.push(e)}const au=new Set;let Jr=0;function mf(){const e=Os;do{for(;Jr<bs.length;){const t=bs[Jr];Jr++,Ps(t),F_(t.$$)}for(Ps(null),bs.length=0,Jr=0;kh.length;)kh.pop()();for(let t=0;t<oo.length;t+=1){const n=oo[t];au.has(n)||(au.add(n),n())}oo.length=0}while(bs.length);for(;Lu.length;)Lu.pop()();xu=!1,au.clear(),Ps(e)}function F_(e){if(e.fragment!==null){e.update(),Ys(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ru)}}const ao=new Set;let Fn;function O1(){Fn={r:0,c:[],p:Fn}}function D1(){Fn.r||Ys(Fn.c),Fn=Fn.p}function gf(e,t){e&&e.i&&(ao.delete(e),e.i(t))}function z_(e,t,n,s){if(e&&e.o){if(ao.has(e))return;ao.add(e),Fn.c.push(()=>{ao.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}function B1(e,t){z_(e,1,1,()=>{t.delete(e.key)})}function U1(e,t,n,s,r,a,c,h,f,p,g,_){let w=e.length,I=a.length,E=w;const P={};for(;E--;)P[e[E].key]=E;const H=[],W=new Map,j=new Map;for(E=I;E--;){const F=_(r,a,E),B=n(F);let k=c.get(B);k?s&&k.p(F,t):(k=p(B,F),k.c()),W.set(B,H[E]=k),B in P&&j.set(B,Math.abs(E-P[B]))}const $=new Set,et=new Set;function ct(F){gf(F,1),F.m(h,g),c.set(F.key,F),g=F.first,I--}for(;w&&I;){const F=H[I-1],B=e[w-1],k=F.key,R=B.key;F===B?(g=F.first,w--,I--):W.has(R)?!c.has(k)||$.has(k)?ct(F):et.has(R)?w--:j.get(k)>j.get(R)?(et.add(k),ct(F)):($.add(R),w--):(f(B,c),w--)}for(;w--;){const F=e[w];W.has(F.key)||f(F,c)}for(;I;)ct(H[I-1]);return H}function F1(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function z1(e){e&&e.c()}function V_(e,t,n,s){const{fragment:r,on_mount:a,on_destroy:c,after_update:h}=e.$$;r&&r.m(t,n),s||Ru(()=>{const f=a.map(hf).filter(df);c?c.push(...f):Ys(f),e.$$.on_mount=[]}),h.forEach(Ru)}function $_(e,t){const n=e.$$;n.fragment!==null&&(Ys(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H_(e,t){e.$$.dirty[0]===-1&&(bs.push(e),U_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V1(e,t,n,s,r,a,c,h=[-1]){const f=Os;Ps(e);const p=e.$$={fragment:null,ctx:null,props:a,update:Hn,not_equal:r,bound:Sh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Sh(),dirty:h,skip_bound:!1,root:t.target||f.$$.root};c&&c(p.root);let g=!1;if(p.ctx=n?n(e,t.props||{},(_,w,...I)=>{const E=I.length?I[0]:w;return p.ctx&&r(p.ctx[_],p.ctx[_]=E)&&(!p.skip_bound&&p.bound[_]&&p.bound[_](E),g&&H_(e,_)),w}):[],p.update(),g=!0,Ys(p.before_update),p.fragment=s?s(p.ctx):!1,t.target){if(t.hydrate){const _=O_(t.target);p.fragment&&p.fragment.l(_),_.forEach(N_)}else p.fragment&&p.fragment.c();t.intro&&gf(e.$$.fragment),V_(e,t.target,t.anchor,t.customElement),mf()}Ps(f)}class $1{$destroy(){$_(this,1),this.$destroy=Hn}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!x_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var q_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Nu={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,s){s(t)})(q_,function(n){var s="1.7.1";function r(i){var o,u,l,d;for(u=1,l=arguments.length;u<l;u++){d=arguments[u];for(o in d)i[o]=d[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function c(i,o){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var l=u.call(arguments,2);return function(){return i.apply(o,l.length?l.concat(u.call(arguments)):arguments)}}var h=0;function f(i){return i._leaflet_id=i._leaflet_id||++h,i._leaflet_id}function p(i,o,u){var l,d,m,v;return v=function(){l=!1,d&&(m.apply(u,d),d=!1)},m=function(){l?d=arguments:(i.apply(u,arguments),setTimeout(v,o),l=!0)},m}function g(i,o,u){var l=o[1],d=o[0],m=l-d;return i===l&&u?i:((i-d)%m+m)%m+d}function _(){return!1}function w(i,o){var u=Math.pow(10,o===void 0?6:o);return Math.round(i*u)/u}function I(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function E(i){return I(i).split(/\s+/)}function P(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var u in o)i.options[u]=o[u];return i.options}function H(i,o,u){var l=[];for(var d in i)l.push(encodeURIComponent(u?d.toUpperCase():d)+"="+encodeURIComponent(i[d]));return(!o||o.indexOf("?")===-1?"?":"&")+l.join("&")}var W=/\{ *([\w_-]+) *\}/g;function j(i,o){return i.replace(W,function(u,l){var d=o[l];if(d===void 0)throw new Error("No value provided for variable "+u);return typeof d=="function"&&(d=d(o)),d})}var $=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function et(i,o){for(var u=0;u<i.length;u++)if(i[u]===o)return u;return-1}var ct="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var B=0;function k(i){var o=+new Date,u=Math.max(0,16-(o-B));return B=o+u,window.setTimeout(i,u)}var R=window.requestAnimationFrame||F("RequestAnimationFrame")||k,U=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function x(i,o,u){if(u&&R===k)i.call(o);else return R.call(window,c(i,o))}function nt(i){i&&U.call(window,i)}var Pn={extend:r,create:a,bind:c,lastId:h,stamp:f,throttle:p,wrapNum:g,falseFn:_,formatNum:w,trim:I,splitWords:E,setOptions:P,getParamString:H,template:j,isArray:$,indexOf:et,emptyImageUrl:ct,requestFn:R,cancelFn:U,requestAnimFrame:x,cancelAnimFrame:nt};function Wt(){}Wt.extend=function(i){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,l=a(u);l.constructor=o,o.prototype=l;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(o[d]=this[d]);return i.statics&&(r(o,i.statics),delete i.statics),i.includes&&(St(i.includes),r.apply(null,[l].concat(i.includes)),delete i.includes),l.options&&(i.options=r(a(l.options),i.options)),r(l,i),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,v=l._initHooks.length;m<v;m++)l._initHooks[m].call(this)}},o},Wt.include=function(i){return r(this.prototype,i),this},Wt.mergeOptions=function(i){return r(this.prototype.options,i),this},Wt.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function St(i){if(!(typeof L=="undefined"||!L||!L.Mixin)){i=$(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var gt={on:function(i,o,u){if(typeof i=="object")for(var l in i)this._on(l,i[l],o);else{i=E(i);for(var d=0,m=i.length;d<m;d++)this._on(i[d],o,u)}return this},off:function(i,o,u){if(!i)delete this._events;else if(typeof i=="object")for(var l in i)this._off(l,i[l],o);else{i=E(i);for(var d=0,m=i.length;d<m;d++)this._off(i[d],o,u)}return this},_on:function(i,o,u){this._events=this._events||{};var l=this._events[i];l||(l=[],this._events[i]=l),u===this&&(u=void 0);for(var d={fn:o,ctx:u},m=l,v=0,y=m.length;v<y;v++)if(m[v].fn===o&&m[v].ctx===u)return;m.push(d)},_off:function(i,o,u){var l,d,m;if(!!this._events&&(l=this._events[i],!!l)){if(!o){for(d=0,m=l.length;d<m;d++)l[d].fn=_;delete this._events[i];return}if(u===this&&(u=void 0),l)for(d=0,m=l.length;d<m;d++){var v=l[d];if(v.ctx===u&&v.fn===o){v.fn=_,this._firingCount&&(this._events[i]=l=l.slice()),l.splice(d,1);return}}}},fire:function(i,o,u){if(!this.listens(i,u))return this;var l=r({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var d=this._events[i];if(d){this._firingCount=this._firingCount+1||1;for(var m=0,v=d.length;m<v;m++){var y=d[m];y.fn.call(y.ctx||this,l)}this._firingCount--}}return u&&this._propagateEvent(l),this},listens:function(i,o){var u=this._events&&this._events[i];if(u&&u.length)return!0;if(o){for(var l in this._eventParents)if(this._eventParents[l].listens(i,o))return!0}return!1},once:function(i,o,u){if(typeof i=="object"){for(var l in i)this.once(l,i[l],o);return this}var d=c(function(){this.off(i,o,u).off(i,d,u)},this);return this.on(i,o,u).on(i,d,u)},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[f(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[f(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,r({layer:i.target,propagatedFrom:i.target},i),!0)}};gt.addEventListener=gt.on,gt.removeEventListener=gt.clearAllEventListeners=gt.off,gt.addOneTimeEventListener=gt.once,gt.fireEvent=gt.fire,gt.hasEventListeners=gt.listens;var me=Wt.extend(gt);function G(i,o,u){this.x=u?Math.round(i):i,this.y=u?Math.round(o):o}var ze=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(i){return this.clone()._add(q(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(q(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new G(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new G(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ze(this.x),this.y=ze(this.y),this},distanceTo:function(i){i=q(i);var o=i.x-this.x,u=i.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(i){return i=q(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=q(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function q(i,o,u){return i instanceof G?i:$(i)?new G(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new G(i.x,i.y):new G(i,o,u)}function it(i,o){if(!!i)for(var u=o?[i,o]:i,l=0,d=u.length;l<d;l++)this.extend(u[l])}it.prototype={extend:function(i){return i=q(i),!this.min&&!this.max?(this.min=i.clone(),this.max=i.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(i){return new G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return new G(this.min.x,this.max.y)},getTopRight:function(){return new G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,u;return typeof i[0]=="number"||i instanceof G?i=q(i):i=ht(i),i instanceof it?(o=i.min,u=i.max):o=u=i,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=ht(i);var o=this.min,u=this.max,l=i.min,d=i.max,m=d.x>=o.x&&l.x<=u.x,v=d.y>=o.y&&l.y<=u.y;return m&&v},overlaps:function(i){i=ht(i);var o=this.min,u=this.max,l=i.min,d=i.max,m=d.x>o.x&&l.x<u.x,v=d.y>o.y&&l.y<u.y;return m&&v},isValid:function(){return!!(this.min&&this.max)}};function ht(i,o){return!i||i instanceof it?i:new it(i,o)}function Tt(i,o){if(!!i)for(var u=o?[i,o]:i,l=0,d=u.length;l<d;l++)this.extend(u[l])}Tt.prototype={extend:function(i){var o=this._southWest,u=this._northEast,l,d;if(i instanceof st)l=i,d=i;else if(i instanceof Tt){if(l=i._southWest,d=i._northEast,!l||!d)return this}else return i?this.extend(_t(i)||ot(i)):this;return!o&&!u?(this._southWest=new st(l.lat,l.lng),this._northEast=new st(d.lat,d.lng)):(o.lat=Math.min(l.lat,o.lat),o.lng=Math.min(l.lng,o.lng),u.lat=Math.max(d.lat,u.lat),u.lng=Math.max(d.lng,u.lng)),this},pad:function(i){var o=this._southWest,u=this._northEast,l=Math.abs(o.lat-u.lat)*i,d=Math.abs(o.lng-u.lng)*i;return new Tt(new st(o.lat-l,o.lng-d),new st(u.lat+l,u.lng+d))},getCenter:function(){return new st((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new st(this.getNorth(),this.getWest())},getSouthEast:function(){return new st(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof st||"lat"in i?i=_t(i):i=ot(i);var o=this._southWest,u=this._northEast,l,d;return i instanceof Tt?(l=i.getSouthWest(),d=i.getNorthEast()):l=d=i,l.lat>=o.lat&&d.lat<=u.lat&&l.lng>=o.lng&&d.lng<=u.lng},intersects:function(i){i=ot(i);var o=this._southWest,u=this._northEast,l=i.getSouthWest(),d=i.getNorthEast(),m=d.lat>=o.lat&&l.lat<=u.lat,v=d.lng>=o.lng&&l.lng<=u.lng;return m&&v},overlaps:function(i){i=ot(i);var o=this._southWest,u=this._northEast,l=i.getSouthWest(),d=i.getNorthEast(),m=d.lat>o.lat&&l.lat<u.lat,v=d.lng>o.lng&&l.lng<u.lng;return m&&v},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=ot(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(i,o){return i instanceof Tt?i:new Tt(i,o)}function st(i,o,u){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,u!==void 0&&(this.alt=+u)}st.prototype={equals:function(i,o){if(!i)return!1;i=_t(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+w(this.lat,i)+", "+w(this.lng,i)+")"},distanceTo:function(i){return Ce.distance(this,_t(i))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ot([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new st(this.lat,this.lng,this.alt)}};function _t(i,o,u){return i instanceof st?i:$(i)&&typeof i[0]!="object"?i.length===3?new st(i[0],i[1],i[2]):i.length===2?new st(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new st(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new st(i,o,u)}var Zt={latLngToPoint:function(i,o){var u=this.projection.project(i),l=this.scale(o);return this.transformation._transform(u,l)},pointToLatLng:function(i,o){var u=this.scale(o),l=this.transformation.untransform(i,u);return this.projection.unproject(l)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(i),l=this.transformation.transform(o.min,u),d=this.transformation.transform(o.max,u);return new it(l,d)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?g(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?g(i.lat,this.wrapLat,!0):i.lat,l=i.alt;return new st(u,o,l)},wrapLatLngBounds:function(i){var o=i.getCenter(),u=this.wrapLatLng(o),l=o.lat-u.lat,d=o.lng-u.lng;if(l===0&&d===0)return i;var m=i.getSouthWest(),v=i.getNorthEast(),y=new st(m.lat-l,m.lng-d),b=new st(v.lat-l,v.lng-d);return new Tt(y,b)}},Ce=r({},Zt,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var u=Math.PI/180,l=i.lat*u,d=o.lat*u,m=Math.sin((o.lat-i.lat)*u/2),v=Math.sin((o.lng-i.lng)*u/2),y=m*m+Math.cos(l)*Math.cos(d)*v*v,b=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*b}}),Er=6378137,sn={R:Er,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,u=this.MAX_LATITUDE,l=Math.max(Math.min(u,i.lat),-u),d=Math.sin(l*o);return new G(this.R*i.lng*o,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(i){var o=180/Math.PI;return new st((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=Er*Math.PI;return new it([-i,-i],[i,i])}()};function Qi(i,o,u,l){if($(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=u,this._d=l}Qi.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new G((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function rn(i,o,u,l){return new Qi(i,o,u,l)}var ri=r({},Ce,{code:"EPSG:3857",projection:sn,transformation:function(){var i=.5/(Math.PI*sn.R);return rn(i,.5,-i,.5)}()}),ba=r({},ri,{code:"EPSG:900913"});function Ir(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Sr(i,o){var u="",l,d,m,v,y,b;for(l=0,m=i.length;l<m;l++){for(y=i[l],d=0,v=y.length;d<v;d++)b=y[d],u+=(d?"L":"M")+b.x+" "+b.y;u+=o?ui?"z":"x":""}return u||"M0 0"}var ts=document.documentElement.style,oi="ActiveXObject"in window,on=oi&&!document.addEventListener,ai="msLaunchUri"in navigator&&!("documentMode"in document),es=Kt("webkit"),An=Kt("android"),Cn=Kt("android 2")||Kt("android 3"),Ea=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kr=An&&Kt("Google")&&Ea<537&&!("AudioNode"in window),Ve=!!window.opera,Le=!ai&&Kt("chrome"),$e=Kt("gecko")&&!es&&!Ve&&!oi,Gt=!Le&&Kt("safari"),we=Kt("phantom"),He="OTransition"in ts,Pr=navigator.platform.indexOf("Win")===0,ns=oi&&"transition"in ts,is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Cn,Ar="MozPerspective"in ts,ie=!window.L_DISABLE_3D&&(ns||is||Ar)&&!He&&!we,an=typeof orientation!="undefined"||Kt("mobile"),Ia=an&&es,Sa=an&&is,xe=!window.PointerEvent&&window.MSPointerEvent,ge=!!(window.PointerEvent||xe),_e=!window.L_NO_TOUCH&&(ge||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Cr=an&&Ve,ka=an&&$e,Re=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ae=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",_,o),window.removeEventListener("testPassiveEventSupport",_,o)}catch{}return i}(),ss=function(){return!!document.createElement("canvas").getContext}(),ui=!!(document.createElementNS&&Ir("svg").createSVGRect),Ln=!ui&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}();function Kt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Lr={ie:oi,ielt9:on,edge:ai,webkit:es,android:An,android23:Cn,androidStock:kr,opera:Ve,chrome:Le,gecko:$e,safari:Gt,phantom:we,opera12:He,win:Pr,ie3d:ns,webkit3d:is,gecko3d:Ar,any3d:ie,mobile:an,mobileWebkit:Ia,mobileWebkit3d:Sa,msPointer:xe,pointer:ge,touch:_e,mobileOpera:Cr,mobileGecko:ka,retina:Re,passiveEvents:ae,canvas:ss,svg:ui,vml:Ln},ci=xe?"MSPointerDown":"pointerdown",Xt=xe?"MSPointerMove":"pointermove",rs=xe?"MSPointerUp":"pointerup",os=xe?"MSPointerCancel":"pointercancel",un={},as=!1;function Pa(i,o,u,l){return o==="touchstart"?us(i,u,l):o==="touchmove"?Rr(i,u,l):o==="touchend"&&xa(i,u,l),this}function Aa(i,o,u){var l=i["_leaflet_"+o+u];return o==="touchstart"?i.removeEventListener(ci,l,!1):o==="touchmove"?i.removeEventListener(Xt,l,!1):o==="touchend"&&(i.removeEventListener(rs,l,!1),i.removeEventListener(os,l,!1)),this}function us(i,o,u){var l=c(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&ye(d),cs(d,o)});i["_leaflet_touchstart"+u]=l,i.addEventListener(ci,l,!1),as||(document.addEventListener(ci,Ca,!0),document.addEventListener(Xt,La,!0),document.addEventListener(rs,xr,!0),document.addEventListener(os,xr,!0),as=!0)}function Ca(i){un[i.pointerId]=i}function La(i){un[i.pointerId]&&(un[i.pointerId]=i)}function xr(i){delete un[i.pointerId]}function cs(i,o){i.touches=[];for(var u in un)i.touches.push(un[u]);i.changedTouches=[i],o(i)}function Rr(i,o,u){var l=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||cs(d,o)};i["_leaflet_touchmove"+u]=l,i.addEventListener(Xt,l,!1)}function xa(i,o,u){var l=function(d){cs(d,o)};i["_leaflet_touchend"+u]=l,i.addEventListener(rs,l,!1),i.addEventListener(os,l,!1)}var xn=xe?"MSPointerDown":ge?"pointerdown":"touchstart",li=xe?"MSPointerUp":ge?"pointerup":"touchend",cn="_leaflet_";function T(i,o,u){var l,d,m=!1,v=250;function y(S){if(ge){if(!S.isPrimary||S.pointerType==="mouse")return}else if(S.touches.length>1)return;var M=Date.now(),z=M-(l||M);d=S.touches?S.touches[0]:S,m=z>0&&z<=v,l=M}function b(S){if(m&&!d.cancelBubble){if(ge){if(S.pointerType==="mouse")return;var M={},z,ft;for(ft in d)z=d[ft],M[ft]=z&&z.bind?z.bind(d):z;d=M}d.type="dblclick",d.button=0,o(d),l=null}}return i[cn+xn+u]=y,i[cn+li+u]=b,i[cn+"dblclick"+u]=o,i.addEventListener(xn,y,ae?{passive:!1}:!1),i.addEventListener(li,b,ae?{passive:!1}:!1),i.addEventListener("dblclick",o,!1),this}function C(i,o){var u=i[cn+xn+o],l=i[cn+li+o],d=i[cn+"dblclick"+o];return i.removeEventListener(xn,u,ae?{passive:!1}:!1),i.removeEventListener(li,l,ae?{passive:!1}:!1),i.removeEventListener("dblclick",d,!1),this}var N=Or(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Y=Or(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lt=Y==="webkitTransition"||Y==="OTransition"?Y+"End":"transitionend";function Te(i){return typeof i=="string"?document.getElementById(i):i}function ue(i,o){var u=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(i,null);u=l?l[o]:null}return u==="auto"?null:u}function ut(i,o,u){var l=document.createElement(i);return l.className=o||"",u&&u.appendChild(l),l}function kt(i){var o=i.parentNode;o&&o.removeChild(i)}function Nr(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function hi(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function di(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function Ra(i,o){if(i.classList!==void 0)return i.classList.contains(o);var u=Mr(i);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function rt(i,o){if(i.classList!==void 0)for(var u=E(o),l=0,d=u.length;l<d;l++)i.classList.add(u[l]);else if(!Ra(i,o)){var m=Mr(i);Na(i,(m?m+" ":"")+o)}}function At(i,o){i.classList!==void 0?i.classList.remove(o):Na(i,I((" "+Mr(i)+" ").replace(" "+o+" "," ")))}function Na(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function Mr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ve(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&ag(i,o)}function ag(i,o){var u=!1,l="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(l)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):i.style.filter+=" progid:"+l+"(opacity="+o+")"}function Or(i){for(var o=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in o)return i[u];return!1}function Rn(i,o,u){var l=o||new G(0,0);i.style[N]=(ns?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(u?" scale("+u+")":"")}function xt(i,o){i._leaflet_pos=o,ie?Rn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function ln(i){return i._leaflet_pos||new G(0,0)}var ls,hs,Ma;if("onselectstart"in document)ls=function(){at(window,"selectstart",ye)},hs=function(){Ct(window,"selectstart",ye)};else{var ds=Or(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ls=function(){if(ds){var i=document.documentElement.style;Ma=i[ds],i[ds]="none"}},hs=function(){ds&&(document.documentElement.style[ds]=Ma,Ma=void 0)}}function Oa(){at(window,"dragstart",ye)}function Da(){Ct(window,"dragstart",ye)}var Dr,Ba;function Ua(i){for(;i.tabIndex===-1;)i=i.parentNode;!i.style||(Br(),Dr=i,Ba=i.style.outline,i.style.outline="none",at(window,"keydown",Br))}function Br(){!Dr||(Dr.style.outline=Ba,Dr=void 0,Ba=void 0,Ct(window,"keydown",Br))}function El(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Fa(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var ug={TRANSFORM:N,TRANSITION:Y,TRANSITION_END:Lt,get:Te,getStyle:ue,create:ut,remove:kt,empty:Nr,toFront:hi,toBack:di,hasClass:Ra,addClass:rt,removeClass:At,setClass:Na,getClass:Mr,setOpacity:ve,testProp:Or,setTransform:Rn,setPosition:xt,getPosition:ln,disableTextSelection:ls,enableTextSelection:hs,disableImageDrag:Oa,enableImageDrag:Da,preventOutline:Ua,restoreOutline:Br,getSizedParentNode:El,getScale:Fa};function at(i,o,u,l){if(typeof o=="object")for(var d in o)Ur(i,d,o[d],u);else{o=E(o);for(var m=0,v=o.length;m<v;m++)Ur(i,o[m],u,l)}return this}var be="_leaflet_events";function Ct(i,o,u,l){if(typeof o=="object")for(var d in o)Va(i,d,o[d],u);else if(o){o=E(o);for(var m=0,v=o.length;m<v;m++)Va(i,o[m],u,l)}else{for(var y in i[be])Va(i,y,i[be][y]);delete i[be]}return this}function Il(){if(ge)return!(ai||Gt)}var za={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ur(i,o,u,l){var d=o+f(u)+(l?"_"+f(l):"");if(i[be]&&i[be][d])return this;var m=function(y){return u.call(l||i,y||window.event)},v=m;ge&&o.indexOf("touch")===0?Pa(i,o,m,d):_e&&o==="dblclick"&&!Il()?T(i,m,d):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(za[o]||o,m,ae?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(m=function(y){y=y||window.event,Fr(i,y)&&v(y)},i.addEventListener(za[o],m,!1)):i.addEventListener(o,v,!1):"attachEvent"in i&&i.attachEvent("on"+o,m),i[be]=i[be]||{},i[be][d]=m}function Va(i,o,u,l){var d=o+f(u)+(l?"_"+f(l):""),m=i[be]&&i[be][d];if(!m)return this;ge&&o.indexOf("touch")===0?Aa(i,o,d):_e&&o==="dblclick"&&!Il()?C(i,d):"removeEventListener"in i?i.removeEventListener(za[o]||o,m,!1):"detachEvent"in i&&i.detachEvent("on"+o,m),i[be][d]=null}function Nn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,ja(i),this}function $a(i){return Ur(i,"wheel",Nn),this}function fs(i){return at(i,"mousedown touchstart dblclick",Nn),Ur(i,"click",qa),this}function ye(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function qe(i){return ye(i),Nn(i),this}function Sl(i,o){if(!o)return new G(i.clientX,i.clientY);var u=Fa(o),l=u.boundingClientRect;return new G((i.clientX-l.left)/u.x-o.clientLeft,(i.clientY-l.top)/u.y-o.clientTop)}var cg=Pr&&Le?2*window.devicePixelRatio:$e?window.devicePixelRatio:1;function kl(i){return ai?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/cg:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}var Ha={};function qa(i){Ha[i.type]=!0}function ja(i){var o=Ha[i.type];return Ha[i.type]=!1,o}function Fr(i,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var lg={on:at,off:Ct,stopPropagation:Nn,disableScrollPropagation:$a,disableClickPropagation:fs,preventDefault:ye,stop:qe,getMousePosition:Sl,getWheelDelta:kl,fakeStop:qa,skipped:ja,isExternalTarget:Fr,addListener:at,removeListener:Ct},Pl=me.extend({run:function(i,o,u,l){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=ln(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var u=this._startPos.add(this._offset.multiplyBy(i));o&&u._round(),xt(this._el,u),this.fire("step")},_complete:function(){nt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),dt=me.extend({options:{crs:ri,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=P(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(_t(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Y&&ie&&!Cr&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),at(this._proxy,Lt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(_t(i),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var l=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,u.zoom):this._tryAnimatedPan(i,u.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(ie?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(ie?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,u){var l=this.getZoomScale(o),d=this.getSize().divideBy(2),m=i instanceof G?i:this.latLngToContainerPoint(i),v=m.subtract(d).multiplyBy(1-1/l),y=this.containerPointToLatLng(d.add(v));return this.setView(y,o,{zoom:u})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():ot(i);var u=q(o.paddingTopLeft||o.padding||[0,0]),l=q(o.paddingBottomRight||o.padding||[0,0]),d=this.getBoundsZoom(i,!1,u.add(l));if(d=typeof o.maxZoom=="number"?Math.min(o.maxZoom,d):d,d===1/0)return{center:i.getCenter(),zoom:d};var m=l.subtract(u).divideBy(2),v=this.project(i.getSouthWest(),d),y=this.project(i.getNorthEast(),d),b=this.unproject(v.add(y).divideBy(2).add(m),d);return{center:b,zoom:d}},fitBounds:function(i,o){if(i=ot(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=q(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){rt(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,u){if(u=u||{},u.animate===!1||!ie)return this.setView(i,o,u);this._stop();var l=this.project(this.getCenter()),d=this.project(i),m=this.getSize(),v=this._zoom;i=_t(i),o=o===void 0?v:o;var y=Math.max(m.x,m.y),b=y*this.getZoomScale(v,o),S=d.distanceTo(l)||1,M=1.42,z=M*M;function ft(Rt){var Kr=Rt?-1:1,Xg=Rt?b:y,Jg=b*b-y*y+Kr*z*z*S*S,Yg=2*Xg*z*S,su=Jg/Yg,oh=Math.sqrt(su*su+1)-su,Qg=oh<1e-9?-18:Math.log(oh);return Qg}function Ke(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function Dn(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}function Gr(Rt){return Ke(Rt)/Dn(Rt)}var dn=ft(0);function iu(Rt){return y*(Dn(dn)/Dn(dn+M*Rt))}function Wg(Rt){return y*(Dn(dn)*Gr(dn+M*Rt)-Ke(dn))/z}function Zg(Rt){return 1-Math.pow(1-Rt,1.5)}var Gg=Date.now(),sh=(ft(1)-dn)/M,Kg=u.duration?1e3*u.duration:1e3*sh*.8;function rh(){var Rt=(Date.now()-Gg)/Kg,Kr=Zg(Rt)*sh;Rt<=1?(this._flyToFrame=x(rh,this),this._move(this.unproject(l.add(d.subtract(l).multiplyBy(Wg(Kr)/S)),v),this.getScaleZoom(y/iu(Kr),v),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),rh.call(this),this},flyToBounds:function(i,o){var u=this._getBoundsCenterZoom(i,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(i){if(i=ot(i),i.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var u=this.getCenter(),l=this._limitCenter(u,this._zoom,ot(i));return u.equals(l)||this.panTo(l,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var u=q(o.paddingTopLeft||o.padding||[0,0]),l=q(o.paddingBottomRight||o.padding||[0,0]),d=this.getCenter(),m=this.project(d),v=this.project(i),y=this.getPixelBounds(),b=y.getSize().divideBy(2),S=ht([y.min.add(u),y.max.subtract(l)]);if(!S.contains(v)){this._enforcingBounds=!0;var M=m.subtract(v),z=q(v.x+M.x,v.y+M.y);(v.x<S.min.x||v.x>S.max.x)&&(z.x=m.x-M.x,M.x>0?z.x+=b.x-u.x:z.x-=b.x-l.x),(v.y<S.min.y||v.y>S.max.y)&&(z.y=m.y-M.y,M.y>0?z.y+=b.y-u.y:z.y-=b.y-l.y),this.panTo(this.unproject(z),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=r({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),l=o.divideBy(2).round(),d=u.divideBy(2).round(),m=l.subtract(d);return!m.x&&!m.y?this:(i.animate&&i.pan?this.panBy(m):(i.pan&&this._rawPanBy(m),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=r({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,i):navigator.geolocation.getCurrentPosition(o,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){var o=i.code,u=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})},_handleGeolocationResponse:function(i){var o=i.coords.latitude,u=i.coords.longitude,l=new st(o,u),d=l.toBounds(i.coords.accuracy*2),m=this._locateOptions;if(m.setView){var v=this.getBoundsZoom(d);this.setView(l,m.maxZoom?Math.min(v,m.maxZoom):v)}var y={latlng:l,bounds:d,timestamp:i.timestamp};for(var b in i.coords)typeof i.coords[b]=="number"&&(y[b]=i.coords[b]);this.fire("locationfound",y)},addHandler:function(i,o){if(!o)return this;var u=this[i]=new o(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(nt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)kt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),l=ut("div",u,o||this._mapPane);return i&&(this._panes[i]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new Tt(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,u){i=ot(i),u=q(u||[0,0]);var l=this.getZoom()||0,d=this.getMinZoom(),m=this.getMaxZoom(),v=i.getNorthWest(),y=i.getSouthEast(),b=this.getSize().subtract(u),S=ht(this.project(y,l),this.project(v,l)).getSize(),M=ie?this.options.zoomSnap:1,z=b.x/S.x,ft=b.y/S.y,Ke=o?Math.max(z,ft):Math.min(z,ft);return l=this.getScaleZoom(Ke,l),M&&(l=Math.round(l/(M/100))*(M/100),l=o?Math.ceil(l/M)*M:Math.floor(l/M)*M),Math.max(d,Math.min(m,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var u=this._getTopLeftPoint(i,o);return new it(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(i)/u.scale(o)},getScaleZoom:function(i,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var l=u.zoom(i*u.scale(o));return isNaN(l)?1/0:l},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(_t(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(q(i),o)},layerPointToLatLng:function(i){var o=q(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(_t(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(_t(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ot(i))},distance:function(i,o){return this.options.crs.distance(_t(i),_t(o))},containerPointToLayerPoint:function(i){return q(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return q(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(q(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_t(i)))},mouseEventToContainerPoint:function(i){return Sl(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Te(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");at(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ie,rt(i,"leaflet-container"+(_e?" leaflet-touch":"")+(Re?" leaflet-retina":"")+(on?" leaflet-oldie":"")+(Gt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=ue(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xt(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(rt(i.markerPane,"leaflet-zoom-hide"),rt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o){xt(this._mapPane,new G(0,0));var u=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var l=this._zoom!==o;this._moveStart(l,!1)._move(i,o)._moveEnd(l),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,u){o===void 0&&(o=this._zoom);var l=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),(l||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){xt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[f(this._container)]=this;var o=i?Ct:at;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ie&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nt(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var u=[],l,d=o==="mouseout"||o==="mouseover",m=i.target||i.srcElement,v=!1;m;){if(l=this._targets[f(m)],l&&(o==="click"||o==="preclick")&&!i._simulated&&this._draggableMoved(l)){v=!0;break}if(l&&l.listens(o,!0)&&(d&&!Fr(m,i)||(u.push(l),d))||m===this._container)break;m=m.parentNode}return!u.length&&!v&&!d&&Fr(m,i)&&(u=[this]),u},_handleDOMEvent:function(i){if(!(!this._loaded||ja(i))){var o=i.type;(o==="mousedown"||o==="keypress"||o==="keyup"||o==="keydown")&&Ua(i.target||i.srcElement),this._fireDOMEvent(i,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,u){if(i.type==="click"){var l=r({},i);l.type="preclick",this._fireDOMEvent(l,l.type,u)}if(!i._stopped&&(u=(u||[]).concat(this._findEventTargets(i,o)),!!u.length)){var d=u[0];o==="contextmenu"&&d.listens(o,!0)&&ye(i);var m={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var v=d.getLatLng&&(!d._radius||d._radius<=10);m.containerPoint=v?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(i),m.layerPoint=this.containerPointToLayerPoint(m.containerPoint),m.latlng=v?d.getLatLng():this.layerPointToLatLng(m.layerPoint)}for(var y=0;y<u.length;y++)if(u[y].fire(o,m,!0),m.originalEvent._stopped||u[y].options.bubblingMouseEvents===!1&&et(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return ln(this._mapPane)||new G(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var u=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var u=this.getSize()._divideBy(2);return this.project(i,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,u){var l=this._getNewPixelOrigin(u,o);return this.project(i,o)._subtract(l)},_latLngBoundsToNewLayerBounds:function(i,o,u){var l=this._getNewPixelOrigin(u,o);return ht([this.project(i.getSouthWest(),o)._subtract(l),this.project(i.getNorthWest(),o)._subtract(l),this.project(i.getSouthEast(),o)._subtract(l),this.project(i.getNorthEast(),o)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,u){if(!u)return i;var l=this.project(i,o),d=this.getSize().divideBy(2),m=new it(l.subtract(d),l.add(d)),v=this._getBoundsOffset(m,u,o);return v.round().equals([0,0])?i:this.unproject(l.add(v),o)},_limitOffset:function(i,o){if(!o)return i;var u=this.getPixelBounds(),l=new it(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(l,o))},_getBoundsOffset:function(i,o,u){var l=ht(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),d=l.min.subtract(i.min),m=l.max.subtract(i.max),v=this._rebound(d.x,-m.x),y=this._rebound(d.y,-m.y);return new G(v,y)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),u=this.getMaxZoom(),l=ie?this.options.zoomSnap:1;return l&&(i=Math.round(i/l)*l),Math.max(o,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var u=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var i=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var u=N,l=this._proxy.style[u];Rn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),l===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Rn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(o),d=this._getCenterOffset(i)._divideBy(1-1/l);return u.animate!==!0&&!this.getSize().contains(d)?!1:(x(function(){this._moveStart(!0,!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,u,l){!this._mapPane||(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:l}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),x(function(){this._moveEnd(!0)},this))}});function hg(i,o){return new dt(i,o)}var Ee=Wt.extend({options:{position:"topright"},initialize:function(i){P(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),u=this.getPosition(),l=i._controlCorners[u];return rt(o,"leaflet-control"),u.indexOf("bottom")!==-1?l.insertBefore(o,l.firstChild):l.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),ps=function(i){return new Ee(i)};dt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",u=this._controlContainer=ut("div",o+"control-container",this._container);function l(d,m){var v=o+d+" "+o+m;i[d+m]=ut("div",v,u)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)kt(this._controlCorners[i]);kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Al=Ee.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,u,l){return u<l?-1:l<u?1:0}},initialize:function(i,o,u){P(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in i)this._addLayer(i[l],l);for(l in o)this._addLayer(o[l],l,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ee.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=ut("div",i),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),fs(o),$a(o);var l=this._section=ut("section",i+"-list");u&&(this._map.on("click",this.collapse,this),An||at(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=ut("a",i+"-toggle",o);d.href="#",d.title="Layers",_e?(at(d,"click",qe),at(d,"click",this.expand,this)):at(d,"focus",this.expand,this),u||this.expand(),this._baseLayersList=ut("div",i+"-base",l),this._separator=ut("div",i+"-separator",l),this._overlaysList=ut("div",i+"-overlays",l),o.appendChild(l)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(l,d){return this.options.sortFunction(l.layer,d.layer,l.name,d.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Nr(this._baseLayersList),Nr(this._overlaysList),this._layerControlInputs=[];var i,o,u,l,d=0;for(u=0;u<this._layers.length;u++)l=this._layers[u],this._addItem(l),o=o||l.overlay,i=i||!l.overlay,d+=l.overlay?0:1;return this.options.hideSingleBase&&(i=i&&d>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(f(i.target)),u=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(i,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=u,l.firstChild},_addItem:function(i){var o=document.createElement("label"),u=this._map.hasLayer(i.layer),l;i.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=u):l=this._createRadioElement("leaflet-base-layers_"+f(this),u),this._layerControlInputs.push(l),l.layerId=f(i.layer),at(l,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+i.name;var m=document.createElement("div");o.appendChild(m),m.appendChild(l),m.appendChild(d);var v=i.overlay?this._overlaysList:this._baseLayersList;return v.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){var i=this._layerControlInputs,o,u,l=[],d=[];this._handlingClick=!0;for(var m=i.length-1;m>=0;m--)o=i[m],u=this._getLayer(o.layerId).layer,o.checked?l.push(u):o.checked||d.push(u);for(m=0;m<d.length;m++)this._map.hasLayer(d[m])&&this._map.removeLayer(d[m]);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])||this._map.addLayer(l[m]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,u,l=this._map.getZoom(),d=i.length-1;d>=0;d--)o=i[d],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&l<u.options.minZoom||u.options.maxZoom!==void 0&&l>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),dg=function(i,o,u){return new Al(i,o,u)},Wa=Ee.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",u=ut("div",o+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,u,l,d){var m=ut("a",u,l);return m.innerHTML=i,m.href="#",m.title=o,m.setAttribute("role","button"),m.setAttribute("aria-label",o),fs(m),at(m,"click",qe),at(m,"click",d,this),at(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";At(this._zoomInButton,o),At(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMinZoom())&&rt(this._zoomOutButton,o),(this._disabled||i._zoom===i.getMaxZoom())&&rt(this._zoomInButton,o)}});dt.mergeOptions({zoomControl:!0}),dt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wa,this.addControl(this.zoomControl))});var fg=function(i){return new Wa(i)},Cl=Ee.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",u=ut("div",o),l=this.options;return this._addScales(l,o+"-line",u),i.on(l.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,u){i.metric&&(this._mScale=ut("div",o,u)),i.imperial&&(this._iScale=ut("div",o,u))},_update:function(){var i=this._map,o=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/i)},_updateImperial:function(i){var o=i*3.2808399,u,l,d;o>5280?(u=o/5280,l=this._getRoundNum(u),this._updateScale(this._iScale,l+" mi",l/u)):(d=this._getRoundNum(o),this._updateScale(this._iScale,d+" ft",d/o))},_updateScale:function(i,o,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),u=i/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),pg=function(i){return new Cl(i)},Za=Ee.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(i){P(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),fs(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),this._container},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(!!this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(" | ")}}});dt.mergeOptions({attributionControl:!0}),dt.addInitHook(function(){this.options.attributionControl&&new Za().addTo(this)});var mg=function(i){return new Za(i)};Ee.Layers=Al,Ee.Zoom=Wa,Ee.Scale=Cl,Ee.Attribution=Za,ps.layers=dg,ps.zoom=fg,ps.scale=pg,ps.attribution=mg;var Ne=Wt.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ne.addTo=function(i,o){return i.addHandler(o,this),this};var gg={Events:gt},Ll=_e?"touchstart mousedown":"mousedown",xl={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ga={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Mn=me.extend({options:{clickTolerance:3},initialize:function(i,o,u,l){P(this,l),this._element=i,this._dragStartTarget=o||i,this._preventOutline=u},enable:function(){this._enabled||(at(this._dragStartTarget,Ll,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Mn._dragging===this&&this.finishDrag(),Ct(this._dragStartTarget,Ll,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(!(i._simulated||!this._enabled)&&(this._moved=!1,!Ra(this._element,"leaflet-zoom-anim")&&!(Mn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Mn._dragging=this,this._preventOutline&&Ua(this._element),Oa(),ls(),!this._moving))){this.fire("down");var o=i.touches?i.touches[0]:i,u=El(this._element);this._startPoint=new G(o.clientX,o.clientY),this._parentScale=Fa(u),at(document,Ga[i.type],this._onMove,this),at(document,xl[i.type],this._onUp,this)}},_onMove:function(i){if(!(i._simulated||!this._enabled)){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,u=new G(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ye(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ln(this._element).subtract(u),rt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,nt(this._animRequest),this._lastEvent=i,this._animRequest=x(this._updatePosition,this,!0))}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),xt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(i){i._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var i in Ga)Ct(document,Ga[i],this._onMove,this),Ct(document,xl[i],this._onUp,this);Da(),hs(),this._moved&&this._moving&&(nt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Mn._dragging=!1}});function Rl(i,o){if(!o||!i.length)return i.slice();var u=o*o;return i=yg(i,u),i=vg(i,u),i}function Nl(i,o,u){return Math.sqrt(ms(i,o,u,!0))}function _g(i,o,u){return ms(i,o,u)}function vg(i,o){var u=i.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new l(u);d[0]=d[u-1]=1,Ka(i,d,o,0,u-1);var m,v=[];for(m=0;m<u;m++)d[m]&&v.push(i[m]);return v}function Ka(i,o,u,l,d){var m=0,v,y,b;for(y=l+1;y<=d-1;y++)b=ms(i[y],i[l],i[d],!0),b>m&&(v=y,m=b);m>u&&(o[v]=1,Ka(i,o,u,l,v),Ka(i,o,u,v,d))}function yg(i,o){for(var u=[i[0]],l=1,d=0,m=i.length;l<m;l++)wg(i[l],i[d])>o&&(u.push(i[l]),d=l);return d<m-1&&u.push(i[m-1]),u}var Ml;function Ol(i,o,u,l,d){var m=l?Ml:On(i,u),v=On(o,u),y,b,S;for(Ml=v;;){if(!(m|v))return[i,o];if(m&v)return!1;y=m||v,b=zr(i,o,y,u,d),S=On(b,u),y===m?(i=b,m=S):(o=b,v=S)}}function zr(i,o,u,l,d){var m=o.x-i.x,v=o.y-i.y,y=l.min,b=l.max,S,M;return u&8?(S=i.x+m*(b.y-i.y)/v,M=b.y):u&4?(S=i.x+m*(y.y-i.y)/v,M=y.y):u&2?(S=b.x,M=i.y+v*(b.x-i.x)/m):u&1&&(S=y.x,M=i.y+v*(y.x-i.x)/m),new G(S,M,d)}function On(i,o){var u=0;return i.x<o.min.x?u|=1:i.x>o.max.x&&(u|=2),i.y<o.min.y?u|=4:i.y>o.max.y&&(u|=8),u}function wg(i,o){var u=o.x-i.x,l=o.y-i.y;return u*u+l*l}function ms(i,o,u,l){var d=o.x,m=o.y,v=u.x-d,y=u.y-m,b=v*v+y*y,S;return b>0&&(S=((i.x-d)*v+(i.y-m)*y)/b,S>1?(d=u.x,m=u.y):S>0&&(d+=v*S,m+=y*S)),v=i.x-d,y=i.y-m,l?v*v+y*y:new G(d,m)}function je(i){return!$(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]!="undefined"}function Dl(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),je(i)}var Tg={simplify:Rl,pointToSegmentDistance:Nl,closestPointOnSegment:_g,clipSegment:Ol,_getEdgeIntersection:zr,_getBitCode:On,_sqClosestPointOnSegment:ms,isFlat:je,_flat:Dl};function Bl(i,o,u){var l,d=[1,4,2,8],m,v,y,b,S,M,z,ft;for(m=0,M=i.length;m<M;m++)i[m]._code=On(i[m],o);for(y=0;y<4;y++){for(z=d[y],l=[],m=0,M=i.length,v=M-1;m<M;v=m++)b=i[m],S=i[v],b._code&z?S._code&z||(ft=zr(S,b,z,o,u),ft._code=On(ft,o),l.push(ft)):(S._code&z&&(ft=zr(S,b,z,o,u),ft._code=On(ft,o),l.push(ft)),l.push(b));i=l}return i}var bg={clipPolygon:Bl},Xa={project:function(i){return new G(i.lng,i.lat)},unproject:function(i){return new st(i.y,i.x)},bounds:new it([-180,-90],[180,90])},Ja={R:6378137,R_MINOR:6356752314245179e-9,bounds:new it([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,u=this.R,l=i.lat*o,d=this.R_MINOR/u,m=Math.sqrt(1-d*d),v=m*Math.sin(l),y=Math.tan(Math.PI/4-l/2)/Math.pow((1-v)/(1+v),m/2);return l=-u*Math.log(Math.max(y,1e-10)),new G(i.lng*o*u,l)},unproject:function(i){for(var o=180/Math.PI,u=this.R,l=this.R_MINOR/u,d=Math.sqrt(1-l*l),m=Math.exp(-i.y/u),v=Math.PI/2-2*Math.atan(m),y=0,b=.1,S;y<15&&Math.abs(b)>1e-7;y++)S=d*Math.sin(v),S=Math.pow((1-S)/(1+S),d/2),b=Math.PI/2-2*Math.atan(m*S)-v,v+=b;return new st(v*o,i.x*o/u)}},Eg={LonLat:Xa,Mercator:Ja,SphericalMercator:sn},Ig=r({},Ce,{code:"EPSG:3395",projection:Ja,transformation:function(){var i=.5/(Math.PI*Ja.R);return rn(i,.5,-i,.5)}()}),Ul=r({},Ce,{code:"EPSG:4326",projection:Xa,transformation:rn(1/180,1,-1/180,.5)}),Sg=r({},Zt,{projection:Xa,transformation:rn(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var u=o.lng-i.lng,l=o.lat-i.lat;return Math.sqrt(u*u+l*l)},infinite:!0});Zt.Earth=Ce,Zt.EPSG3395=Ig,Zt.EPSG3857=ri,Zt.EPSG900913=ba,Zt.EPSG4326=Ul,Zt.Simple=Sg;var Ie=me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[f(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[f(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(!!o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.getAttribution&&o.attributionControl&&o.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),o.fire("layeradd",{layer:this})}}});dt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=f(i);return this._layers[o]?(this._loaded&&i.onRemove(this),i.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(i.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return!!i&&f(i)in this._layers},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},_addLayers:function(i){i=i?$(i)?i:[i]:[];for(var o=0,u=i.length;o<u;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[f(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=f(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,u=this._getZoomSpan();for(var l in this._zoomBoundLayers){var d=this._zoomBoundLayers[l].options;i=d.minZoom===void 0?i:Math.min(i,d.minZoom),o=d.maxZoom===void 0?o:Math.max(o,d.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fi=Ie.extend({initialize:function(i,o){P(this,o),this._layers={};var u,l;if(i)for(u=0,l=i.length;u<l;u++)this.addLayer(i[u])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){if(!i)return!1;var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),u,l;for(u in this._layers)l=this._layers[u],l[i]&&l[i].apply(l,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f(i)}}),kg=function(i,o){return new fi(i,o)},pi=fi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),fi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),fi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Tt;for(var o in this._layers){var u=this._layers[o];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Pg=function(i,o){return new pi(i,o)},mi=Wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(i){P(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(l,i),l},_setIconStyles:function(i,o){var u=this.options,l=u[o+"Size"];typeof l=="number"&&(l=[l,l]);var d=q(l),m=q(o==="shadow"&&u.shadowAnchor||u.iconAnchor||d&&d.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(u.className||""),m&&(i.style.marginLeft=-m.x+"px",i.style.marginTop=-m.y+"px"),d&&(i.style.width=d.x+"px",i.style.height=d.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return Re&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Ag(i){return new mi(i)}var gs=mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return gs.imagePath||(gs.imagePath=this._detectIconPath()),(this.options.imagePath||gs.imagePath)+mi.prototype._getIconUrl.call(this,i)},_detectIconPath:function(){var i=ut("div","leaflet-default-icon-path",document.body),o=ue(i,"background-image")||ue(i,"backgroundImage");return document.body.removeChild(i),o===null||o.indexOf("url")!==0?o="":o=o.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),o}}),Fl=Ne.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Mn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),rt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,u=o._map,l=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,m=ln(o._icon),v=u.getPixelBounds(),y=u.getPixelOrigin(),b=ht(v.min._subtract(y).add(d),v.max._subtract(y).subtract(d));if(!b.contains(m)){var S=q((Math.max(b.max.x,m.x)-b.max.x)/(v.max.x-b.max.x)-(Math.min(b.min.x,m.x)-b.min.x)/(v.min.x-b.min.x),(Math.max(b.max.y,m.y)-b.max.y)/(v.max.y-b.max.y)-(Math.min(b.min.y,m.y)-b.min.y)/(v.min.y-b.min.y)).multiplyBy(l);u.panBy(S,{animate:!1}),this._draggable._newPos._add(S),this._draggable._startPos._add(S),xt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=x(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(nt(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,u=o._shadow,l=ln(o._icon),d=o._map.layerPointToLatLng(l);u&&xt(u,l),o._latlng=d,i.latlng=d,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){nt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Vr=Ie.extend({options:{icon:new gs,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){P(this,o),this._latlng=_t(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=_t(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),l=!1;u!==this._icon&&(this._icon&&this._removeIcon(),l=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),rt(u,o),i.keyboard&&(u.tabIndex="0"),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=i.icon.createShadow(this._shadow),m=!1;d!==this._shadow&&(this._removeShadow(),m=!0),d&&(rt(d,o),d.alt=""),this._shadow=d,i.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&m&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&kt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&xt(this._icon,i),this._shadow&&xt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.interactive&&(rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ve(this._icon,i),this._shadow&&ve(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cg(i,o){return new Vr(i,o)}var hn=Ie.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return P(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),$r=hn.extend({options:{fill:!0,radius:10},initialize:function(i,o){P(this,o),this._latlng=_t(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=_t(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return hn.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,u=this._clickTolerance(),l=[i+u,o+u];this._pxBounds=new it(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Lg(i,o){return new $r(i,o)}var Ya=$r.extend({initialize:function(i,o,u){if(typeof o=="number"&&(o=r({},u,{radius:o})),P(this,o),this._latlng=_t(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Tt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:hn.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,u=this._map,l=u.options.crs;if(l.distance===Ce.distance){var d=Math.PI/180,m=this._mRadius/Ce.R/d,v=u.project([o+m,i]),y=u.project([o-m,i]),b=v.add(y).divideBy(2),S=u.unproject(b).lat,M=Math.acos((Math.cos(m*d)-Math.sin(o*d)*Math.sin(S*d))/(Math.cos(o*d)*Math.cos(S*d)))/d;(isNaN(M)||M===0)&&(M=m/Math.cos(Math.PI/180*o)),this._point=b.subtract(u.getPixelOrigin()),this._radius=isNaN(M)?0:b.x-u.project([S,i-M]).x,this._radiusY=b.y-v.y}else{var z=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(z).x}this._updateBounds()}});function xg(i,o,u){return new Ya(i,o,u)}var We=hn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){P(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,u=null,l=ms,d,m,v=0,y=this._parts.length;v<y;v++)for(var b=this._parts[v],S=1,M=b.length;S<M;S++){d=b[S-1],m=b[S];var z=l(i,d,m,!0);z<o&&(o=z,u=l(i,d,m))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,u,l,d,m,v,y=this._rings[0],b=y.length;if(!b)return null;for(i=0,o=0;i<b-1;i++)o+=y[i].distanceTo(y[i+1])/2;if(o===0)return this._map.layerPointToLatLng(y[0]);for(i=0,l=0;i<b-1;i++)if(d=y[i],m=y[i+1],u=d.distanceTo(m),l+=u,l>o)return v=(l-o)/u,this._map.layerPointToLatLng([m.x-v*(m.x-d.x),m.y-v*(m.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=_t(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Tt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],u=je(i),l=0,d=i.length;l<d;l++)u?(o[l]=_t(i[l]),this._bounds.extend(o[l])):o[l]=this._convertLatLngs(i[l]);return o},_project:function(){var i=new it;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new G(i,i);this._pxBounds=new it([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)])},_projectLatlngs:function(i,o,u){var l=i[0]instanceof st,d=i.length,m,v;if(l){for(v=[],m=0;m<d;m++)v[m]=this._map.latLngToLayerPoint(i[m]),u.extend(v[m]);o.push(v)}else for(m=0;m<d;m++)this._projectLatlngs(i[m],o,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,l,d,m,v,y,b;for(u=0,d=0,m=this._rings.length;u<m;u++)for(b=this._rings[u],l=0,v=b.length;l<v-1;l++)y=Ol(b[l],b[l+1],i,l,!0),!!y&&(o[d]=o[d]||[],o[d].push(y[0]),(y[1]!==b[l+1]||l===v-2)&&(o[d].push(y[1]),d++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,u=0,l=i.length;u<l;u++)i[u]=Rl(i[u],o)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var u,l,d,m,v,y,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,m=this._parts.length;u<m;u++)for(y=this._parts[u],l=0,v=y.length,d=v-1;l<v;d=l++)if(!(!o&&l===0)&&Nl(i,y[d],y[l])<=b)return!0;return!1}});function Rg(i,o){return new We(i,o)}We._flat=Dl;var gi=We.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var i,o,u,l,d,m,v,y,b,S=this._rings[0],M=S.length;if(!M)return null;for(m=v=y=0,i=0,o=M-1;i<M;o=i++)u=S[i],l=S[o],d=u.y*l.x-l.y*u.x,v+=(u.x+l.x)*d,y+=(u.y+l.y)*d,m+=d*3;return m===0?b=S[0]:b=[v/m,y/m],this._map.layerPointToLatLng(b)},_convertLatLngs:function(i){var o=We.prototype._convertLatLngs.call(this,i),u=o.length;return u>=2&&o[0]instanceof st&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(i){We.prototype._setLatLngs.call(this,i),je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,u=new G(o,o);if(i=new it(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,d=this._rings.length,m;l<d;l++)m=Bl(this._rings[l],i,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,u,l,d,m,v,y,b,S;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(m=0,b=this._parts.length;m<b;m++)for(u=this._parts[m],v=0,S=u.length,y=S-1;v<S;y=v++)l=u[v],d=u[y],l.y>i.y!=d.y>i.y&&i.x<(d.x-l.x)*(i.y-l.y)/(d.y-l.y)+l.x&&(o=!o);return o||We.prototype._containsPoint.call(this,i,!0)}});function Ng(i,o){return new gi(i,o)}var Ze=pi.extend({initialize:function(i,o){P(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=$(i)?i:i.features,u,l,d;if(o){for(u=0,l=o.length;u<l;u++)d=o[u],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var m=this.options;if(m.filter&&!m.filter(i))return this;var v=Qa(i,m);return v?(v.feature=jr(i),v.defaultOptions=v.options,this.resetStyle(v),m.onEachFeature&&m.onEachFeature(i,v),this.addLayer(v)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=r({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function Qa(i,o){var u=i.type==="Feature"?i.geometry:i,l=u?u.coordinates:null,d=[],m=o&&o.pointToLayer,v=o&&o.coordsToLatLng||tu,y,b,S,M;if(!l&&!u)return null;switch(u.type){case"Point":return y=v(l),zl(m,i,y,o);case"MultiPoint":for(S=0,M=l.length;S<M;S++)y=v(l[S]),d.push(zl(m,i,y,o));return new pi(d);case"LineString":case"MultiLineString":return b=Hr(l,u.type==="LineString"?0:1,v),new We(b,o);case"Polygon":case"MultiPolygon":return b=Hr(l,u.type==="Polygon"?1:2,v),new gi(b,o);case"GeometryCollection":for(S=0,M=u.geometries.length;S<M;S++){var z=Qa({geometry:u.geometries[S],type:"Feature",properties:i.properties},o);z&&d.push(z)}return new pi(d);default:throw new Error("Invalid GeoJSON object.")}}function zl(i,o,u,l){return i?i(o,u):new Vr(u,l&&l.markersInheritOptions&&l)}function tu(i){return new st(i[1],i[0],i[2])}function Hr(i,o,u){for(var l=[],d=0,m=i.length,v;d<m;d++)v=o?Hr(i[d],o-1,u):(u||tu)(i[d]),l.push(v);return l}function eu(i,o){return o=typeof o=="number"?o:6,i.alt!==void 0?[w(i.lng,o),w(i.lat,o),w(i.alt,o)]:[w(i.lng,o),w(i.lat,o)]}function qr(i,o,u,l){for(var d=[],m=0,v=i.length;m<v;m++)d.push(o?qr(i[m],o-1,u,l):eu(i[m],l));return!o&&u&&d.push(d[0]),d}function _i(i,o){return i.feature?r({},i.feature,{geometry:o}):jr(o)}function jr(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var nu={toGeoJSON:function(i){return _i(this,{type:"Point",coordinates:eu(this.getLatLng(),i)})}};Vr.include(nu),Ya.include(nu),$r.include(nu),We.include({toGeoJSON:function(i){var o=!je(this._latlngs),u=qr(this._latlngs,o?1:0,!1,i);return _i(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),gi.include({toGeoJSON:function(i){var o=!je(this._latlngs),u=o&&!je(this._latlngs[0]),l=qr(this._latlngs,u?2:o?1:0,!0,i);return o||(l=[l]),_i(this,{type:(u?"Multi":"")+"Polygon",coordinates:l})}}),fi.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(i).geometry.coordinates)}),_i(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var u=o==="GeometryCollection",l=[];return this.eachLayer(function(d){if(d.toGeoJSON){var m=d.toGeoJSON(i);if(u)l.push(m.geometry);else{var v=jr(m);v.type==="FeatureCollection"?l.push.apply(l,v.features):l.push(v)}}}),u?_i(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function Vl(i,o){return new Ze(i,o)}var Mg=Vl,Wr=Ie.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,u){this._url=i,this._bounds=ot(o),P(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&hi(this._image),this},bringToBack:function(){return this._map&&di(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ot(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:ut("img");if(rt(o,"leaflet-image-layer"),this._zoomAnimated&&rt(o,"leaflet-zoom-animated"),this.options.className&&rt(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Rn(this._image,u,o)},_reset:function(){var i=this._image,o=new it(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();xt(i,o.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)}}),Og=function(i,o,u){return new Wr(i,o,u)},$l=Wr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:ut("video");if(rt(o,"leaflet-image-layer"),this._zoomAnimated&&rt(o,"leaflet-zoom-animated"),this.options.className&&rt(o,this.options.className),o.onselectstart=_,o.onmousemove=_,o.onloadeddata=c(this.fire,this,"load"),i){for(var u=o.getElementsByTagName("source"),l=[],d=0;d<u.length;d++)l.push(u[d].src);this._url=u.length>0?l:[o.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted;for(var m=0;m<this._url.length;m++){var v=ut("source");v.src=this._url[m],o.appendChild(v)}}});function Dg(i,o,u){return new $l(i,o,u)}var Hl=Wr.extend({_initImage:function(){var i=this._image=this._url;rt(i,"leaflet-image-layer"),this._zoomAnimated&&rt(i,"leaflet-zoom-animated"),this.options.className&&rt(i,this.options.className),i.onselectstart=_,i.onmousemove=_}});function Bg(i,o,u){return new Hl(i,o,u)}var Ge=Ie.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(i,o){P(this,i),this._source=o},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(i){i._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(c(kt,void 0,this._container),200)):kt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=_t(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&hi(this._container),this},bringToBack:function(){return this._map&&di(this._container),this},_prepareOpen:function(i,o,u){if(o instanceof Ie||(u=o,o=i),o instanceof pi)for(var l in i._layers){o=i._layers[l];break}if(!u)if(o.getCenter)u=o.getCenter();else if(o.getLatLng)u=o.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=o,this.update(),u},_updateContent:function(){if(!!this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=q(this.options.offset),u=this._getAnchor();this._zoomAnimated?xt(this._container,i.add(u)):o=o.add(i).add(u);var l=this._containerBottom=-o.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=l+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),vi=Ge.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i.openPopup(this),this},onAdd:function(i){Ge.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hn||this._source.on("preclick",Nn))},onRemove:function(i){Ge.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hn||this._source.off("preclick",Nn))},getEvents:function(){var i=Ge.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this._close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var i="leaflet-popup",o=this._container=ut("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=ut("div",i+"-content-wrapper",o);if(this._contentNode=ut("div",i+"-content",u),fs(o),$a(this._contentNode),at(o,"contextmenu",Nn),this._tipContainer=ut("div",i+"-tip-container",o),this._tip=ut("div",i+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=ut("a",i+"-close-button",o);l.href="#close",l.innerHTML="&#215;",at(l,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var l=i.offsetHeight,d=this.options.maxHeight,m="leaflet-popup-scrolled";d&&l>d?(o.height=d+"px",rt(i,m)):At(i,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();xt(this._container,o.add(u))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var i=this._map,o=parseInt(ue(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,l=this._containerWidth,d=new G(this._containerLeft,-u-this._containerBottom);d._add(ln(this._container));var m=i.layerPointToContainerPoint(d),v=q(this.options.autoPanPadding),y=q(this.options.autoPanPaddingTopLeft||v),b=q(this.options.autoPanPaddingBottomRight||v),S=i.getSize(),M=0,z=0;m.x+l+b.x>S.x&&(M=m.x+l-S.x+b.x),m.x-M-y.x<0&&(M=m.x-y.x),m.y+u+b.y>S.y&&(z=m.y+u-S.y+b.y),m.y-z-y.y<0&&(z=m.y-y.y),(M||z)&&i.fire("autopanstart").panBy([M,z])}},_onCloseButtonClick:function(i){this._close(),qe(i)},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ug=function(i,o){return new vi(i,o)};dt.mergeOptions({closePopupOnClick:!0}),dt.include({openPopup:function(i,o,u){return i instanceof vi||(i=new vi(u).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=i,this.addLayer(i))},closePopup:function(i){return(!i||i===this._popup)&&(i=this._popup,this._popup=null),i&&this.removeLayer(i),this}}),Ie.include({bindPopup:function(i,o){return i instanceof vi?(P(i,o),this._popup=i,i._source=this):((!this._popup||o)&&(this._popup=new vi(o,this)),this._popup.setContent(i)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i,o){return this._popup&&this._map&&(o=this._popup._prepareOpen(this,i,o),this._map.openPopup(this._popup,o)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(i){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(i)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){var o=i.layer||i.target;if(!!this._popup&&!!this._map){if(qe(i),o instanceof hn){this.openPopup(i.layer||i.target,i.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===o?this.closePopup():this.openPopup(o,i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var yi=Ge.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(i){Ge.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(i){Ge.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var i=Ge.prototype.getEvents.call(this);return _e&&!this.options.permanent&&(i.preclick=this._close),i},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,u,l=this._map,d=this._container,m=l.latLngToContainerPoint(l.getCenter()),v=l.layerPointToContainerPoint(i),y=this.options.direction,b=d.offsetWidth,S=d.offsetHeight,M=q(this.options.offset),z=this._getAnchor();y==="top"?(o=b/2,u=S):y==="bottom"?(o=b/2,u=0):y==="center"?(o=b/2,u=S/2):y==="right"?(o=0,u=S/2):y==="left"?(o=b,u=S/2):v.x<m.x?(y="right",o=0,u=S/2):(y="left",o=b+(M.x+z.x)*2,u=S/2),i=i.subtract(q(o,u,!0)).add(M).add(z),At(d,"leaflet-tooltip-right"),At(d,"leaflet-tooltip-left"),At(d,"leaflet-tooltip-top"),At(d,"leaflet-tooltip-bottom"),rt(d,"leaflet-tooltip-"+y),xt(d,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ve(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fg=function(i,o){return new yi(i,o)};dt.include({openTooltip:function(i,o,u){return i instanceof yi||(i=new yi(u).setContent(i)),o&&i.setLatLng(o),this.hasLayer(i)?this:this.addLayer(i)},closeTooltip:function(i){return i&&this.removeLayer(i),this}}),Ie.include({bindTooltip:function(i,o){return i instanceof yi?(P(i,o),this._tooltip=i,i._source=this):((!this._tooltip||o)&&(this._tooltip=new yi(o,this)),this._tooltip.setContent(i)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),_e&&(u.click=this._openTooltip)),this[o](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i,o){return this._tooltip&&this._map&&(o=this._tooltip._prepareOpen(this,i,o),this._map.openTooltip(this._tooltip,o),this._tooltip.options.interactive&&this._tooltip._container&&(rt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(At(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(i){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(i)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_openTooltip:function(i){var o=i.layer||i.target;!this._tooltip||!this._map||this.openTooltip(o,this._tooltip.options.sticky?i.latlng:void 0)},_moveTooltip:function(i){var o=i.latlng,u,l;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),l=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(o)}});var ql=mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Nr(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var l=q(u.bgPos);o.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function zg(i){return new ql(i)}mi.Default=gs;var _s=Ie.extend({options:{tileSize:256,opacity:1,updateWhenIdle:an,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){P(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),kt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(hi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof G?i:new G(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,u=-i(-1/0,1/0),l=0,d=o.length,m;l<d;l++)m=o[l].style.zIndex,o[l]!==this._container&&m&&(u=i(u,+m));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!on){ve(this._container,this.options.opacity);var i=+new Date,o=!1,u=!1;for(var l in this._tiles){var d=this._tiles[l];if(!(!d.current||!d.loaded)){var m=Math.min(1,(i-d.loaded)/200);ve(d.el,m),m<1?o=!0:(d.active?u=!0:this._onOpaqueTile(d),d.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(nt(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=o-Math.abs(i-u),this._onUpdateLevel(u)):(kt(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var l=this._levels[i],d=this._map;return l||(l=this._levels[i]={},l.el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=o,l.origin=d.project(d.unproject(d.getPixelOrigin()),i).round(),l.zoom=i,this._setZoomTransform(l,d.getCenter(),d.getZoom()),_(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(!!this._map){var i,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var l=o.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)kt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,u,l){var d=Math.floor(i/2),m=Math.floor(o/2),v=u-1,y=new G(+d,+m);y.z=+v;var b=this._tileCoordsToKey(y),S=this._tiles[b];return S&&S.active?(S.retain=!0,!0):(S&&S.loaded&&(S.retain=!0),v>l?this._retainParent(d,m,v,l):!1)},_retainChildren:function(i,o,u,l){for(var d=2*i;d<2*i+2;d++)for(var m=2*o;m<2*o+2;m++){var v=new G(d,m);v.z=u+1;var y=this._tileCoordsToKey(v),b=this._tiles[y];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);u+1<l&&this._retainChildren(d,m,u+1,l)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,u,l){var d=Math.round(o);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var m=this.options.updateWhenZooming&&d!==this._tileZoom;(!l||m)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,o)},_setZoomTransform:function(i,o,u){var l=this._map.getZoomScale(u,i.zoom),d=i.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(o,u)).round();ie?Rn(i.el,d,l):xt(i.el,d)},_resetGrid:function(){var i=this._map,o=i.options.crs,u=this._tileSize=this.getTileSize(),l=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],l).x/u.x),Math.ceil(i.project([0,o.wrapLng[1]],l).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],l).y/u.x),Math.ceil(i.project([o.wrapLat[1],0],l).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),l=o.getZoomScale(u,this._tileZoom),d=o.project(i,this._tileZoom).floor(),m=o.getSize().divideBy(l*2);return new it(d.subtract(m),d.add(m))},_update:function(i){var o=this._map;if(!!o){var u=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(i),d=this._pxBoundsToTileRange(l),m=d.getCenter(),v=[],y=this.options.keepBuffer,b=new it(d.getBottomLeft().subtract([y,-y]),d.getTopRight().add([y,-y]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var S in this._tiles){var M=this._tiles[S].coords;(M.z!==this._tileZoom||!b.contains(new G(M.x,M.y)))&&(this._tiles[S].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var z=d.min.y;z<=d.max.y;z++)for(var ft=d.min.x;ft<=d.max.x;ft++){var Ke=new G(ft,z);if(Ke.z=this._tileZoom,!!this._isValidTile(Ke)){var Dn=this._tiles[this._tileCoordsToKey(Ke)];Dn?Dn.current=!0:v.push(Ke)}}if(v.sort(function(dn,iu){return dn.distanceTo(m)-iu.distanceTo(m)}),v.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gr=document.createDocumentFragment();for(ft=0;ft<v.length;ft++)this._addTile(v[ft],Gr);this._level.el.appendChild(Gr)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!o.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(i);return ot(this.options.bounds).overlaps(l)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,u=this.getTileSize(),l=i.scaleBy(u),d=l.add(u),m=o.unproject(l,i.z),v=o.unproject(d,i.z);return[m,v]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),u=new Tt(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),u=new G(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(i){var o=this._tiles[i];!o||(kt(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){rt(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=_,i.onmousemove=_,on&&this.options.opacity<1&&ve(i,this.options.opacity),An&&!Cn&&(i.style.WebkitBackfaceVisibility="hidden")},_addTile:function(i,o){var u=this._getTilePos(i),l=this._tileCoordsToKey(i),d=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(d),this.createTile.length<2&&x(c(this._tileReady,this,i,null,d)),xt(d,u),this._tiles[l]={el:d,coords:i,current:!0},o.appendChild(d),this.fire("tileloadstart",{tile:d,coords:i})},_tileReady:function(i,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:i});var l=this._tileCoordsToKey(i);u=this._tiles[l],!!u&&(u.loaded=+new Date,this._map._fadeAnimated?(ve(u.el,0),nt(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(rt(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),on||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new G(this._wrapX?g(i.x,this._wrapX):i.x,this._wrapY?g(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new it(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Vg(i){return new _s(i)}var wi=_s.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(i,o){this._url=i,o=P(this,o),o.detectRetina&&Re&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom++):(o.zoomOffset++,o.maxZoom--),o.minZoom=Math.max(0,o.minZoom)),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),An||this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var u=document.createElement("img");return at(u,"load",c(this._tileOnLoad,this,o,u)),at(u,"error",c(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u.alt="",u.setAttribute("role","presentation"),u.src=this.getTileUrl(i),u},getTileUrl:function(i){var o={r:Re?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=u),o["-y"]=u}return j(this._url,r(o,this.options))},_tileOnLoad:function(i,o){on?setTimeout(c(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,u){var l=this.options.errorTileUrl;l&&o.getAttribute("src")!==l&&(o.src=l),i(u,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,l=this.options.zoomOffset;return u&&(i=o-i),i+l},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=_,o.onerror=_,o.complete||(o.src=ct,kt(o),delete this._tiles[i]))},_removeTile:function(i){var o=this._tiles[i];if(!!o)return kr||o.el.setAttribute("src",ct),_s.prototype._removeTile.call(this,i)},_tileReady:function(i,o,u){if(!(!this._map||u&&u.getAttribute("src")===ct))return _s.prototype._tileReady.call(this,i,o,u)}});function jl(i,o){return new wi(i,o)}var Wl=wi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var u=r({},this.defaultWmsParams);for(var l in o)l in this.options||(u[l]=o[l]);o=P(this,o);var d=o.detectRetina&&Re?2:1,m=this.getTileSize();u.width=m.x*d,u.height=m.y*d,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,wi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),u=this._crs,l=ht(u.project(o[0]),u.project(o[1])),d=l.min,m=l.max,v=(this._wmsVersion>=1.3&&this._crs===Ul?[d.y,d.x,m.y,m.x]:[d.x,d.y,m.x,m.y]).join(","),y=wi.prototype.getTileUrl.call(this,i);return y+H(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+v},setParams:function(i,o){return r(this.wmsParams,i),o||this.redraw(),this}});function $g(i,o){return new Wl(i,o)}wi.WMS=Wl,jl.wms=$g;var Me=Ie.extend({options:{padding:.1,tolerance:0},initialize:function(i){P(this,i),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var u=this._map.getZoomScale(o,this._zoom),l=ln(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),v=this._map.project(i,o),y=v.subtract(m),b=d.multiplyBy(-u).add(l).add(d).subtract(y);ie?Rn(this._container,b,u):xt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new it(u,u.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zl=Me.extend({getEvents:function(){var i=Me.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Me.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");at(i,"mousemove",this._onMouseMove,this),at(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),at(i,"mouseout",this._handleMouseOut,this),this._ctx=i.getContext("2d")},_destroyContainer:function(){nt(this._redrawRequest),delete this._ctx,kt(this._container),Ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Me.prototype._update.call(this);var i=this._bounds,o=this._container,u=i.getSize(),l=Re?2:1;xt(o,i.min),o.width=l*u.x,o.height=l*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",Re&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Me.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[f(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,u=o.next,l=o.prev;u?u.prev=l:this._drawLast=l,l?l.next=u:this._drawFirst=u,delete i._order,delete this._layers[f(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),u=[],l,d;for(d=0;d<o.length;d++){if(l=Number(o[d]),isNaN(l))return;u.push(l)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){!this._map||(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new it,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)i=l.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(!!this._drawing){var u,l,d,m,v=i._parts,y=v.length,b=this._ctx;if(!!y){for(b.beginPath(),u=0;u<y;u++){for(l=0,d=v[u].length;l<d;l++)m=v[u][l],b[l?"lineTo":"moveTo"](m.x,m.y);o&&b.closePath()}this._fillStroke(b,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,u=this._ctx,l=Math.max(Math.round(i._radius),1),d=(Math.max(Math.round(i._radiusY),1)||l)/l;d!==1&&(u.save(),u.scale(1,d)),u.beginPath(),u.arc(o.x,o.y/d,l,0,Math.PI*2,!1),d!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,o){var u=o.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),u,l,d=this._drawFirst;d;d=d.next)u=d.layer,u.options.interactive&&u._containsPoint(o)&&(!(i.type==="click"||i.type!=="preclick")||!this._map._draggableMoved(u))&&(l=u);l&&(qa(i),this._fireEvent([l],i))},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(At(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var u,l,d=this._drawFirst;d;d=d.next)u=d.layer,u.options.interactive&&u._containsPoint(o)&&(l=u);l!==this._hoveredLayer&&(this._handleMouseOut(i),l&&(rt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseover"),this._hoveredLayer=l)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,u){this._map._fireDOMEvent(o,u||o.type,i)},_bringToFront:function(i){var o=i._order;if(!!o){var u=o.next,l=o.prev;if(u)u.prev=l;else return;l?l.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(!!o){var u=o.next,l=o.prev;if(l)l.next=u;else return;u?u.prev=l:l&&(this._drawLast=l),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function Gl(i){return ss?new Zl(i):null}var vs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Hg={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Me.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=vs("shape");rt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=vs("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;kt(o),i.removeInteractiveTarget(o),delete this._layers[f(i)]},_updateStyle:function(i){var o=i._stroke,u=i._fill,l=i.options,d=i._container;d.stroked=!!l.stroke,d.filled=!!l.fill,l.stroke?(o||(o=i._stroke=vs("stroke")),d.appendChild(o),o.weight=l.weight+"px",o.color=l.color,o.opacity=l.opacity,l.dashArray?o.dashStyle=$(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=l.lineCap.replace("butt","flat"),o.joinstyle=l.lineJoin):o&&(d.removeChild(o),i._stroke=null),l.fill?(u||(u=i._fill=vs("fill")),d.appendChild(u),u.color=l.fillColor||l.color,u.opacity=l.fillOpacity):u&&(d.removeChild(u),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),u=Math.round(i._radius),l=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+l+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){hi(i._container)},_bringToBack:function(i){di(i._container)}},Zr=Ln?vs:Ir,ys=Me.extend({getEvents:function(){var i=Me.prototype.getEvents.call(this);return i.zoomstart=this._onZoomStart,i},_initContainer:function(){this._container=Zr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){kt(this._container),Ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Me.prototype._update.call(this);var i=this._bounds,o=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),xt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=Zr("path");i.options.className&&rt(o,i.options.className),i.options.interactive&&rt(o,"leaflet-interactive"),this._updateStyle(i),this._layers[f(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){kt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[f(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,u=i.options;!o||(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,Sr(i._parts,o))},_updateCircle:function(i){var o=i._point,u=Math.max(Math.round(i._radius),1),l=Math.max(Math.round(i._radiusY),1)||u,d="a"+u+","+l+" 0 1,0 ",m=i._empty()?"M0 0":"M"+(o.x-u)+","+o.y+d+u*2+",0 "+d+-u*2+",0 ";this._setPath(i,m)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){hi(i._path)},_bringToBack:function(i){di(i._path)}});Ln&&ys.include(Hg);function Kl(i){return ui||Ln?new ys(i):null}dt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&Gl(i)||Kl(i)}});var Xl=gi.extend({initialize:function(i,o){gi.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ot(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function qg(i,o){return new Xl(i,o)}ys.create=Zr,ys.pointsToPath=Sr,Ze.geometryToLayer=Qa,Ze.coordsToLatLng=tu,Ze.coordsToLatLngs=Hr,Ze.latLngToCoords=eu,Ze.latLngsToCoords=qr,Ze.getFeature=_i,Ze.asFeature=jr,dt.mergeOptions({boxZoom:!0});var Jl=Ne.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ls(),Oa(),this._startPoint=this._map.mouseEventToContainerPoint(i),at(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new it(this._point,this._startPoint),u=o.getSize();xt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(kt(this._box),At(this._container,"leaflet-crosshair")),hs(),Da(),Ct(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new Tt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&this._finish()}});dt.addInitHook("addHandler","boxZoom",Jl),dt.mergeOptions({doubleClickZoom:!0});var Yl=Ne.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,u=o.getZoom(),l=o.options.zoomDelta,d=i.originalEvent.shiftKey?u-l:u+l;o.options.doubleClickZoom==="center"?o.setZoom(d):o.setZoomAround(i.containerPoint,d)}});dt.addInitHook("addHandler","doubleClickZoom",Yl),dt.mergeOptions({dragging:!0,inertia:!Cn,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ql=Ne.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Mn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ot(this._map.options.maxBounds);this._offsetLimit=ht(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),u=this._initialWorldOffset,l=this._draggable._newPos.x,d=(l-o+u)%i+o-u,m=(l+o+u)%i-o-u,v=Math.abs(d+u)<Math.abs(m+u)?d:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=v},_onDragEnd:function(i){var o=this._map,u=o.options,l=!u.inertia||this._times.length<2;if(o.fire("dragend",i),l)o.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,v=u.easeLinearity,y=d.multiplyBy(v/m),b=y.distanceTo([0,0]),S=Math.min(u.inertiaMaxSpeed,b),M=y.multiplyBy(S/b),z=S/(u.inertiaDeceleration*v),ft=M.multiplyBy(-z/2).round();!ft.x&&!ft.y?o.fire("moveend"):(ft=o._limitOffset(ft,o.options.maxBounds),x(function(){o.panBy(ft,{duration:z,easeLinearity:v,noMoveStart:!0,animate:!0})}))}}});dt.addInitHook("addHandler","dragging",Ql),dt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var th=Ne.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),at(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,u=i.scrollTop||o.scrollTop,l=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(l,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},u=this.keyCodes,l,d;for(l=0,d=u.left.length;l<d;l++)o[u.left[l]]=[-1*i,0];for(l=0,d=u.right.length;l<d;l++)o[u.right[l]]=[i,0];for(l=0,d=u.down.length;l<d;l++)o[u.down[l]]=[0,i];for(l=0,d=u.up.length;l<d;l++)o[u.up[l]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},u=this.keyCodes,l,d;for(l=0,d=u.zoomIn.length;l<d;l++)o[u.zoomIn[l]]=i;for(l=0,d=u.zoomOut.length;l<d;l++)o[u.zoomOut[l]]=-i},_addHooks:function(){at(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,u=this._map,l;if(o in this._panKeys)(!u._panAnim||!u._panAnim._inProgress)&&(l=this._panKeys[o],i.shiftKey&&(l=q(l).multiplyBy(3)),u.panBy(l),u.options.maxBounds&&u.panInsideBounds(u.options.maxBounds));else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;qe(i)}}});dt.addInitHook("addHandler","keyboard",th),dt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eh=Ne.extend({addHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=kl(i),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var l=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),l),qe(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,m=u?Math.ceil(d/u)*u:d,v=i._limitZoom(o+(this._delta>0?m:-m))-o;this._delta=0,this._startTime=null,!!v&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+v):i.setZoomAround(this._lastMousePos,o+v))}});dt.addInitHook("addHandler","scrollWheelZoom",eh),dt.mergeOptions({tap:!0,tapTolerance:15});var nh=Ne.extend({addHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(!!i.touches){if(ye(i),this._fireClick=!0,i.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=i.touches[0],u=o.target;this._startPos=this._newPos=new G(o.clientX,o.clientY),u.tagName&&u.tagName.toLowerCase()==="a"&&rt(u,"leaflet-active"),this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),this._simulateEvent("mousedown",o),at(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(i){if(clearTimeout(this._holdTimeout),Ct(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&i&&i.changedTouches){var o=i.changedTouches[0],u=o.target;u&&u.tagName&&u.tagName.toLowerCase()==="a"&&At(u,"leaflet-active"),this._simulateEvent("mouseup",o),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(i){var o=i.touches[0];this._newPos=new G(o.clientX,o.clientY),this._simulateEvent("mousemove",o)},_simulateEvent:function(i,o){var u=document.createEvent("MouseEvents");u._simulated=!0,o.target._simulatedClick=!0,u.initMouseEvent(i,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(u)}});_e&&(!ge||Gt)&&dt.addInitHook("addHandler","tap",nh),dt.mergeOptions({touchZoom:_e&&!Cn,bounceAtZoomLimits:!0});var ih=Ne.extend({addHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(i.touches[0]),l=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(l)._divideBy(2))),this._startDist=u.distanceTo(l),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend",this._onTouchEnd,this),ye(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(i.touches[0]),l=o.mouseEventToContainerPoint(i.touches[1]),d=u.distanceTo(l)/this._startDist;if(this._zoom=o.getScaleZoom(d,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&d<1||this._zoom>o.getMaxZoom()&&d>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var m=u._add(l)._divideBy(2)._subtract(this._centerPoint);if(d===1&&m.x===0&&m.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),nt(this._animRequest);var v=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=x(v,this,!0),ye(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,nt(this._animRequest),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});dt.addInitHook("addHandler","touchZoom",ih),dt.BoxZoom=Jl,dt.DoubleClickZoom=Yl,dt.Drag=Ql,dt.Keyboard=th,dt.ScrollWheelZoom=eh,dt.Tap=nh,dt.TouchZoom=ih,n.version=s,n.Control=Ee,n.control=ps,n.Browser=Lr,n.Evented=me,n.Mixin=gg,n.Util=Pn,n.Class=Wt,n.Handler=Ne,n.extend=r,n.bind=c,n.stamp=f,n.setOptions=P,n.DomEvent=lg,n.DomUtil=ug,n.PosAnimation=Pl,n.Draggable=Mn,n.LineUtil=Tg,n.PolyUtil=bg,n.Point=G,n.point=q,n.Bounds=it,n.bounds=ht,n.Transformation=Qi,n.transformation=rn,n.Projection=Eg,n.LatLng=st,n.latLng=_t,n.LatLngBounds=Tt,n.latLngBounds=ot,n.CRS=Zt,n.GeoJSON=Ze,n.geoJSON=Vl,n.geoJson=Mg,n.Layer=Ie,n.LayerGroup=fi,n.layerGroup=kg,n.FeatureGroup=pi,n.featureGroup=Pg,n.ImageOverlay=Wr,n.imageOverlay=Og,n.VideoOverlay=$l,n.videoOverlay=Dg,n.SVGOverlay=Hl,n.svgOverlay=Bg,n.DivOverlay=Ge,n.Popup=vi,n.popup=Ug,n.Tooltip=yi,n.tooltip=Fg,n.Icon=mi,n.icon=Ag,n.DivIcon=ql,n.divIcon=zg,n.Marker=Vr,n.marker=Cg,n.TileLayer=wi,n.tileLayer=jl,n.GridLayer=_s,n.gridLayer=Vg,n.SVG=ys,n.svg=Kl,n.Renderer=Me,n.Canvas=Zl,n.canvas=Gl,n.Path=hn,n.CircleMarker=$r,n.circleMarker=Lg,n.Circle=Ya,n.circle=xg,n.Polyline=We,n.polyline=Rg,n.Polygon=gi,n.polygon=Ng,n.Rectangle=Xl,n.rectangle=qg,n.Map=dt,n.map=hg;var jg=window.L;n.noConflict=function(){return window.L=jg,this},window.L=n})})(Nu,Nu.exports);var H1=Nu.exports;/*! Capacitor: https://capacitorjs.com/ - MIT License */const j_=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},s=(a,c)=>{n.platforms.set(a,c)},r=a=>{n.platforms.has(a)&&(n.currentPlatform=n.platforms.get(a))};return n.addPlatform=s,n.setPlatform=r,n},W_=e=>e.CapacitorPlatforms=j_(e),_f=W_(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});_f.addPlatform;_f.setPlatform;var Mi;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Mi||(Mi={}));class uu extends Error{constructor(t,n){super(t);this.message=t,this.code=n}}const Z_=e=>{var t,n;return(e==null?void 0:e.androidBridge)?"android":((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0?void 0:n.bridge)?"ios":"web"},G_=e=>{var t,n,s,r,a;const c=e.CapacitorCustomPlatform||null,h=e.Capacitor||{},f=h.Plugins=h.Plugins||{},p=e.CapacitorPlatforms,g=()=>c!==null?c.name:Z_(e),_=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||g,w=()=>_()!=="web",I=((n=p==null?void 0:p.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||w,E=B=>{const k=et.get(B);return!!((k==null?void 0:k.platforms.has(_()))||W(B))},P=((s=p==null?void 0:p.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||E,H=B=>{var k;return(k=h.PluginHeaders)===null||k===void 0?void 0:k.find(R=>R.name===B)},W=((r=p==null?void 0:p.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||H,j=B=>e.console.error(B),$=(B,k,R)=>Promise.reject(`${R} does not have an implementation of "${k}".`),et=new Map,ct=(B,k={})=>{const R=et.get(B);if(R)return console.warn(`Capacitor plugin "${B}" already registered. Cannot register plugins twice.`),R.proxy;const U=_(),x=W(B);let nt;const Pn=async()=>(!nt&&U in k?nt=typeof k[U]=="function"?nt=await k[U]():nt=k[U]:c!==null&&!nt&&"web"in k&&(nt=typeof k.web=="function"?nt=await k.web():nt=k.web),nt),Wt=(q,it)=>{var ht,Tt;if(x){const ot=x==null?void 0:x.methods.find(st=>it===st.name);if(ot)return ot.rtype==="promise"?st=>h.nativePromise(B,it.toString(),st):(st,_t)=>h.nativeCallback(B,it.toString(),st,_t);if(q)return(ht=q[it])===null||ht===void 0?void 0:ht.bind(q)}else{if(q)return(Tt=q[it])===null||Tt===void 0?void 0:Tt.bind(q);throw new uu(`"${B}" plugin is not implemented on ${U}`,Mi.Unimplemented)}},St=q=>{let it;const ht=(...Tt)=>{const ot=Pn().then(st=>{const _t=Wt(st,q);if(_t){const Zt=_t(...Tt);return it=Zt==null?void 0:Zt.remove,Zt}else throw new uu(`"${B}.${q}()" is not implemented on ${U}`,Mi.Unimplemented)});return q==="addListener"&&(ot.remove=async()=>it()),ot};return ht.toString=()=>`${q.toString()}() { [capacitor code] }`,Object.defineProperty(ht,"name",{value:q,writable:!1,configurable:!1}),ht},gt=St("addListener"),me=St("removeListener"),G=(q,it)=>{const ht=gt({eventName:q},it),Tt=async()=>{const st=await ht;me({eventName:q,callbackId:st},it)},ot=new Promise(st=>ht.then(()=>st({remove:Tt})));return ot.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Tt()},ot},ze=new Proxy({},{get(q,it){switch(it){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?G:gt;case"removeListener":return me;default:return St(it)}}});return f[B]=ze,et.set(B,{name:B,proxy:ze,platforms:new Set([...Object.keys(k),...x?[U]:[]])}),ze},F=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||ct;return h.convertFileSrc||(h.convertFileSrc=B=>B),h.getPlatform=_,h.handleError=j,h.isNativePlatform=I,h.isPluginAvailable=P,h.pluginMethodNoop=$,h.registerPlugin=F,h.Exception=uu,h.DEBUG=!!h.DEBUG,h.isLoggingEnabled=!!h.isLoggingEnabled,h.platform=h.getPlatform(),h.isNative=h.isNativePlatform(),h},K_=e=>e.Capacitor=G_(e),wo=K_(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),X_=wo.registerPlugin;wo.Plugins;class q1{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n);const r=this.windowListeners[t];r&&!r.registered&&this.addWindowListener(r);const a=async()=>this.removeListener(t,n),c=Promise.resolve({remove:a});return Object.defineProperty(c,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),c}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n){const s=this.listeners[t];s&&s.forEach(r=>r(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new wo.Exception(t,Mi.Unimplemented)}unavailable(t="not available"){return new wo.Exception(t,Mi.Unavailable)}async removeListener(t,n){const s=this.listeners[t];if(!s)return;const r=s.indexOf(n);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const j1=X_("Geolocation",{web:()=>import("./web.0b997c4f.js").then(e=>new e.GeolocationWeb)}),Ti=[];function W1(e,t=Hn){let n;const s=new Set;function r(h){if(L_(e,h)&&(e=h,n)){const f=!Ti.length;for(const p of s)p[1](),Ti.push(p,e);if(f){for(let p=0;p<Ti.length;p+=2)Ti[p][0](Ti[p+1]);Ti.length=0}}}function a(h){r(h(e))}function c(h,f=Hn){const p=[h,f];return s.add(p),s.size===1&&(n=t(r)||Hn),h(e),()=>{s.delete(p),s.size===0&&(n(),n=null)}}return{set:r,update:a,subscribe:c}}const J_=Math.asin,Ph=Math.cos,Y_=Math.sin,Q_=Math.sqrt,tv=Math.PI,ev=6378137;function nv(e){return e*e}function Yr(e){return e*tv/180}function Ah(e){return nv(Y_(e/2))}function iv(e,t){const n=Yr(Array.isArray(e)?e[1]:e.latitude||e.lat),s=Yr(Array.isArray(t)?t[1]:t.latitude||t.lat),r=Yr(Array.isArray(e)?e[0]:e.longitude||e.lng||e.lon),a=Yr(Array.isArray(t)?t[0]:t.longitude||t.lng||t.lon),c=Ah(s-n)+Ph(n)*Ph(s)*Ah(a-r);return 2*ev*J_(Q_(c))}var Z1=iv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},rv=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[n++],c=e[n++],h=e[n++],f=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;t[s++]=String.fromCharCode(55296+(f>>10)),t[s++]=String.fromCharCode(56320+(f&1023))}else{const a=e[n++],c=e[n++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<e.length;r+=3){const a=e[r],c=r+1<e.length,h=c?e[r+1]:0,f=r+2<e.length,p=f?e[r+2]:0,g=a>>2,_=(a&3)<<4|h>>4;let w=(h&15)<<2|p>>6,I=p&63;f||(I=64,c||(w=64)),s.push(n[g],n[_],n[w],n[I])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):rv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<e.length;){const a=n[e.charAt(r++)],h=r<e.length?n[e.charAt(r)]:0;++r;const p=r<e.length?n[e.charAt(r)]:64;++r;const _=r<e.length?n[e.charAt(r)]:64;if(++r,a==null||h==null||p==null||_==null)throw Error();const w=a<<2|h>>4;if(s.push(w),p!==64){const I=h<<4&240|p>>2;if(s.push(I),_!==64){const E=p<<6&192|_;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},av=function(e){try{return ov.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vf(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function yf(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function wf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cv(){return Ut().indexOf("Electron/")>=0}function Tf(){const e=Ut();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function lv(){return Ut().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="FirebaseError";class ni extends Error{constructor(t,n,s){super(n);this.code=t,this.customData=s,this.name=hv,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?dv(a,s):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new ni(r,h,s)}}function dv(e,t){return e.replace(fv,(n,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const fv=/\{\$([^}]+)}/g;function pv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function To(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const a=e[r],c=t[r];if(Ch(a)&&Ch(c)){if(!To(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Ch(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Es(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,a]=s.split("=");t[decodeURIComponent(r)]=decodeURIComponent(a)}}),t}function Is(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function mv(e,t){const n=new gv(e,t);return n.subscribe.bind(n)}class gv{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let r;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_v(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:s},r.next===void 0&&(r.next=cu),r.error===void 0&&(r.error=cu),r.complete===void 0&&(r.complete=cu);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console!="undefined"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _v(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function cu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e){return e&&e._delegate?e._delegate:e}class Oi{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new uv;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(wv(t))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=Bn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bn){return this.instances.has(t)}getOptions(t=Bn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(r)}return r}onInit(t,n){var s;const r=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yv(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Bn){return this.component?this.component.multipleInstances?t:Bn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yv(e){return e===Bn?void 0:e}function wv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new vv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(mt||(mt={}));const bv={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},Ev=mt.INFO,Iv={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},Sv=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),r=Iv[t];if(r)console[r](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fc{constructor(t){this.name=t,this._logLevel=Ev,this._logHandler=Sv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?bv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...t),this._logHandler(this,mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...t),this._logHandler(this,mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...t),this._logHandler(this,mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...t),this._logHandler(this,mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...t),this._logHandler(this,mt.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Pv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mu="@firebase/app",Lh="0.7.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new fc("@firebase/app"),Av="@firebase/app-compat",Cv="@firebase/analytics-compat",Lv="@firebase/analytics",xv="@firebase/app-check-compat",Rv="@firebase/app-check",Nv="@firebase/auth",Mv="@firebase/auth-compat",Ov="@firebase/database",Dv="@firebase/database-compat",Bv="@firebase/functions",Uv="@firebase/functions-compat",Fv="@firebase/installations",zv="@firebase/installations-compat",Vv="@firebase/messaging",$v="@firebase/messaging-compat",Hv="@firebase/performance",qv="@firebase/performance-compat",jv="@firebase/remote-config",Wv="@firebase/remote-config-compat",Zv="@firebase/storage",Gv="@firebase/storage-compat",Kv="@firebase/firestore",Xv="@firebase/firestore-compat",Jv="firebase",Yv="9.6.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",Qv={[Mu]:"fire-core",[Av]:"fire-core-compat",[Lv]:"fire-analytics",[Cv]:"fire-analytics-compat",[Rv]:"fire-app-check",[xv]:"fire-app-check-compat",[Nv]:"fire-auth",[Mv]:"fire-auth-compat",[Ov]:"fire-rtdb",[Dv]:"fire-rtdb-compat",[Bv]:"fire-fn",[Uv]:"fire-fn-compat",[Fv]:"fire-iid",[zv]:"fire-iid-compat",[Vv]:"fire-fcm",[$v]:"fire-fcm-compat",[Hv]:"fire-perf",[qv]:"fire-perf-compat",[jv]:"fire-rc",[Wv]:"fire-rc-compat",[Zv]:"fire-gcs",[Gv]:"fire-gcs-compat",[Kv]:"fire-fst",[Xv]:"fire-fst-compat","fire-js":"fire-js",[Jv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Map,Ou=new Map;function ty(e,t){try{e.container.addComponent(t)}catch(n){pc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ds(e){const t=e.name;if(Ou.has(t))return pc.debug(`There were multiple attempts to register component ${t}.`),!1;Ou.set(t,e);for(const n of bo.values())ty(n,e);return!0}function mc(e,t){return e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Eo=new Qs("app","Firebase",ey);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=Yv;function G1(e,t={}){typeof t!="object"&&(t={name:t});const n=Object.assign({name:bf,automaticDataCollectionEnabled:!1},t),s=n.name;if(typeof s!="string"||!s)throw Eo.create("bad-app-name",{appName:String(s)});const r=bo.get(s);if(r){if(To(e,r.options)&&To(n,r.config))return r;throw Eo.create("duplicate-app",{appName:s})}const a=new Tv(s);for(const h of Ou.values())a.addComponent(h);const c=new ny(e,n,a);return bo.set(s,c),c}function Ef(e=bf){const t=bo.get(e);if(!t)throw Eo.create("no-app",{appName:e});return t}function wn(e,t,n){var s;let r=(s=Qv[e])!==null&&s!==void 0?s:e;n&&(r+=`-${n}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${t}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pc.warn(h.join(" "));return}Ds(new Oi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(e){Ds(new Oi("platform-logger",t=>new kv(t),"PRIVATE")),wn(Mu,Lh,e),wn(Mu,Lh,"esm2017"),wn("fire-js","")}iy("");var sy=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},D,gc=gc||{},X=sy||self;function Io(){}function Du(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function nr(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function ry(e){return Object.prototype.hasOwnProperty.call(e,lu)&&e[lu]||(e[lu]=++oy)}var lu="closure_uid_"+(1e9*Math.random()>>>0),oy=0;function ay(e,t,n){return e.call.apply(e.bind,arguments)}function uy(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Vt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Vt=ay:Vt=uy,Vt.apply(null,arguments)}function Qr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),e.apply(this,s)}}function jt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(s,r,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[r].apply(s,c)}}function Sn(){this.s=this.s,this.o=this.o}var cy=0,ly={};Sn.prototype.s=!1;Sn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),cy!=0)){var e=ry(this);delete ly[e]}};Sn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const If=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Sf=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const s=e.length,r=typeof e=="string"?e.split(""):e;for(let a=0;a<s;a++)a in r&&t.call(n,r[a],a,e)};function hy(e){t:{var t=nw;const n=e.length,s=typeof e=="string"?e.split(""):e;for(let r=0;r<n;r++)if(r in s&&t.call(void 0,s[r],r,e)){t=r;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function xh(e){return Array.prototype.concat.apply([],arguments)}function _c(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function So(e){return/^[\s\xa0]*$/.test(e)}var Rh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function te(e,t){return e.indexOf(t)!=-1}function hu(e,t){return e<t?-1:e>t?1:0}var ee;t:{var Nh=X.navigator;if(Nh){var Mh=Nh.userAgent;if(Mh){ee=Mh;break t}}ee=""}function vc(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function kf(e){const t={};for(const n in e)t[n]=e[n];return t}var Oh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pf(e,t){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)e[n]=s[n];for(let a=0;a<Oh.length;a++)n=Oh[a],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function yc(e){return yc[" "](e),e}yc[" "]=Io;function dy(e){var t=my;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var fy=te(ee,"Opera"),Di=te(ee,"Trident")||te(ee,"MSIE"),Af=te(ee,"Edge"),Bu=Af||Di,Cf=te(ee,"Gecko")&&!(te(ee.toLowerCase(),"webkit")&&!te(ee,"Edge"))&&!(te(ee,"Trident")||te(ee,"MSIE"))&&!te(ee,"Edge"),py=te(ee.toLowerCase(),"webkit")&&!te(ee,"Edge");function Lf(){var e=X.document;return e?e.documentMode:void 0}var ko;t:{var du="",fu=function(){var e=ee;if(Cf)return/rv:([^\);]+)(\)|;)/.exec(e);if(Af)return/Edge\/([\d\.]+)/.exec(e);if(Di)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(py)return/WebKit\/(\S+)/.exec(e);if(fy)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(fu&&(du=fu?fu[1]:""),Di){var pu=Lf();if(pu!=null&&pu>parseFloat(du)){ko=String(pu);break t}}ko=du}var my={};function gy(){return dy(function(){let e=0;const t=Rh(String(ko)).split("."),n=Rh("9").split("."),s=Math.max(t.length,n.length);for(let c=0;e==0&&c<s;c++){var r=t[c]||"",a=n[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],r[0].length==0&&a[0].length==0)break;e=hu(r[1].length==0?0:parseInt(r[1],10),a[1].length==0?0:parseInt(a[1],10))||hu(r[2].length==0,a[2].length==0)||hu(r[2],a[2]),r=r[3],a=a[3]}while(e==0)}return 0<=e})}var Uu;if(X.document&&Di){var Dh=Lf();Uu=Dh||parseInt(ko,10)||void 0}else Uu=void 0;var _y=Uu,vy=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{X.addEventListener("test",Io,t),X.removeEventListener("test",Io,t)}catch{}return e}();function Yt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};function Bs(e,t){if(Yt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cf){t:{try{yc(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:yy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bs.Z.h.call(this)}}jt(Bs,Yt);var yy={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),wy=0;function Ty(e,t,n,s,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ia=r,this.key=++wy,this.ca=this.fa=!1}function Zo(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Go(e){this.src=e,this.g={},this.h=0}Go.prototype.add=function(e,t,n,s,r){var a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);var c=zu(e,t,s,r);return-1<c?(t=e[c],n||(t.fa=!1)):(t=new Ty(t,this.src,a,!!s,r),t.fa=n,e.push(t)),t};function Fu(e,t){var n=t.type;if(n in e.g){var s=e.g[n],r=If(s,t),a;(a=0<=r)&&Array.prototype.splice.call(s,r,1),a&&(Zo(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function zu(e,t,n,s){for(var r=0;r<e.length;++r){var a=e[r];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==s)return r}return-1}var wc="closure_lm_"+(1e6*Math.random()|0),mu={};function xf(e,t,n,s,r){if(s&&s.once)return Nf(e,t,n,s,r);if(Array.isArray(t)){for(var a=0;a<t.length;a++)xf(e,t[a],n,s,r);return null}return n=Ec(n),e&&e[ir]?e.N(t,n,nr(s)?!!s.capture:!!s,r):Rf(e,t,n,!1,s,r)}function Rf(e,t,n,s,r,a){if(!t)throw Error("Invalid event type");var c=nr(r)?!!r.capture:!!r,h=bc(e);if(h||(e[wc]=h=new Go(e)),n=h.add(t,n,s,c,a),n.proxy)return n;if(s=by(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)vy||(r=c),r===void 0&&(r=!1),e.addEventListener(t.toString(),s,r);else if(e.attachEvent)e.attachEvent(Of(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function by(){function e(n){return t.call(e.src,e.listener,n)}var t=Ey;return e}function Nf(e,t,n,s,r){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nf(e,t[a],n,s,r);return null}return n=Ec(n),e&&e[ir]?e.O(t,n,nr(s)?!!s.capture:!!s,r):Rf(e,t,n,!0,s,r)}function Mf(e,t,n,s,r){if(Array.isArray(t))for(var a=0;a<t.length;a++)Mf(e,t[a],n,s,r);else s=nr(s)?!!s.capture:!!s,n=Ec(n),e&&e[ir]?(e=e.i,t=String(t).toString(),t in e.g&&(a=e.g[t],n=zu(a,n,s,r),-1<n&&(Zo(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete e.g[t],e.h--)))):e&&(e=bc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zu(t,n,s,r)),(n=-1<e?t[e]:null)&&Tc(n))}function Tc(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[ir])Fu(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Of(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=bc(t))?(Fu(n,e),n.h==0&&(n.src=null,t[wc]=null)):Zo(e)}}}function Of(e){return e in mu?mu[e]:mu[e]="on"+e}function Ey(e,t){if(e.ca)e=!0;else{t=new Bs(t,this);var n=e.listener,s=e.ia||e.src;e.fa&&Tc(e),e=n.call(s,t)}return e}function bc(e){return e=e[wc],e instanceof Go?e:null}var gu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ec(e){return typeof e=="function"?e:(e[gu]||(e[gu]=function(t){return e.handleEvent(t)}),e[gu])}function Ft(){Sn.call(this),this.i=new Go(this),this.P=this,this.I=null}jt(Ft,Sn);Ft.prototype[ir]=!0;Ft.prototype.removeEventListener=function(e,t,n,s){Mf(this,e,t,n,s)};function $t(e,t){var n,s=e.I;if(s)for(n=[];s;s=s.I)n.push(s);if(e=e.P,s=t.type||t,typeof t=="string")t=new Yt(t,e);else if(t instanceof Yt)t.target=t.target||e;else{var r=t;t=new Yt(s,e),Pf(t,r)}if(r=!0,n)for(var a=n.length-1;0<=a;a--){var c=t.g=n[a];r=to(c,s,!0,t)&&r}if(c=t.g=e,r=to(c,s,!0,t)&&r,r=to(c,s,!1,t)&&r,n)for(a=0;a<n.length;a++)c=t.g=n[a],r=to(c,s,!1,t)&&r}Ft.prototype.M=function(){if(Ft.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Zo(n[s]);delete e.g[t],e.h--}}this.I=null};Ft.prototype.N=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)};Ft.prototype.O=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};function to(e,t,n,s){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,a=0;a<t.length;++a){var c=t[a];if(c&&!c.ca&&c.capture==n){var h=c.listener,f=c.ia||c.src;c.fa&&Fu(e.i,c),r=h.call(f,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ic=X.JSON.stringify;function Iy(){var e=Bf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Sy{constructor(){this.h=this.g=null}add(t,n){const s=Df.get();s.set(t,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Df=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ky,e=>e.reset());class ky{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Py(e){X.setTimeout(()=>{throw e},0)}function Sc(e,t){Vu||Ay(),$u||(Vu(),$u=!0),Bf.add(e,t)}var Vu;function Ay(){var e=X.Promise.resolve(void 0);Vu=function(){e.then(Cy)}}var $u=!1,Bf=new Sy;function Cy(){for(var e;e=Iy();){try{e.h.call(e.g)}catch(n){Py(n)}var t=Df;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$u=!1}function Ko(e,t){Ft.call(this),this.h=e||1,this.g=t||X,this.j=Vt(this.kb,this),this.l=Date.now()}jt(Ko,Ft);D=Ko.prototype;D.da=!1;D.S=null;D.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$t(this,"tick"),this.da&&(kc(this),this.start()))}};D.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function kc(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}D.M=function(){Ko.Z.M.call(this),kc(this),delete this.g};function Pc(e,t,n){if(typeof e=="function")n&&(e=Vt(e,n));else if(e&&typeof e.handleEvent=="function")e=Vt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:X.setTimeout(e,t||0)}function Uf(e){e.g=Pc(()=>{e.g=null,e.i&&(e.i=!1,Uf(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Ly extends Sn{constructor(t,n){super();this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Uf(this)}M(){super.M(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(e){Sn.call(this),this.h=e,this.g={}}jt(Us,Sn);var Bh=[];function Ff(e,t,n,s){Array.isArray(n)||(n&&(Bh[0]=n.toString()),n=Bh);for(var r=0;r<n.length;r++){var a=xf(t,n[r],s||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function zf(e){vc(e.g,function(t,n){this.g.hasOwnProperty(n)&&Tc(t)},e),e.g={}}Us.prototype.M=function(){Us.Z.M.call(this),zf(this)};Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xo(){this.g=!0}Xo.prototype.Aa=function(){this.g=!1};function xy(e,t,n,s,r,a){e.info(function(){if(e.g)if(a)for(var c="",h=a.split("&"),f=0;f<h.length;f++){var p=h[f].split("=");if(1<p.length){var g=p[0];p=p[1];var _=g.split("_");c=2<=_.length&&_[1]=="type"?c+(g+"="+p+"&"):c+(g+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+t+`
`+n+`
`+c})}function Ry(e,t,n,s,r,a,c){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+t+`
`+n+`
`+a+" "+c})}function Si(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+My(e,n)+(s?" "+s:"")})}function Ny(e,t){e.info(function(){return"TIMEOUT: "+t})}Xo.prototype.info=function(){};function My(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var a=r[0];if(a!="noop"&&a!="stop"&&a!="close")for(var c=1;c<r.length;c++)r[c]=""}}}}return Ic(n)}catch{return t}}var ii={},Uh=null;function Jo(){return Uh=Uh||new Ft}ii.Ma="serverreachability";function Vf(e){Yt.call(this,ii.Ma,e)}jt(Vf,Yt);function Fs(e){const t=Jo();$t(t,new Vf(t,e))}ii.STAT_EVENT="statevent";function $f(e,t){Yt.call(this,ii.STAT_EVENT,e),this.stat=t}jt($f,Yt);function ne(e){const t=Jo();$t(t,new $f(t,e))}ii.Na="timingevent";function Hf(e,t){Yt.call(this,ii.Na,e),this.size=t}jt(Hf,Yt);function sr(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){e()},t)}var Yo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ac(){}Ac.prototype.h=null;function Fh(e){return e.h||(e.h=e.i())}function jf(){}var rr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Cc(){Yt.call(this,"d")}jt(Cc,Yt);function Lc(){Yt.call(this,"c")}jt(Lc,Yt);var Hu;function Qo(){}jt(Qo,Ac);Qo.prototype.g=function(){return new XMLHttpRequest};Qo.prototype.i=function(){return{}};Hu=new Qo;function or(e,t,n,s){this.l=e,this.j=t,this.m=n,this.X=s||1,this.V=new Us(this),this.P=Oy,e=Bu?125:void 0,this.W=new Ko(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wf}function Wf(){this.i=null,this.g="",this.h=!1}var Oy=45e3,qu={},Po={};D=or.prototype;D.setTimeout=function(e){this.P=e};function ju(e,t,n){e.K=1,e.v=ea(en(t)),e.s=n,e.U=!0,Zf(e,null)}function Zf(e,t){e.F=Date.now(),ar(e),e.A=en(e.v);var n=e.A,s=e.X;Array.isArray(s)||(s=[String(s)]),tp(n.h,"t",s),e.C=0,n=e.l.H,e.h=new Wf,e.g=wp(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ly(Vt(e.Ia,e,e.g),e.O)),Ff(e.V,e.g,"readystatechange",e.gb),t=e.H?kf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Fs(1),xy(e.j,e.u,e.A,e.m,e.X,e.s)}D.gb=function(e){e=e.target;const t=this.L;t&&Xe(e)==3?t.l():this.Ia(e)};D.Ia=function(e){try{if(e==this.g)t:{const g=Xe(this.g);var t=this.g.Da();const _=this.g.ba();if(!(3>g)&&(g!=3||Bu||this.g&&(this.h.h||this.g.ga()||Hh(this.g)))){this.I||g!=4||t==7||(t==8||0>=_?Fs(3):Fs(2)),ta(this);var n=this.g.ba();this.N=n;e:if(Gf(this)){var s=Hh(this.g);e="";var r=s.length,a=Xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){zn(this),As(this);var c="";break e}this.h.i=new X.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:a&&t==r-1});s.splice(0,r),this.h.g+=e,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=n==200,Ry(this.j,this.u,this.A,this.m,this.X,g,n),this.i){if(this.$&&!this.J){e:{if(this.g){var h,f=this.g;if((h=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!So(h)){var p=h;break e}}p=null}if(n=p)Si(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wu(this,n);else{this.i=!1,this.o=3,ne(12),zn(this),As(this);break t}}this.U?(Kf(this,g,c),Bu&&this.i&&g==3&&(Ff(this.V,this.W,"tick",this.fb),this.W.start())):(Si(this.j,this.m,c,null),Wu(this,c)),g==4&&zn(this),this.i&&!this.I&&(g==4?gp(this.l,this):(this.i=!1,ar(this)))}else n==400&&0<c.indexOf("Unknown SID")?(this.o=3,ne(12)):(this.o=0,ne(13)),zn(this),As(this)}}}catch{}finally{}};function Gf(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function Kf(e,t,n){let s=!0,r;for(;!e.I&&e.C<n.length;)if(r=Dy(e,n),r==Po){t==4&&(e.o=4,ne(14),s=!1),Si(e.j,e.m,null,"[Incomplete Response]");break}else if(r==qu){e.o=4,ne(15),Si(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}else Si(e.j,e.m,r,null),Wu(e,r);Gf(e)&&r!=Po&&r!=qu&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,ne(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fc(t),t.L=!0,ne(11))):(Si(e.j,e.m,n,"[Invalid Chunked Response]"),zn(e),As(e))}D.fb=function(){if(this.g){var e=Xe(this.g),t=this.g.ga();this.C<t.length&&(ta(this),Kf(this,e,t),this.i&&e!=4&&ar(this))}};function Dy(e,t){var n=e.C,s=t.indexOf(`
`,n);return s==-1?Po:(n=Number(t.substring(n,s)),isNaN(n)?qu:(s+=1,s+n>t.length?Po:(t=t.substr(s,n),e.C=s+n,t)))}D.cancel=function(){this.I=!0,zn(this)};function ar(e){e.Y=Date.now()+e.P,Xf(e,e.P)}function Xf(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=sr(Vt(e.eb,e),t)}function ta(e){e.B&&(X.clearTimeout(e.B),e.B=null)}D.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(Ny(this.j,this.A),this.K!=2&&(Fs(3),ne(17)),zn(this),this.o=2,As(this)):Xf(this,this.Y-e)};function As(e){e.l.G==0||e.I||gp(e.l,e)}function zn(e){ta(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,kc(e.W),zf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Wu(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||Zu(n.i,e))){if(n.I=e.N,!e.J&&Zu(n.i,e)&&n.G==3){try{var s=n.Ca.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0)t:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)xo(n),sa(n);else break t;Uc(n),ne(18)}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=sr(Vt(n.ab,n),6e3));if(1>=ip(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Vn(n,11)}else if((e.J||n.g==e)&&xo(n),!So(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let p=r[t];if(n.U=p[0],p=p[1],n.G==2)if(p[0]=="c"){n.J=p[1],n.la=p[2];const g=p[3];g!=null&&(n.ma=g,n.h.info("VER="+n.ma));const _=p[4];_!=null&&(n.za=_,n.h.info("SVER="+n.za));const w=p[5];w!=null&&typeof w=="number"&&0<w&&(s=1.5*w,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const I=e.g;if(I){const E=I.g?I.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var a=s.i;!a.g&&(te(E,"spdy")||te(E,"quic")||te(E,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Nc(a,a.h),a.h=null))}if(s.D){const P=I.g?I.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(s.sa=P,It(s.F,s.D,P))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),s=n;var c=e;if(s.oa=yp(s,s.H?s.la:null,s.W),c.J){sp(s.i,c);var h=c,f=s.K;f&&h.setTimeout(f),h.B&&(ta(h),ar(h)),s.g=c}else pp(s);0<n.l.length&&ra(n)}else p[0]!="stop"&&p[0]!="close"||Vn(n,7);else n.G==3&&(p[0]=="stop"||p[0]=="close"?p[0]=="stop"?Vn(n,7):Bc(n):p[0]!="noop"&&n.j&&n.j.wa(p),n.A=0)}}Fs(4)}catch{}}function By(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(Du(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}t=[],n=0;for(s in e)t[n++]=e[s];return t}function xc(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Du(e)||typeof e=="string")Sf(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(Du(e)||typeof e=="string"){n=[];for(var s=e.length,r=0;r<s;r++)n.push(r)}else for(r in n=[],s=0,e)n[s++]=r;s=By(e),r=s.length;for(var a=0;a<r;a++)t.call(void 0,s[a],n&&n[a],e)}}function qi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(e)if(e instanceof qi)for(n=e.T(),s=0;s<n.length;s++)this.set(n[s],e.get(n[s]));else for(s in e)this.set(s,e[s])}D=qi.prototype;D.R=function(){Rc(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};D.T=function(){return Rc(this),this.g.concat()};function Rc(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var s=e.g[t];Zn(e.h,s)&&(e.g[n++]=s),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)s=e.g[t],Zn(r,s)||(e.g[n++]=s,r[s]=1),t++;e.g.length=n}}D.get=function(e,t){return Zn(this.h,e)?this.h[e]:t};D.set=function(e,t){Zn(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};D.forEach=function(e,t){for(var n=this.T(),s=0;s<n.length;s++){var r=n[s],a=this.get(r);e.call(t,a,r,this)}};function Zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Jf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Uy(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),r=null;if(0<=s){var a=e[n].substring(0,s);r=e[n].substring(s+1)}else a=e[n];t(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Gn(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Gn){this.g=t!==void 0?t:e.g,Ao(this,e.j),this.s=e.s,Co(this,e.i),Lo(this,e.m),this.l=e.l,t=e.h;var n=new zs;n.i=t.i,t.g&&(n.g=new qi(t.g),n.h=t.h),zh(this,n),this.o=e.o}else e&&(n=String(e).match(Jf))?(this.g=!!t,Ao(this,n[1]||"",!0),this.s=Cs(n[2]||""),Co(this,n[3]||"",!0),Lo(this,n[4]),this.l=Cs(n[5]||"",!0),zh(this,n[6]||"",!0),this.o=Cs(n[7]||"")):(this.g=!!t,this.h=new zs(null,this.g))}Gn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ss(t,Vh,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Ss(t,Vh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Ss(n,n.charAt(0)=="/"?Hy:$y,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ss(n,jy)),e.join("")};function en(e){return new Gn(e)}function Ao(e,t,n){e.j=n?Cs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Co(e,t,n){e.i=n?Cs(t,!0):t}function Lo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zh(e,t,n){t instanceof zs?(e.h=t,Wy(e.h,e.g)):(n||(t=Ss(t,qy)),e.h=new zs(t,e.g))}function It(e,t,n){e.h.set(t,n)}function ea(e){return It(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fy(e){return e instanceof Gn?en(e):new Gn(e,void 0)}function zy(e,t,n,s){var r=new Gn(null,void 0);return e&&Ao(r,e),t&&Co(r,t),n&&Lo(r,n),s&&(r.l=s),r}function Cs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ss(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Vy),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vy(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Vh=/[#\/\?@]/g,$y=/[#\?:]/g,Hy=/[#\?]/g,qy=/[#\?@]/g,jy=/#/g;function zs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kn(e){e.g||(e.g=new qi,e.h=0,e.i&&Uy(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}D=zs.prototype;D.add=function(e,t){kn(this),this.i=null,e=ji(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Yf(e,t){kn(e),t=ji(e,t),Zn(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Zn(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Rc(e)))}function Qf(e,t){return kn(e),t=ji(e,t),Zn(e.g.h,t)}D.forEach=function(e,t){kn(this),this.g.forEach(function(n,s){Sf(n,function(r){e.call(t,r,s,this)},this)},this)};D.T=function(){kn(this);for(var e=this.g.R(),t=this.g.T(),n=[],s=0;s<t.length;s++)for(var r=e[s],a=0;a<r.length;a++)n.push(t[s]);return n};D.R=function(e){kn(this);var t=[];if(typeof e=="string")Qf(this,e)&&(t=xh(t,this.g.get(ji(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xh(t,e[n])}return t};D.set=function(e,t){return kn(this),this.i=null,e=ji(this,e),Qf(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};D.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function tp(e,t,n){Yf(e,t),0<n.length&&(e.i=null,e.g.set(ji(e,t),_c(n)),e.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var s=t[n],r=encodeURIComponent(String(s));s=this.R(s);for(var a=0;a<s.length;a++){var c=r;s[a]!==""&&(c+="="+encodeURIComponent(String(s[a]))),e.push(c)}}return this.i=e.join("&")};function ji(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Wy(e,t){t&&!e.j&&(kn(e),e.i=null,e.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Yf(this,s),tp(this,r,n))},e)),e.j=t}var Zy=class{constructor(e,t){this.h=e,this.g=t}};function ep(e){this.l=e||Gy,X.PerformanceNavigationTiming?(e=X.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(X.g&&X.g.Ea&&X.g.Ea()&&X.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gy=10;function np(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function ip(e){return e.h?1:e.g?e.g.size:0}function Zu(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Nc(e,t){e.g?e.g.add(t):e.h=t}function sp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ep.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function rp(e){if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return _c(e.i)}function Mc(){}Mc.prototype.stringify=function(e){return X.JSON.stringify(e,void 0)};Mc.prototype.parse=function(e){return X.JSON.parse(e,void 0)};function Ky(){this.g=new Mc}function Xy(e,t,n){const s=n||"";try{xc(e,function(r,a){let c=r;nr(r)&&(c=Ic(r)),t.push(s+a+"="+encodeURIComponent(c))})}catch(r){throw t.push(s+"type="+encodeURIComponent("_badmap")),r}}function Jy(e,t){const n=new Xo;if(X.Image){const s=new Image;s.onload=Qr(eo,n,s,"TestLoadImage: loaded",!0,t),s.onerror=Qr(eo,n,s,"TestLoadImage: error",!1,t),s.onabort=Qr(eo,n,s,"TestLoadImage: abort",!1,t),s.ontimeout=Qr(eo,n,s,"TestLoadImage: timeout",!1,t),X.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}function eo(e,t,n,s,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(s)}catch{}}function ur(e){this.l=e.$b||null,this.j=e.ib||!1}jt(ur,Ac);ur.prototype.g=function(){return new na(this.l,this.j)};ur.prototype.i=function(e){return function(){return e}}({});function na(e,t){Ft.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jt(na,Ft);var Oc=0;D=na.prototype;D.open=function(e,t){if(this.readyState!=Oc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Vs(this)};D.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||X).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=Oc};D.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof X.ReadableStream!="undefined"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;op(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function op(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}D.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?cr(this):Vs(this),this.readyState==3&&op(this)}};D.Ua=function(e){this.g&&(this.response=this.responseText=e,cr(this))};D.Ta=function(e){this.g&&(this.response=e,cr(this))};D.ha=function(){this.g&&cr(this)};function cr(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Vs(e)}D.setRequestHeader=function(e,t){this.v.append(e,t)};D.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Vs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Yy=X.JSON.parse;function Ot(e){Ft.call(this),this.headers=new qi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ap,this.K=this.L=!1}jt(Ot,Ft);var ap="",Qy=/^https?$/i,tw=["POST","PUT"];D=Ot.prototype;D.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hu.g(),this.C=this.u?Fh(this.u):Fh(Hu),this.g.onreadystatechange=Vt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){$h(this,a);return}e=n||"";const r=new qi(this.headers);s&&xc(s,function(a,c){r.set(c,a)}),s=hy(r.T()),n=X.FormData&&e instanceof X.FormData,!(0<=If(tw,t))||s||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lp(this),0<this.B&&((this.K=ew(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vt(this.pa,this)):this.A=Pc(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){$h(this,a)}};function ew(e){return Di&&gy()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function nw(e){return e.toLowerCase()=="content-type"}D.pa=function(){typeof gc!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))};function $h(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,up(e),ia(e)}function up(e){e.D||(e.D=!0,$t(e,"complete"),$t(e,"error"))}D.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$t(this,"complete"),$t(this,"abort"),ia(this))};D.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ia(this,!0)),Ot.Z.M.call(this)};D.Fa=function(){this.s||(this.F||this.v||this.l?cp(this):this.cb())};D.cb=function(){cp(this)};function cp(e){if(e.h&&typeof gc!="undefined"&&(!e.C[1]||Xe(e)!=4||e.ba()!=2)){if(e.v&&Xe(e)==4)Pc(e.Fa,0,e);else if($t(e,"readystatechange"),Xe(e)==4){e.h=!1;try{const h=e.ba();t:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var s;if(s=h===0){var r=String(e.H).match(Jf)[1]||null;if(!r&&X.self&&X.self.location){var a=X.self.location.protocol;r=a.substr(0,a.length-1)}s=!Qy.test(r?r.toLowerCase():"")}n=s}if(n)$t(e,"complete"),$t(e,"success");else{e.m=6;try{var c=2<Xe(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",up(e)}}finally{ia(e)}}}}function ia(e,t){if(e.g){lp(e);const n=e.g,s=e.C[0]?Io:null;e.g=null,e.C=null,t||$t(e,"ready");try{n.onreadystatechange=s}catch{}}}function lp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(X.clearTimeout(e.A),e.A=null)}function Xe(e){return e.g?e.g.readyState:0}D.ba=function(){try{return 2<Xe(this)?this.g.status:-1}catch{return-1}};D.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Yy(t)}};function Hh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ap:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}D.Da=function(){return this.m};D.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function iw(e){let t="";return vc(e,function(n,s){t+=s,t+=":",t+=n,t+=`\r
`}),t}function Dc(e,t,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=iw(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):It(e,t,n))}function Ts(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function hp(e){this.za=0,this.l=[],this.h=new Xo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ts("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ts("baseRetryDelayMs",5e3,e),this.$a=Ts("retryDelaySeedMs",1e4,e),this.Ya=Ts("forwardChannelMaxRetries",2,e),this.ra=Ts("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ep(e&&e.concurrentRequestLimit),this.Ca=new Ky,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}D=hp.prototype;D.ma=8;D.G=1;function Bc(e){if(dp(e),e.G==3){var t=e.V++,n=en(e.F);It(n,"SID",e.J),It(n,"RID",t),It(n,"TYPE","terminate"),lr(e,n),t=new or(e,e.h,t,void 0),t.K=2,t.v=ea(en(n)),n=!1,X.navigator&&X.navigator.sendBeacon&&(n=X.navigator.sendBeacon(t.v.toString(),"")),!n&&X.Image&&(new Image().src=t.v,n=!0),n||(t.g=wp(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ar(t)}vp(e)}D.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function sa(e){e.g&&(Fc(e),e.g.cancel(),e.g=null)}function dp(e){sa(e),e.u&&(X.clearTimeout(e.u),e.u=null),xo(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&X.clearTimeout(e.m),e.m=null)}function _u(e,t){e.l.push(new Zy(e.Za++,t)),e.G==3&&ra(e)}function ra(e){np(e.i)||e.m||(e.m=!0,Sc(e.Ha,e),e.C=0)}function sw(e,t){return ip(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=sr(Vt(e.Ha,e,t),_p(e,e.C)),e.C++,!0)}D.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new or(this,this.h,e,void 0);let a=this.s;if(this.P&&(a?(a=kf(a),Pf(a,this.P)):a=this.P),this.o===null&&(r.H=a),this.ja)t:{for(var t=0,n=0;n<this.l.length;n++){e:{var s=this.l[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=n;break t}if(t===4096||n===this.l.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=fp(this,r,t),n=en(this.F),It(n,"RID",e),It(n,"CVER",22),this.D&&It(n,"X-HTTP-Session-Id",this.D),lr(this,n),this.o&&a&&Dc(n,this.o,a),Nc(this.i,r),this.Ra&&It(n,"TYPE","init"),this.ja?(It(n,"$req",t),It(n,"SID","null"),r.$=!0,ju(r,n,null)):ju(r,n,t),this.G=2}}else this.G==3&&(e?qh(this,e):this.l.length==0||np(this.i)||qh(this))};function qh(e,t){var n;t?n=t.m:n=e.V++;const s=en(e.F);It(s,"SID",e.J),It(s,"RID",n),It(s,"AID",e.U),lr(e,s),e.o&&e.s&&Dc(s,e.o,e.s),n=new or(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=fp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Nc(e.i,n),ju(n,s,t)}function lr(e,t){e.j&&xc({},function(n,s){It(t,s,n)})}function fp(e,t,n){n=Math.min(e.l.length,n);var s=e.j?Vt(e.j.Oa,e.j,e):null;t:{var r=e.l;let a=-1;for(;;){const c=["count="+n];a==-1?0<n?(a=r[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let f=0;f<n;f++){let p=r[f].h;const g=r[f].g;if(p-=a,0>p)a=Math.max(0,r[f].h-100),h=!1;else try{Xy(g,c,"req"+p+"_")}catch{s&&s(g)}}if(h){s=c.join("&");break t}}}return e=e.l.splice(0,n),t.D=e,s}function pp(e){e.g||e.u||(e.Y=1,Sc(e.Ga,e),e.A=0)}function Uc(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=sr(Vt(e.Ga,e),_p(e,e.A)),e.A++,!0)}D.Ga=function(){if(this.u=null,mp(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=sr(Vt(this.bb,this),e)}};D.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ne(10),sa(this),mp(this))};function Fc(e){e.B!=null&&(X.clearTimeout(e.B),e.B=null)}function mp(e){e.g=new or(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=en(e.oa);It(t,"RID","rpc"),It(t,"SID",e.J),It(t,"CI",e.N?"0":"1"),It(t,"AID",e.U),lr(e,t),It(t,"TYPE","xmlhttp"),e.o&&e.s&&Dc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ea(en(t)),n.s=null,n.U=!0,Zf(n,e)}D.ab=function(){this.v!=null&&(this.v=null,sa(this),Uc(this),ne(19))};function xo(e){e.v!=null&&(X.clearTimeout(e.v),e.v=null)}function gp(e,t){var n=null;if(e.g==t){xo(e),Fc(e),e.g=null;var s=2}else if(Zu(e.i,t))n=t.D,sp(e.i,t),s=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(s==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;s=Jo(),$t(s,new Hf(s,n,t,r)),ra(e)}else pp(e);else if(r=t.o,r==3||r==0&&0<e.I||!(s==1&&sw(e,t)||s==2&&Uc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}}function _p(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Vn(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var s=Vt(e.jb,e);n||(n=new Gn("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||Ao(n,"https"),ea(n)),Jy(n.toString(),s)}else ne(2);e.G=0,e.j&&e.j.va(t),vp(e),dp(e)}D.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ne(2)):(this.h.info("Failed to ping google.com"),ne(1))};function vp(e){e.G=0,e.I=-1,e.j&&((rp(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,_c(e.l),e.l.length=0),e.j.ua())}function yp(e,t,n){let s=Fy(n);if(s.i!="")t&&Co(s,t+"."+s.i),Lo(s,s.m);else{const r=X.location;s=zy(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,n)}return e.aa&&vc(e.aa,function(r,a){It(s,a,r)}),t=e.D,n=e.sa,t&&n&&It(s,t,n),It(s,"VER",e.ma),lr(e,s),s}function wp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Ot(new ur({ib:!0})):new Ot(e.qa),t.L=e.H,t}function Tp(){}D=Tp.prototype;D.xa=function(){};D.wa=function(){};D.va=function(){};D.ua=function(){};D.Oa=function(){};function Ro(){if(Di&&!(10<=Number(_y)))throw Error("Environmental error: no available transport.")}Ro.prototype.g=function(e,t){return new pe(e,t)};function pe(e,t){Ft.call(this),this.g=new hp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!So(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!So(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Wi(this)}jt(pe,Ft);pe.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Sc(Vt(e.hb,e,t))),ne(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=yp(e,null,e.W),ra(e)};pe.prototype.close=function(){Bc(this.g)};pe.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,_u(this.g,t)}else this.v?(t={},t.__data__=Ic(e),_u(this.g,t)):_u(this.g,e)};pe.prototype.M=function(){this.g.j=null,delete this.j,Bc(this.g),delete this.g,pe.Z.M.call(this)};function bp(e){Cc.call(this);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}jt(bp,Cc);function Ep(){Lc.call(this),this.status=1}jt(Ep,Lc);function Wi(e){this.g=e}jt(Wi,Tp);Wi.prototype.xa=function(){$t(this.g,"a")};Wi.prototype.wa=function(e){$t(this.g,new bp(e))};Wi.prototype.va=function(e){$t(this.g,new Ep(e))};Wi.prototype.ua=function(){$t(this.g,"b")};Ro.prototype.createWebChannel=Ro.prototype.g;pe.prototype.send=pe.prototype.u;pe.prototype.open=pe.prototype.m;pe.prototype.close=pe.prototype.close;Yo.NO_ERROR=0;Yo.TIMEOUT=8;Yo.HTTP_ERROR=6;qf.COMPLETE="complete";jf.EventType=rr;rr.OPEN="a";rr.CLOSE="b";rr.ERROR="c";rr.MESSAGE="d";Ft.prototype.listen=Ft.prototype.N;Ot.prototype.listenOnce=Ot.prototype.O;Ot.prototype.getLastError=Ot.prototype.La;Ot.prototype.getLastErrorCode=Ot.prototype.Da;Ot.prototype.getStatus=Ot.prototype.ba;Ot.prototype.getResponseJson=Ot.prototype.Qa;Ot.prototype.getResponseText=Ot.prototype.ga;Ot.prototype.send=Ot.prototype.ea;var rw=function(){return new Ro},ow=function(){return Jo()},vu=Yo,aw=qf,uw=ii,jh={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cw=ur,no=jf,lw=Ot;const Wh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}se.UNAUTHENTICATED=new se(null),se.GOOGLE_CREDENTIALS=new se("google-credentials-uid"),se.FIRST_PARTY=new se("first-party-uid"),se.MOCK_USER=new se("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="9.6.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new fc("@firebase/firestore");function Zh(){return Kn.logLevel}function V(e,...t){if(Kn.logLevel<=mt.DEBUG){const n=t.map(zc);Kn.debug(`Firestore (${Zi}): ${e}`,...n)}}function bn(e,...t){if(Kn.logLevel<=mt.ERROR){const n=t.map(zc);Kn.error(`Firestore (${Zi}): ${e}`,...n)}}function Gh(e,...t){if(Kn.logLevel<=mt.WARN){const n=t.map(zc);Kn.warn(`Firestore (${Zi}): ${e}`,...n)}}function zc(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e="Unexpected state"){const t=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+e;throw bn(t),new Error(t)}function wt(e,t){e||Q()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ni{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(se.UNAUTHENTICATED))}shutdown(){}}class fw{constructor(t){this.t=t,this.currentUser=se.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let s=this.i;const r=f=>this.i!==s?(s=this.i,n(f)):Promise.resolve();let a=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qe,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const f=a;t.enqueueRetryable(async()=>{await f.promise,await r(this.currentUser)})},h=f=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qe)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wt(typeof s.accessToken=="string"),new hw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return wt(t===null||typeof t=="string"),new se(t)}}class pw{constructor(t,n,s){this.type="FirstParty",this.user=se.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class mw{constructor(t,n,s){this.h=t,this.l=n,this.m=s}getToken(){return Promise.resolve(new pw(this.h,this.l,this.m))}start(t,n){t.enqueueRetryable(()=>n(se.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _w{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,n){this.o=r=>{t.enqueueRetryable(()=>(a=>(a.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`),n(a.token)))(r))};const s=r=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.g.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.g.getImmediate({optional:!0});r?s(r):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(wt(typeof n.token=="string"),new gw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.p(s),this.T=s=>n.writeSequenceNumber(s))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(e){const t=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vc.I=-1;class Ip{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const r=vw(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<n&&(s+=t.charAt(r[a]%t.length))}return s}}function vt(e,t){return e<t?-1:e>t?1:0}function Bi(e,t,n){return e.length===t.length&&e.every((s,r)=>n(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Z(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return de.fromMillis(Date.now())}static fromDate(t){return de.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new de(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vt(this.nanoseconds,t.nanoseconds):vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new pt(t)}static min(){return new pt(new de(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Sp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n,s){n===void 0?n=0:n>t.length&&Q(),s===void 0?s=t.length-n:s>t.length-n&&Q(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return $s.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof $s?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let r=0;r<s;r++){const a=t.get(r),c=n.get(r);if(a<c)return-1;if(a>c)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Pt extends $s{construct(t,n,s){return new Pt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new Z(A.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const yw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends $s{construct(t,n,s){return new re(t,n,s)}static isValidIdentifier(t){return yw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new re(["__name__"])}static fromServerFormat(t){const n=[];let s="",r=0;const a=()=>{if(s.length===0)throw new Z(A.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new Z(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Z(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=f,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(s+=h,r++):(a(),r++)}if(a(),c)throw new Z(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new re(n)}static emptyPath(){return new re([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(t){this.fields=t,t.sort(re.comparator)}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Bi(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=atob(t);return new qt(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new qt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const ww=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(e){if(wt(!!e),typeof e=="string"){let t=0;const n=ww.exec(e);if(wt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Mt(e.seconds),nanos:Mt(e.nanos)}}function Mt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ui(e){return typeof e=="string"?qt.fromBase64String(e):qt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pp(e){const t=e.mapValue.fields.__previous_value__;return kp(t)?Pp(t):t}function Hs(e){const t=En(e.mapValue.fields.__local_write_time__.timestampValue);return new de(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(e){return e==null}function No(e){return e===0&&1/e==-1/0}function Tw(e){return typeof e=="number"&&Number.isInteger(e)&&!No(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(Pt.fromString(t))}static fromName(t){return new J(Pt.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new Pt(t.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kp(e)?4:10:Q()}function Fe(e,t){if(e===t)return!0;const n=Xn(e);if(n!==Xn(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hs(e).isEqual(Hs(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=En(s.timestampValue),c=En(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return Ui(s.bytesValue).isEqual(Ui(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Mt(s.geoPointValue.latitude)===Mt(r.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Mt(s.integerValue)===Mt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Mt(s.doubleValue),c=Mt(r.doubleValue);return a===c?No(a)===No(c):isNaN(a)&&isNaN(c)}return!1}(e,t);case 9:return Bi(e.arrayValue.values||[],t.arrayValue.values||[],Fe);case 10:return function(s,r){const a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(Kh(a)!==Kh(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Fe(a[h],c[h])))return!1;return!0}(e,t);default:return Q()}}function qs(e,t){return(e.values||[]).find(n=>Fe(n,t))!==void 0}function Fi(e,t){if(e===t)return 0;const n=Xn(e),s=Xn(t);if(n!==s)return vt(n,s);switch(n){case 0:return 0;case 1:return vt(e.booleanValue,t.booleanValue);case 2:return function(r,a){const c=Mt(r.integerValue||r.doubleValue),h=Mt(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(e,t);case 3:return Xh(e.timestampValue,t.timestampValue);case 4:return Xh(Hs(e),Hs(t));case 5:return vt(e.stringValue,t.stringValue);case 6:return function(r,a){const c=Ui(r),h=Ui(a);return c.compareTo(h)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const c=r.split("/"),h=a.split("/");for(let f=0;f<c.length&&f<h.length;f++){const p=vt(c[f],h[f]);if(p!==0)return p}return vt(c.length,h.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const c=vt(Mt(r.latitude),Mt(a.latitude));return c!==0?c:vt(Mt(r.longitude),Mt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,a){const c=r.values||[],h=a.values||[];for(let f=0;f<c.length&&f<h.length;++f){const p=Fi(c[f],h[f]);if(p)return p}return vt(c.length,h.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,a){const c=r.fields||{},h=Object.keys(c),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const _=vt(h[g],p[g]);if(_!==0)return _;const w=Fi(c[h[g]],f[p[g]]);if(w!==0)return w}return vt(h.length,p.length)}(e.mapValue,t.mapValue);default:throw Q()}}function Xh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vt(e,t);const n=En(e),s=En(t),r=vt(n.seconds,s.seconds);return r!==0?r:vt(n.nanos,s.nanos)}function $c(e){return Ku(e)}function Ku(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(s){const r=En(s);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,J.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(s){let r="[",a=!0;for(const c of s.values||[])a?a=!1:r+=",",r+=Ku(c);return r+"]"}(e.arrayValue):"mapValue"in e?function(s){const r=Object.keys(s.fields||{}).sort();let a="{",c=!0;for(const h of r)c?c=!1:a+=",",a+=`${h}:${Ku(s.fields[h])}`;return a+"}"}(e.mapValue):Q();var t,n}function Xu(e){return!!e&&"integerValue"in e}function Hc(e){return!!e&&"arrayValue"in e}function Jh(e){return!!e&&"nullValue"in e}function Yh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uo(e){return!!e&&"mapValue"in e}function Ls(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gi(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Ls(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ls(e.arrayValue.values[n]);return t}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.value=t}static empty(){return new Pe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!uo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ls(n)}setAll(t){let n=re.emptyPath(),s={},r=[];t.forEach((c,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,s,r),s={},r=[],n=h.popLast()}c?s[h.lastSegment()]=Ls(c):r.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,r)}delete(t){const n=this.field(t.popLast());uo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Fe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=n.mapValue.fields[t.get(s)];uo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,s){Gi(n,(r,a)=>t[r]=a);for(const r of s)delete t[r]}clone(){return new Pe(Ls(this.value))}}function Ap(e){const t=[];return Gi(e.fields,(n,s)=>{const r=new re([n]);if(uo(s)){const a=Ap(s.mapValue).fields;if(a.length===0)t.push(r);else for(const c of a)t.push(r.child(c))}else t.push(r)}),new Gu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,n,s,r,a){this.key=t,this.documentType=n,this.version=s,this.data=r,this.documentState=a}static newInvalidDocument(t){return new Jt(t,0,pt.min(),Pe.empty(),0)}static newFoundDocument(t,n,s){return new Jt(t,1,n,s,0)}static newNoDocument(t,n){return new Jt(t,2,n,Pe.empty(),0)}static newUnknownDocument(t,n){return new Jt(t,3,n,Pe.empty(),2)}convertToFoundDocument(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Jt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t,n=null,s=[],r=[],a=null,c=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.R=null}}function Qh(e,t=null,n=[],s=[],r=null,a=null,c=null){return new bw(e,t,n,s,r,a,c)}function qc(e){const t=tt(e);if(t.R===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Iw(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Ki(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Mo(t.startAt)),t.endAt&&(n+="|ub:",n+=Mo(t.endAt)),t.R=n}return t.R}function Ew(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${$c(s.value)}`;var s}).join(", ")}]`),Ki(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Mo(e.startAt)),e.endAt&&(t+=", endAt: "+Mo(e.endAt)),`Target(${t})`}function jc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Rw(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(n=e.filters[r],s=t.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!Fe(n.value,s.value))return!1;var n,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ed(e.startAt,t.startAt)&&ed(e.endAt,t.endAt)}function Ju(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class oe extends class{}{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.P(t,n,s):new Sw(t,n,s):n==="array-contains"?new Aw(t,s):n==="in"?new Cw(t,s):n==="not-in"?new Lw(t,s):n==="array-contains-any"?new xw(t,s):new oe(t,n,s)}static P(t,n,s){return n==="in"?new kw(t,s):new Pw(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.v(Fi(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.v(Fi(n,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function Iw(e){return e.field.canonicalString()+e.op.toString()+$c(e.value)}class Sw extends oe{constructor(t,n,s){super(t,n,s),this.key=J.fromName(s.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.v(n)}}class kw extends oe{constructor(t,n){super(t,"in",n),this.keys=Cp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Pw extends oe{constructor(t,n){super(t,"not-in",n),this.keys=Cp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Cp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>J.fromName(s.referenceValue))}class Aw extends oe{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hc(n)&&qs(n.arrayValue,this.value)}}class Cw extends oe{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&qs(this.value.arrayValue,n)}}class Lw extends oe{constructor(t,n){super(t,"not-in",n)}matches(t){if(qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!qs(this.value.arrayValue,n)}}class xw extends oe{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>qs(this.value.arrayValue,s))}}class Yu{constructor(t,n){this.position=t,this.before=n}}function Mo(e){return`${e.before?"b":"a"}:${e.position.map(t=>$c(t)).join(",")}`}class xs{constructor(t,n="asc"){this.field=t,this.dir=n}}function Rw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function td(e,t,n){let s=0;for(let r=0;r<e.position.length;r++){const a=t[r],c=e.position[r];if(a.field.isKeyField()?s=J.comparator(J.fromName(c.referenceValue),n.key):s=Fi(c,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return e.before?s<=0:s<0}function ed(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n=null,s=[],r=[],a=null,c="F",h=null,f=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=f,this.S=null,this.D=null,this.startAt,this.endAt}}function Nw(e,t,n,s,r,a,c,h){return new oa(e,t,n,s,r,a,c,h)}function Wc(e){return new oa(e)}function co(e){return!Ki(e.limit)&&e.limitType==="F"}function Oo(e){return!Ki(e.limit)&&e.limitType==="L"}function Mw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ow(e){for(const t of e.filters)if(t.V())return t.field;return null}function Dw(e){return e.collectionGroup!==null}function js(e){const t=tt(e);if(t.S===null){t.S=[];const n=Ow(t),s=Mw(t);if(n!==null&&s===null)n.isKeyField()||t.S.push(new xs(n)),t.S.push(new xs(re.keyField(),"asc"));else{let r=!1;for(const a of t.explicitOrderBy)t.S.push(a),a.field.isKeyField()&&(r=!0);if(!r){const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new xs(re.keyField(),a))}}}return t.S}function Jn(e){const t=tt(e);if(!t.D)if(t.limitType==="F")t.D=Qh(t.path,t.collectionGroup,js(t),t.filters,t.limit,t.startAt,t.endAt);else{const n=[];for(const a of js(t)){const c=a.dir==="desc"?"asc":"desc";n.push(new xs(a.field,c))}const s=t.endAt?new Yu(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Yu(t.startAt.position,!t.startAt.before):null;t.D=Qh(t.path,t.collectionGroup,n,t.filters,t.limit,s,r)}return t.D}function Bw(e,t,n){return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function aa(e,t){return jc(Jn(e),Jn(t))&&e.limitType===t.limitType}function Lp(e){return`${qc(Jn(e))}|lt:${e.limitType}`}function Qu(e){return`Query(target=${Ew(Jn(e))}; limitType=${e.limitType})`}function ua(e,t){return t.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):J.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(e,t)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(n,s){return!(n.startAt&&!td(n.startAt,js(n),s)||n.endAt&&td(n.endAt,js(n),s))}(e,t)}function xp(e){return(t,n)=>{let s=!1;for(const r of js(e)){const a=Uw(r,t,n);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function Uw(e,t,n){const s=e.field.isKeyField()?J.comparator(t.key,n.key):function(r,a,c){const h=a.data.field(r),f=c.data.field(r);return h!==null&&f!==null?Fi(h,f):Q()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:No(t)?"-0":t}}function Np(e){return{integerValue:""+e}}function Fw(e,t){return Tw(t)?Np(t):Rp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this._=void 0}}function zw(e,t,n){return e instanceof Do?function(s,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(a.fields.__previous_value__=r),{mapValue:a}}(n,t):e instanceof Ws?Op(e,t):e instanceof Zs?Dp(e,t):function(s,r){const a=Mp(s,r),c=nd(a)+nd(s.N);return Xu(a)&&Xu(s.N)?Np(c):Rp(s.k,c)}(e,t)}function Vw(e,t,n){return e instanceof Ws?Op(e,t):e instanceof Zs?Dp(e,t):n}function Mp(e,t){return e instanceof Bo?Xu(n=t)||function(s){return!!s&&"doubleValue"in s}(n)?t:{integerValue:0}:null;var n}class Do extends ca{}class Ws extends ca{constructor(t){super(),this.elements=t}}function Op(e,t){const n=Bp(t);for(const s of e.elements)n.some(r=>Fe(r,s))||n.push(s);return{arrayValue:{values:n}}}class Zs extends ca{constructor(t){super(),this.elements=t}}function Dp(e,t){let n=Bp(t);for(const s of e.elements)n=n.filter(r=>!Fe(r,s));return{arrayValue:{values:n}}}class Bo extends ca{constructor(t,n){super(),this.k=t,this.N=n}}function nd(e){return Mt(e.integerValue||e.doubleValue)}function Bp(e){return Hc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function $w(e,t){return e.field.isEqual(t.field)&&function(n,s){return n instanceof Ws&&s instanceof Ws||n instanceof Zs&&s instanceof Zs?Bi(n.elements,s.elements,Fe):n instanceof Bo&&s instanceof Bo?Fe(n.N,s.N):n instanceof Do&&s instanceof Do}(e.transform,t.transform)}class Hw{constructor(t,n){this.version=t,this.transformResults=n}}class Ci{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ci}static exists(t){return new Ci(void 0,t)}static updateTime(t){return new Ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lo(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class la{}function qw(e,t,n){e instanceof ha?function(s,r,a){const c=s.value.clone(),h=rd(s.fieldTransforms,r,a.transformResults);c.setAll(h),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Xi?function(s,r,a){if(!lo(s.precondition,r))return void r.convertToUnknownDocument(a.version);const c=rd(s.fieldTransforms,r,a.transformResults),h=r.data;h.setAll(Up(s)),h.setAll(c),r.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function tc(e,t,n){e instanceof ha?function(s,r,a){if(!lo(s.precondition,r))return;const c=s.value.clone(),h=od(s.fieldTransforms,a,r);c.setAll(h),r.convertToFoundDocument(sd(r),c).setHasLocalMutations()}(e,t,n):e instanceof Xi?function(s,r,a){if(!lo(s.precondition,r))return;const c=od(s.fieldTransforms,a,r),h=r.data;h.setAll(Up(s)),h.setAll(c),r.convertToFoundDocument(sd(r),h).setHasLocalMutations()}(e,t,n):function(s,r){lo(s.precondition,r)&&r.convertToNoDocument(pt.min())}(e,t)}function jw(e,t){let n=null;for(const s of e.fieldTransforms){const r=t.data.field(s.field),a=Mp(s.transform,r||null);a!=null&&(n==null&&(n=Pe.empty()),n.set(s.field,a))}return n||null}function id(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Bi(n,s,(r,a)=>$w(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sd(e){return e.isFoundDocument()?e.version:pt.min()}class ha extends la{constructor(t,n,s,r=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}}class Xi extends la{constructor(t,n,s,r,a=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}}function Up(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function rd(e,t,n){const s=new Map;wt(e.length===n.length);for(let r=0;r<n.length;r++){const a=e[r],c=a.transform,h=t.data.field(a.field);s.set(a.field,Vw(c,h,n[r]))}return s}function od(e,t,n){const s=new Map;for(const r of e){const a=r.transform,c=n.data.field(r.field);s.set(r.field,zw(a,c,t))}return s}class Ww extends la{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class Zw extends la{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.count=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,lt;function Kw(e){switch(e){default:return Q();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function Fp(e){if(e===void 0)return bn("GRPC error has no .code"),A.UNKNOWN;switch(e){case Nt.OK:return A.OK;case Nt.CANCELLED:return A.CANCELLED;case Nt.UNKNOWN:return A.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return A.INTERNAL;case Nt.UNAVAILABLE:return A.UNAVAILABLE;case Nt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Nt.NOT_FOUND:return A.NOT_FOUND;case Nt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Nt.ABORTED:return A.ABORTED;case Nt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Nt.DATA_LOSS:return A.DATA_LOSS;default:return Q()}}(lt=Nt||(Nt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n){this.comparator=t,this.root=n||zt.EMPTY}insert(t,n){return new Qt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(t){return new Qt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new io(this.root,t,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new io(this.root,t,this.comparator,!0)}}class io{constructor(t,n,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?s(t.key,n):1,r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zt{constructor(t,n,s,r,a){this.key=t,this.value=n,this.color=s!=null?s:zt.RED,this.left=r!=null?r:zt.EMPTY,this.right=a!=null?a:zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,r,a){return new zt(t!=null?t:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this;const a=s(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,n,s),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return zt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const t=this.left.check();if(t!==this.right.check())throw Q();return t+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,n,s,r){return this}insert(e,t,n){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new Qt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ad(this.data.getIterator())}getIteratorFrom(t){return new ad(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class ad{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Qt(J.comparator);function Yn(){return Xw}const Jw=new Qt(J.comparator);function ec(){return Jw}const Yw=new Qt(J.comparator);function Qw(){return Yw}const t0=new Ht(J.comparator);function bt(...e){let t=t0;for(const n of e)t=t.add(n);return t}const e0=new Ht(vt);function zp(){return e0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n,s,r,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n){const s=new Map;return s.set(t,hr.createSynthesizedTargetChangeForCurrentChange(t,n)),new da(pt.min(),s,zp(),Yn(),bt())}}class hr{constructor(t,n,s,r,a){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n){return new hr(qt.EMPTY_BYTE_STRING,n,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,n,s,r){this.$=t,this.removedTargetIds=n,this.key=s,this.O=r}}class Vp{constructor(t,n){this.targetId=t,this.M=n}}class $p{constructor(t,n,s=qt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=r}}class ud{constructor(){this.F=0,this.L=ld(),this.B=qt.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return this.F!==0}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=bt(),n=bt(),s=bt();return this.L.forEach((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Q()}}),new hr(this.B,this.U,t,n,s)}H(){this.q=!1,this.L=ld()}J(t,n){this.q=!0,this.L=this.L.insert(t,n)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class n0{constructor(t){this.et=t,this.nt=new Map,this.st=Yn(),this.it=cd(),this.rt=new Ht(vt)}ot(t){for(const n of t.$)t.O&&t.O.isFoundDocument()?this.ct(n,t.O):this.at(n,t.key,t.O);for(const n of t.removedTargetIds)this.at(n,t.key,t.O)}ut(t){this.forEachTarget(t,n=>{const s=this.ht(n);switch(t.state){case 0:this.lt(n)&&s.W(t.resumeToken);break;case 1:s.Z(),s.K||s.H(),s.W(t.resumeToken);break;case 2:s.Z(),s.K||this.removeTarget(n);break;case 3:this.lt(n)&&(s.tt(),s.W(t.resumeToken));break;case 4:this.lt(n)&&(this.ft(n),s.W(t.resumeToken));break;default:Q()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.nt.forEach((s,r)=>{this.lt(r)&&n(r)})}dt(t){const n=t.targetId,s=t.M.count,r=this.wt(n);if(r){const a=r.target;if(Ju(a))if(s===0){const c=new J(a.path);this.at(n,c,Jt.newNoDocument(c,pt.min()))}else wt(s===1);else this._t(n)!==s&&(this.ft(n),this.rt=this.rt.add(n))}}gt(t){const n=new Map;this.nt.forEach((a,c)=>{const h=this.wt(c);if(h){if(a.current&&Ju(h.target)){const f=new J(h.target.path);this.st.get(f)!==null||this.yt(c,f)||this.at(c,f,Jt.newNoDocument(f,t))}a.j&&(n.set(c,a.G()),a.H())}});let s=bt();this.it.forEach((a,c)=>{let h=!0;c.forEachWhile(f=>{const p=this.wt(f);return!p||p.purpose===2||(h=!1,!1)}),h&&(s=s.add(a))});const r=new da(t,n,this.rt,this.st,s);return this.st=Yn(),this.it=cd(),this.rt=new Ht(vt),r}ct(t,n){if(!this.lt(t))return;const s=this.yt(t,n.key)?2:0;this.ht(t).J(n.key,s),this.st=this.st.insert(n.key,n),this.it=this.it.insert(n.key,this.Tt(n.key).add(t))}at(t,n,s){if(!this.lt(t))return;const r=this.ht(t);this.yt(t,n)?r.J(n,1):r.Y(n),this.it=this.it.insert(n,this.Tt(n).delete(t)),s&&(this.st=this.st.insert(n,s))}removeTarget(t){this.nt.delete(t)}_t(t){const n=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let n=this.nt.get(t);return n||(n=new ud,this.nt.set(t,n)),n}Tt(t){let n=this.it.get(t);return n||(n=new Ht(vt),this.it=this.it.insert(t,n)),n}lt(t){const n=this.wt(t)!==null;return n||V("WatchChangeAggregator","Detected inactive target",t),n}wt(t){const n=this.nt.get(t);return n&&n.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new ud),this.et.getRemoteKeysForTarget(t).forEach(n=>{this.at(t,n,null)})}yt(t,n){return this.et.getRemoteKeysForTarget(t).has(n)}}function cd(){return new Qt(J.comparator)}function ld(){return new Qt(J.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),s0=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class r0{constructor(t,n){this.databaseId=t,this.C=n}}function Uo(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hp(e,t){return e.C?t.toBase64():t.toUint8Array()}function o0(e,t){return Uo(e,t.toTimestamp())}function tn(e){return wt(!!e),pt.fromTimestamp(function(t){const n=En(t);return new de(n.seconds,n.nanos)}(e))}function Zc(e,t){return function(n){return new Pt(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function qp(e){const t=Pt.fromString(e);return wt(Zp(t)),t}function nc(e,t){return Zc(e.databaseId,t.path)}function yu(e,t){const n=qp(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(jp(n))}function ic(e,t){return Zc(e.databaseId,t)}function a0(e){const t=qp(e);return t.length===4?Pt.emptyPath():jp(t)}function sc(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jp(e){return wt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function hd(e,t,n){return{name:nc(e,t),fields:n.value.mapValue.fields}}function u0(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Q()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=function(f,p){return f.C?(wt(p===void 0||typeof p=="string"),qt.fromBase64String(p||"")):(wt(p===void 0||p instanceof Uint8Array),qt.fromUint8Array(p||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(f){const p=f.code===void 0?A.UNKNOWN:Fp(f.code);return new Z(p,f.message||"")}(c);n=new $p(s,r,a,h||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=yu(e,s.document.name),a=tn(s.document.updateTime),c=new Pe({mapValue:{fields:s.document.fields}}),h=Jt.newFoundDocument(r,a,c),f=s.targetIds||[],p=s.removedTargetIds||[];n=new ho(f,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=yu(e,s.document),a=s.readTime?tn(s.readTime):pt.min(),c=Jt.newNoDocument(r,a),h=s.removedTargetIds||[];n=new ho([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=yu(e,s.document),a=s.removedTargetIds||[];n=new ho([],a,r,null)}else{if(!("filter"in t))return Q();{t.filter;const s=t.filter;s.targetId;const r=s.count||0,a=new Gw(r),c=s.targetId;n=new Vp(c,a)}}return n}function c0(e,t){let n;if(t instanceof ha)n={update:hd(e,t.key,t.value)};else if(t instanceof Ww)n={delete:nc(e,t.key)};else if(t instanceof Xi)n={update:hd(e,t.key,t.data),updateMask:y0(t.fieldMask)};else{if(!(t instanceof Zw))return Q();n={verify:nc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,a){const c=a.transform;if(c instanceof Do)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ws)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Zs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bo)return{fieldPath:a.field.canonicalString(),increment:c.N};throw Q()}(0,s))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:o0(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Q()}(e,t.precondition)),n}function l0(e,t){return e&&e.length>0?(wt(t!==void 0),e.map(n=>function(s,r){let a=s.updateTime?tn(s.updateTime):tn(r);return a.isEqual(pt.min())&&(a=tn(r)),new Hw(a,s.transformResults||[])}(n,t))):[]}function h0(e,t){return{documents:[ic(e,t.path)]}}function d0(e,t){const n={structuredQuery:{}},s=t.path;t.collectionGroup!==null?(n.parent=ic(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ic(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(h){if(h.length===0)return;const f=h.map(p=>function(g){if(g.op==="=="){if(Yh(g.value))return{unaryFilter:{field:bi(g.field),op:"IS_NAN"}};if(Jh(g.value))return{unaryFilter:{field:bi(g.field),op:"IS_NULL"}}}else if(g.op==="!="){if(Yh(g.value))return{unaryFilter:{field:bi(g.field),op:"IS_NOT_NAN"}};if(Jh(g.value))return{unaryFilter:{field:bi(g.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(g.field),op:g0(g.op),value:g.value}}}(p));return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(f=>function(p){return{field:bi(p.field),direction:m0(p.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const c=function(h,f){return h.C||Ki(f)?f:{value:f}}(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=dd(t.startAt)),t.endAt&&(n.structuredQuery.endAt=dd(t.endAt)),n}function f0(e){let t=a0(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){wt(s===1);const g=n.from[0];g.allDescendants?r=g.collectionId:t=t.child(g.collectionId)}let a=[];n.where&&(a=Wp(n.where));let c=[];n.orderBy&&(c=n.orderBy.map(g=>function(_){return new xs(ki(_.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g)));let h=null;n.limit&&(h=function(g){let _;return _=typeof g=="object"?g.value:g,Ki(_)?null:_}(n.limit));let f=null;n.startAt&&(f=fd(n.startAt));let p=null;return n.endAt&&(p=fd(n.endAt)),Nw(t,r,c,a,h,"F",f,p)}function p0(e,t){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Q()}}(0,t.purpose);return n==null?null:{"goog-listen-tags":n}}function Wp(e){return e?e.unaryFilter!==void 0?[v0(e)]:e.fieldFilter!==void 0?[_0(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(t=>Wp(t)).reduce((t,n)=>t.concat(n)):Q():[]}function dd(e){return{before:e.before,values:e.position}}function fd(e){const t=!!e.before,n=e.values||[];return new Yu(n,t)}function m0(e){return i0[e]}function g0(e){return s0[e]}function bi(e){return{fieldPath:e.canonicalString()}}function ki(e){return re.fromServerFormat(e.fieldPath)}function _0(e){return oe.create(ki(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(e.fieldFilter.op),e.fieldFilter.value)}function v0(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ki(e.unaryFilter.field);return oe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ki(e.unaryFilter.field);return oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ki(e.unaryFilter.field);return oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ki(e.unaryFilter.field);return oe.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}function y0(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Zp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}const w0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new O((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):O.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):O.reject(n)}static resolve(t){return new O((n,s)=>{n(t)})}static reject(t){return new O((n,s)=>{s(t)})}static waitFor(t){return new O((n,s)=>{let r=0,a=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&n()},f=>s(f))}),c=!0,a===r&&n()})}static or(t){let n=O.resolve(!1);for(const s of t)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(t,n){const s=[];return t.forEach((r,a)=>{s.push(n.call(this,r,a))}),this.waitFor(s)}}function dr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(t,n,s,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&qw(a,t,s[r])}}applyToLocalView(t){for(const n of this.baseMutations)n.key.isEqual(t.key)&&tc(n,t,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(t.key)&&tc(n,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(n=>{const s=t.get(n.key),r=s;this.applyToLocalView(r),s.isValidDocument()||r.convertToNoDocument(pt.min())})}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),bt())}isEqual(t){return this.batchId===t.batchId&&Bi(this.mutations,t.mutations,(n,s)=>id(n,s))&&Bi(this.baseMutations,t.baseMutations,(n,s)=>id(n,s))}}class Gc{constructor(t,n,s,r){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(t,n,s){wt(t.mutations.length===s.length);let r=Qw();const a=t.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,s[c].version);return new Gc(t,n,s,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n,s,r,a=pt.min(),c=pt.min(),h=qt.EMPTY_BYTE_STRING){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(t){return new qn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t){this.Gt=t}}function I0(e){const t=f0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Bw(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.zt=new k0}addToCollectionParentIndex(t,n){return this.zt.add(n),O.resolve()}getCollectionParents(t,n){return O.resolve(this.zt.getEntries(n))}}class k0{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n]||new Ht(Pt.comparator),a=!r.has(s);return this.index[n]=r.add(s),a}has(t){const n=t.lastSegment(),s=t.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Ht(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new zi(0)}static re(){return new zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fr(e){if(e.code!==A.FAILED_PRECONDITION||e.message!==w0)throw e;V("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,n]);r.push([t,n])}else this.inner[s]=[[t,n]]}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[n]:s.splice(r,1),!0;return!1}forEach(t){Gi(this.inner,(n,s)=>{for(const[r,a]of s)t(r,a)})}isEmpty(){return Sp(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.changes=new pr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}getReadTime(t){const n=this.changes.get(t);return n?n.readTime:pt.min()}addEntry(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})}removeEntry(t,n=null){this.assertNotApplied(),this.changes.set(t,{document:Jt.newInvalidDocument(t),readTime:n})}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s.document):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,n,s){this.Je=t,this.An=n,this.Jt=s}Rn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKey(t,n).next(s=>this.bn(t,n,s))}bn(t,n,s){return this.Je.getEntry(t,n).next(r=>{for(const a of s)a.applyToLocalView(r);return r})}Pn(t,n){t.forEach((s,r)=>{for(const a of n)a.applyToLocalView(r)})}vn(t,n){return this.Je.getEntries(t,n).next(s=>this.Vn(t,s).next(()=>s))}Vn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>this.Pn(n,s))}getDocumentsMatchingQuery(t,n,s){return function(r){return J.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.Sn(t,n.path):Dw(n)?this.Dn(t,n,s):this.Cn(t,n,s)}Sn(t,n){return this.Rn(t,new J(n)).next(s=>{let r=ec();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}Dn(t,n,s){const r=n.collectionGroup;let a=ec();return this.Jt.getCollectionParents(t,r).next(c=>O.forEach(c,h=>{const f=function(p,g){return new oa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,h.child(r));return this.Cn(t,f,s).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}Cn(t,n,s){let r,a;return this.Je.getDocumentsMatchingQuery(t,n,s).next(c=>(r=c,this.An.getAllMutationBatchesAffectingQuery(t,n))).next(c=>(a=c,this.Nn(t,a,r).next(h=>{r=h;for(const f of a)for(const p of f.mutations){const g=p.key;let _=r.get(g);_==null&&(_=Jt.newInvalidDocument(g),r=r.insert(g,_)),tc(p,_,f.localWriteTime),_.isFoundDocument()||(r=r.remove(g))}}))).next(()=>(r.forEach((c,h)=>{ua(n,h)||(r=r.remove(c))}),r))}Nn(t,n,s){let r=bt();for(const c of n)for(const h of c.mutations)h instanceof Xi&&s.get(h.key)===null&&(r=r.add(h.key));let a=s;return this.Je.getEntries(t,r).next(c=>(c.forEach((h,f)=>{f.isFoundDocument()&&(a=a.insert(h,f))}),a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t,n,s,r){this.targetId=t,this.fromCache=n,this.kn=s,this.xn=r}static $n(t,n){let s=bt(),r=bt();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Kc(t,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{On(t){this.Mn=t}getDocumentsMatchingQuery(t,n,s,r){return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}(n)||s.isEqual(pt.min())?this.Fn(t,n):this.Mn.vn(t,r).next(a=>{const c=this.Ln(n,a);return(co(n)||Oo(n))&&this.Bn(n.limitType,c,r,s)?this.Fn(t,n):(Zh()<=mt.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qu(n)),this.Mn.getDocumentsMatchingQuery(t,n,s).next(h=>(c.forEach(f=>{h=h.insert(f.key,f)}),h)))})}Ln(t,n){let s=new Ht(xp(t));return n.forEach((r,a)=>{ua(t,a)&&(s=s.add(a))}),s}Bn(t,n,s,r){if(s.size!==n.size)return!0;const a=t==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Fn(t,n){return Zh()<=mt.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Qu(n)),this.Mn.getDocumentsMatchingQuery(t,n,pt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,n,s,r){this.persistence=t,this.Un=n,this.k=r,this.qn=new Qt(vt),this.Kn=new pr(a=>qc(a),jc),this.jn=pt.min(),this.An=t.getMutationQueue(s),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Gp(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.qn))}}function L0(e,t,n,s){return new C0(e,t,n,s)}async function Kp(e,t){const n=tt(e);let s=n.An,r=n.Wn;const a=await n.persistence.runTransaction("Handle user change","readonly",c=>{let h;return n.An.getAllMutationBatches(c).next(f=>(h=f,s=n.persistence.getMutationQueue(t),r=new Gp(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(c))).next(f=>{const p=[],g=[];let _=bt();for(const w of h){p.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}for(const w of f){g.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}return r.vn(c,_).next(w=>({Gn:w,removedBatchIds:p,addedBatchIds:g}))})});return n.An=s,n.Wn=r,n.Un.On(n.Wn),a}function x0(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),a=n.Qn.newChangeBuffer({trackRemovals:!0});return function(c,h,f,p){const g=f.batch,_=g.keys();let w=O.resolve();return _.forEach(I=>{w=w.next(()=>p.getEntry(h,I)).next(E=>{const P=f.docVersions.get(I);wt(P!==null),E.version.compareTo(P)<0&&(g.applyToRemoteDocument(E,f),E.isValidDocument()&&p.addEntry(E,f.commitVersion))})}),w.next(()=>c.An.removeMutationBatch(h,g))}(n,s,t,a).next(()=>a.apply(s)).next(()=>n.An.performConsistencyCheck(s)).next(()=>n.Wn.vn(s,r))})}function Xp(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.He.getLastRemoteSnapshotVersion(n))}function R0(e,t){const n=tt(e),s=t.snapshotVersion;let r=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Qn.newChangeBuffer({trackRemovals:!0});r=n.qn;const h=[];t.targetChanges.forEach((p,g)=>{const _=r.get(g);if(!_)return;h.push(n.He.removeMatchingKeys(a,p.removedDocuments,g).next(()=>n.He.addMatchingKeys(a,p.addedDocuments,g)));let w=_.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.has(g)?w=w.withResumeToken(qt.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,s)),r=r.insert(g,w),function(I,E,P){return I.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,w,p)&&h.push(n.He.updateTargetData(a,w))});let f=Yn();if(t.documentUpdates.forEach((p,g)=>{t.resolvedLimboDocuments.has(p)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),h.push(N0(a,c,t.documentUpdates,s,void 0).next(p=>{f=p})),!s.isEqual(pt.min())){const p=n.He.getLastRemoteSnapshotVersion(a).next(g=>n.He.setTargetsMetadata(a,a.currentSequenceNumber,s));h.push(p)}return O.waitFor(h).next(()=>c.apply(a)).next(()=>n.Wn.Vn(a,f)).next(()=>f)}).then(a=>(n.qn=r,a))}function N0(e,t,n,s,r){let a=bt();return n.forEach(c=>a=a.add(c)),t.getEntries(e,a).next(c=>{let h=Yn();return n.forEach((f,p)=>{const g=c.get(f),_=(r==null?void 0:r.get(f))||s;p.isNoDocument()&&p.version.isEqual(pt.min())?(t.removeEntry(f,_),h=h.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p,_),h=h.insert(f,p)):V("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)}),h})}function M0(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.An.getNextMutationBatchAfterBatchId(s,t)))}function O0(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.He.getTargetData(s,t).next(a=>a?(r=a,O.resolve(r)):n.He.allocateTargetId(s).next(c=>(r=new qn(t,c,0,s.currentSequenceNumber),n.He.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.qn.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(s.targetId,s),n.Kn.set(t,s.targetId)),s})}async function rc(e,t,n){const s=tt(e),r=s.qn.get(t),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,c=>s.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!dr(c))throw c;V("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}s.qn=s.qn.remove(t),s.Kn.delete(r.target)}function pd(e,t,n){const s=tt(e);let r=pt.min(),a=bt();return s.persistence.runTransaction("Execute query","readonly",c=>function(h,f,p){const g=tt(h),_=g.Kn.get(p);return _!==void 0?O.resolve(g.qn.get(_)):g.He.getTargetData(f,p)}(s,c,Jn(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(c,h.targetId).next(f=>{a=f})}).next(()=>s.Un.getDocumentsMatchingQuery(c,t,n?r:pt.min(),n?a:bt())).next(h=>({documents:h,zn:a})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,n){return O.resolve(this.Xn.get(n))}saveBundleMetadata(t,n){var s;return this.Xn.set(n.id,{id:(s=n).id,version:s.version,createTime:tn(s.createTime)}),O.resolve()}getNamedQuery(t,n){return O.resolve(this.Zn.get(n))}saveNamedQuery(t,n){return this.Zn.set(n.name,function(s){return{name:s.name,query:I0(s.bundledQuery),readTime:tn(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.ts=new Ht(Bt.es),this.ns=new Ht(Bt.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,n){const s=new Bt(t,n);this.ts=this.ts.add(s),this.ns=this.ns.add(s)}rs(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.os(new Bt(t,n))}cs(t,n){t.forEach(s=>this.removeReference(s,n))}us(t){const n=new J(new Pt([])),s=new Bt(n,t),r=new Bt(n,t+1),a=[];return this.ns.forEachInRange([s,r],c=>{this.os(c),a.push(c.key)}),a}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const n=new J(new Pt([])),s=new Bt(n,t),r=new Bt(n,t+1);let a=bt();return this.ns.forEachInRange([s,r],c=>{a=a.add(c.key)}),a}containsKey(t){const n=new Bt(t,0),s=this.ts.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Bt{constructor(t,n){this.key=t,this.fs=n}static es(t,n){return J.comparator(t.key,n.key)||vt(t.fs,n.fs)}static ss(t,n){return vt(t.fs,n.fs)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,n){this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Ht(Bt.es)}checkEmpty(t){return O.resolve(this.An.length===0)}addMutationBatch(t,n,s,r){const a=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const c=new b0(a,n,s,r);this.An.push(c);for(const h of r)this.ws=this.ws.add(new Bt(h.key,a)),this.Jt.addToCollectionParentIndex(t,h.key.path.popLast());return O.resolve(c)}lookupMutationBatch(t,n){return O.resolve(this._s(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,r=this.gs(s),a=r<0?0:r;return O.resolve(this.An.length>a?this.An[a]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.An.length===0?-1:this.ds-1)}getAllMutationBatches(t){return O.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Bt(n,0),r=new Bt(n,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([s,r],c=>{const h=this._s(c.fs);a.push(h)}),O.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ht(vt);return n.forEach(r=>{const a=new Bt(r,0),c=new Bt(r,Number.POSITIVE_INFINITY);this.ws.forEachInRange([a,c],h=>{s=s.add(h.fs)})}),O.resolve(this.ys(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,r=s.length+1;let a=s;J.isDocumentKey(a)||(a=a.child(""));const c=new Bt(new J(a),0);let h=new Ht(vt);return this.ws.forEachWhile(f=>{const p=f.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(h=h.add(f.fs)),!0)},c),O.resolve(this.ys(h))}ys(t){const n=[];return t.forEach(s=>{const r=this._s(s);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){wt(this.ps(n.batchId,"removed")===0),this.An.shift();let s=this.ws;return O.forEach(n.mutations,r=>{const a=new Bt(r.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ws=s})}ee(t){}containsKey(t,n){const s=new Bt(n,0),r=this.ws.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.An.length,O.resolve()}ps(t,n){return this.gs(t)}gs(t){return this.An.length===0?0:t-this.An[0].batchId}_s(t){const n=this.gs(t);return n<0||n>=this.An.length?null:this.An[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t,n){this.Jt=t,this.Ts=n,this.docs=new Qt(J.comparator),this.size=0}addEntry(t,n,s){const r=n.key,a=this.docs.get(r),c=a?a.size:0,h=this.Ts(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h,readTime:s}),this.size+=h-c,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(t,n){let s=Yn();return n.forEach(r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():Jt.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(t,n,s){let r=Yn();const a=new J(n.path.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:f,readTime:p}}=c.getNext();if(!n.path.isPrefixOf(h.path))break;p.compareTo(s)<=0||ua(n,f)&&(r=r.insert(f.key,f.mutableCopy()))}return O.resolve(r)}Es(t,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new F0(this)}getSize(t){return O.resolve(this.size)}}class F0 extends P0{constructor(t){super(),this.De=t}applyChanges(t){const n=[];return this.changes.forEach((s,r)=>{r.document.isValidDocument()?n.push(this.De.addEntry(t,r.document,this.getReadTime(s))):this.De.removeEntry(s)}),O.waitFor(n)}getFromCache(t,n){return this.De.getEntry(t,n)}getAllFromCache(t,n){return this.De.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){this.persistence=t,this.Is=new pr(n=>qc(n),jc),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.As=0,this.Rs=new Xc,this.targetCount=0,this.bs=zi.ie()}forEachTarget(t,n){return this.Is.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(t){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return O.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.bs.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.As&&(this.As=n),O.resolve()}ae(t){this.Is.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.bs=new zi(n),this.highestTargetId=n),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,n){return this.ae(n),this.targetCount+=1,O.resolve()}updateTargetData(t,n){return this.ae(n),O.resolve()}removeTargetData(t,n){return this.Is.delete(n.target),this.Rs.us(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(t,n,s){let r=0;const a=[];return this.Is.forEach((c,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.Is.delete(c),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),O.waitFor(a).next(()=>r)}getTargetCount(t){return O.resolve(this.targetCount)}getTargetData(t,n){const s=this.Is.get(n)||null;return O.resolve(s)}addMatchingKeys(t,n,s){return this.Rs.rs(n,s),O.resolve()}removeMatchingKeys(t,n,s){this.Rs.cs(n,s);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(c=>{a.push(r.markPotentiallyOrphaned(t,c))}),O.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this.Rs.us(n),O.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Rs.ls(n);return O.resolve(s)}containsKey(t,n){return O.resolve(this.Rs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,n){this.Ps={},this.Be=new Vc(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new z0(this),this.Jt=new S0,this.Je=function(s,r){return new U0(s,r)}(this.Jt,s=>this.referenceDelegate.vs(s)),this.k=new E0(n),this.Ye=new D0(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let n=this.Ps[t.toKey()];return n||(n=new B0(this.Jt,this.referenceDelegate),this.Ps[t.toKey()]=n),n}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,n,s){V("MemoryPersistence","Starting transaction:",t);const r=new $0(this.Be.next());return this.referenceDelegate.Vs(),s(r).next(a=>this.referenceDelegate.Ss(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Ds(t,n){return O.or(Object.values(this.Ps).map(s=>()=>s.containsKey(t,n)))}}class $0 extends T0{constructor(t){super(),this.currentSequenceNumber=t}}class Jc{constructor(t){this.persistence=t,this.Cs=new Xc,this.Ns=null}static ks(t){return new Jc(t)}get xs(){if(this.Ns)return this.Ns;throw Q()}addReference(t,n,s){return this.Cs.addReference(s,n),this.xs.delete(s.toString()),O.resolve()}removeReference(t,n,s){return this.Cs.removeReference(s,n),this.xs.add(s.toString()),O.resolve()}markPotentiallyOrphaned(t,n){return this.xs.add(n.toString()),O.resolve()}removeTarget(t,n){this.Cs.us(n.targetId).forEach(r=>this.xs.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(a=>this.xs.add(a.toString()))}).next(()=>s.removeTargetData(t,n))}Vs(){this.Ns=new Set}Ss(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.xs,s=>{const r=J.fromPath(s);return this.$s(t,r).next(a=>{a||n.removeEntry(r)})}).next(()=>(this.Ns=null,n.apply(t)))}updateLimboDocument(t,n){return this.$s(t,n).next(s=>{s?this.xs.delete(n.toString()):this.xs.add(n.toString())})}vs(t){return 0}$s(t,n){return O.or([()=>O.resolve(this.Cs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ds(t,n)])}}class md{constructor(){this.activeTargetIds=zp()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ms(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class H0{constructor(){this.pi=new md,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t){return this.pi.Fs(t),this.Ti[t]||"not-current"}updateQueryState(t,n,s){this.Ti[t]=n}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new md,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{Ei(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(t){this.Pi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Pi)t(0)}bi(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Pi)t(1)}static Pt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Oi(t){this.ki(t)}Mi(t){this.xi(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,n,s,r,a){const c=this.Ui(t,n);V("RestConnection","Sending: ",c,s);const h={};return this.qi(h,r,a),this.Ki(t,c,h,s).then(f=>(V("RestConnection","Received: ",f),f),f=>{throw Gh("RestConnection",`${t} failed with error: `,f,"url: ",c,"request:",s),f})}ji(t,n,s,r,a){return this.Bi(t,n,s,r,a)}qi(t,n,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Zi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,a)=>t[a]=r),s&&s.headers.forEach((r,a)=>t[a]=r)}Ui(t,n){const s=j0[t];return`${this.Fi}/v1/${n}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,n,s,r){return new Promise((a,c)=>{const h=new lw;h.listenOnce(aw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vu.NO_ERROR:const p=h.getResponseJson();V("Connection","XHR received:",JSON.stringify(p)),a(p);break;case vu.TIMEOUT:V("Connection",'RPC "'+t+'" timed out'),c(new Z(A.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const g=h.getStatus();if(V("Connection",'RPC "'+t+'" failed with status:',g,"response text:",h.getResponseText()),g>0){const _=h.getResponseJson().error;if(_&&_.status&&_.message){const w=function(I){const E=I.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(E)>=0?E:A.UNKNOWN}(_.status);c(new Z(w,_.message))}else c(new Z(A.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Z(A.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{V("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(r);h.send(n,"POST",f,s,15)})}Qi(t,n,s){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=rw(),c=ow(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new cw({})),this.qi(h.initMessageHeaders,n,s),vf()||wf()||cv()||Tf()||lv()||yf()||(h.httpHeadersOverwriteParam="$httpHeaders");const f=r.join("");V("Connection","Creating WebChannel: "+f,h);const p=a.createWebChannel(f,h);let g=!1,_=!1;const w=new W0({Vi:E=>{_?V("Connection","Not sending because WebChannel is closed:",E):(g||(V("Connection","Opening WebChannel transport."),p.open(),g=!0),V("Connection","WebChannel sending:",E),p.send(E))},Si:()=>p.close()}),I=(E,P,H)=>{E.listen(P,W=>{try{H(W)}catch(j){setTimeout(()=>{throw j},0)}})};return I(p,no.EventType.OPEN,()=>{_||V("Connection","WebChannel transport opened.")}),I(p,no.EventType.CLOSE,()=>{_||(_=!0,V("Connection","WebChannel transport closed"),w.Oi())}),I(p,no.EventType.ERROR,E=>{_||(_=!0,Gh("Connection","WebChannel transport errored:",E),w.Oi(new Z(A.UNAVAILABLE,"The operation could not be completed")))}),I(p,no.EventType.MESSAGE,E=>{var P;if(!_){const H=E.data[0];wt(!!H);const W=H,j=W.error||((P=W[0])===null||P===void 0?void 0:P.error);if(j){V("Connection","WebChannel received error:",j);const $=j.status;let et=function(F){const B=Nt[F];if(B!==void 0)return Fp(B)}($),ct=j.message;et===void 0&&(et=A.INTERNAL,ct="Unknown error status: "+$+" with message "+j.message),_=!0,w.Oi(new Z(et,ct)),p.close()}else V("Connection","WebChannel received:",H),w.Mi(H)}}),I(c,uw.STAT_EVENT,E=>{E.stat===jh.PROXY?V("Connection","Detected buffering proxy"):E.stat===jh.NOPROXY&&V("Connection","Detected no buffering proxy")}),setTimeout(()=>{w.$i()},0),w}}function wu(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(e){return new r0(e,!0)}class Jp{constructor(t,n,s=1e3,r=1.5,a=6e4){this.Me=t,this.timerId=n,this.Wi=s,this.Gi=r,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const n=Math.floor(this.Hi+this.tr()),s=Math.max(0,Date.now()-this.Yi),r=Math.max(0,n-s);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){this.Ji!==null&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){this.Ji!==null&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,n,s,r,a,c,h,f){this.Me=t,this.nr=s,this.sr=r,this.ir=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Jp(t,n)}hr(){return this.state===1||this.state===5||this.lr()}lr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&this.cr===null&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(t,n){this.yr(),this.pr(),this.ur.cancel(),this.rr++,t!==4?this.ur.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(bn(n.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(n)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.rr===n&&this.Ir(s,r)},s=>{t(()=>{const r=new Z(A.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ar(r)})})}Ir(t,n){const s=this.Er(this.rr);this.stream=this.Rr(t,n),this.stream.Di(()=>{s(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(r=>{s(()=>this.Ar(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(t){return V("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return n=>{this.Me.enqueueAndForget(()=>this.rr===t?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G0 extends Yp{constructor(t,n,s,r,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,c),this.k=a}Rr(t,n){return this.ir.Qi("Listen",t,n)}onMessage(t){this.ur.reset();const n=u0(this.k,t),s=function(r){if(!("targetChange"in r))return pt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?pt.min():a.readTime?tn(a.readTime):pt.min()}(t);return this.listener.br(n,s)}Pr(t){const n={};n.database=sc(this.k),n.addTarget=function(r,a){let c;const h=a.target;return c=Ju(h)?{documents:h0(r,h)}:{query:d0(r,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=Hp(r,a.resumeToken):a.snapshotVersion.compareTo(pt.min())>0&&(c.readTime=Uo(r,a.snapshotVersion.toTimestamp())),c}(this.k,t);const s=p0(this.k,t);s&&(n.labels=s),this.gr(n)}vr(t){const n={};n.database=sc(this.k),n.removeTarget=t,this.gr(n)}}class K0 extends Yp{constructor(t,n,s,r,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,c),this.k=a,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,n){return this.ir.Qi("Write",t,n)}onMessage(t){if(wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const n=l0(t.writeResults,t.commitTime),s=tn(t.commitTime);return this.listener.Cr(s,n)}return wt(!t.writeResults||t.writeResults.length===0),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=sc(this.k),this.gr(t)}Dr(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>c0(this.k,s))};this.gr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends class{}{constructor(t,n,s,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.ir=s,this.k=r,this.$r=!1}Or(){if(this.$r)throw new Z(A.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,n,s){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.ir.Bi(t,n,s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(A.UNKNOWN,r.toString())})}ji(t,n,s){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.ir.ji(t,n,s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(A.UNKNOWN,r.toString())})}terminate(){this.$r=!0}}class J0{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){this.Mr===0&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){this.state==="Online"?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Mr=0,t==="Online"&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(bn(n),this.Lr=!1):V("OnlineStateTracker",n)}jr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,n,s,r,a){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei(c=>{s.enqueueAndForget(async()=>{si(this)&&(V("RemoteStore","Restarting streams for network reachability change."),await async function(h){const f=tt(h);f.Gr.add(4),await mr(f),f.Jr.set("Unknown"),f.Gr.delete(4),await pa(f)}(this))})}),this.Jr=new J0(s,r)}}async function pa(e){if(si(e))for(const t of e.zr)await t(!0)}async function mr(e){for(const t of e.zr)await t(!1)}function Qp(e,t){const n=tt(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),tl(n)?Qc(n):Ji(n).lr()&&Yc(n,t))}function tm(e,t){const n=tt(e),s=Ji(n);n.Wr.delete(t),s.lr()&&em(n,t),n.Wr.size===0&&(s.lr()?s._r():si(n)&&n.Jr.set("Unknown"))}function Yc(e,t){e.Yr.X(t.targetId),Ji(e).Pr(t)}function em(e,t){e.Yr.X(t),Ji(e).vr(t)}function Qc(e){e.Yr=new n0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),Ji(e).start(),e.Jr.Br()}function tl(e){return si(e)&&!Ji(e).hr()&&e.Wr.size>0}function si(e){return tt(e).Gr.size===0}function nm(e){e.Yr=void 0}async function Q0(e){e.Wr.forEach((t,n)=>{Yc(e,t)})}async function tT(e,t){nm(e),tl(e)?(e.Jr.Kr(t),Qc(e)):e.Jr.set("Unknown")}async function eT(e,t,n){if(e.Jr.set("Online"),t instanceof $p&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const c of r.targetIds)s.Wr.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Wr.delete(c),s.Yr.removeTarget(c))}(e,t)}catch(s){V("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Fo(e,s)}else if(t instanceof ho?e.Yr.ot(t):t instanceof Vp?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(pt.min()))try{const s=await Xp(e.localStore);n.compareTo(s)>=0&&await function(r,a){const c=r.Yr.gt(a);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=r.Wr.get(f);p&&r.Wr.set(f,p.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const f=r.Wr.get(h);if(!f)return;r.Wr.set(h,f.withResumeToken(qt.EMPTY_BYTE_STRING,f.snapshotVersion)),em(r,h);const p=new qn(f.target,h,1,f.sequenceNumber);Yc(r,p)}),r.remoteSyncer.applyRemoteEvent(c)}(e,n)}catch(s){V("RemoteStore","Failed to raise snapshot:",s),await Fo(e,s)}}async function Fo(e,t,n){if(!dr(t))throw t;e.Gr.add(1),await mr(e),e.Jr.set("Offline"),n||(n=()=>Xp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{V("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await pa(e)})}function im(e,t){return t().catch(n=>Fo(e,n,t))}async function ma(e){const t=tt(e),n=In(t);let s=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;nT(t);)try{const r=await M0(t.localStore,s);if(r===null){t.Qr.length===0&&n._r();break}s=r.batchId,iT(t,r)}catch(r){await Fo(t,r)}sm(t)&&rm(t)}function nT(e){return si(e)&&e.Qr.length<10}function iT(e,t){e.Qr.push(t);const n=In(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function sm(e){return si(e)&&!In(e).hr()&&e.Qr.length>0}function rm(e){In(e).start()}async function sT(e){In(e).kr()}async function rT(e){const t=In(e);for(const n of e.Qr)t.Dr(n.mutations)}async function oT(e,t,n){const s=e.Qr.shift(),r=Gc.from(s,t,n);await im(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await ma(e)}async function aT(e,t){t&&In(e).Sr&&await async function(n,s){if(r=s.code,Kw(r)&&r!==A.ABORTED){const a=n.Qr.shift();In(n).wr(),await im(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await ma(n)}var r}(e,t),sm(e)&&rm(e)}async function _d(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");const s=si(n);n.Gr.add(3),await mr(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await pa(n)}async function uT(e,t){const n=tt(e);t?(n.Gr.delete(2),await pa(n)):t||(n.Gr.add(2),await mr(n),n.Jr.set("Unknown"))}function Ji(e){return e.Xr||(e.Xr=function(t,n,s){const r=tt(t);return r.Or(),new G0(n,r.ir,r.authCredentials,r.appCheckCredentials,r.k,s)}(e.datastore,e.asyncQueue,{Di:Q0.bind(null,e),Ni:tT.bind(null,e),br:eT.bind(null,e)}),e.zr.push(async t=>{t?(e.Xr.wr(),tl(e)?Qc(e):e.Jr.set("Unknown")):(await e.Xr.stop(),nm(e))})),e.Xr}function In(e){return e.Zr||(e.Zr=function(t,n,s){const r=tt(t);return r.Or(),new K0(n,r.ir,r.authCredentials,r.appCheckCredentials,r.k,s)}(e.datastore,e.asyncQueue,{Di:sT.bind(null,e),Ni:aT.bind(null,e),Nr:rT.bind(null,e),Cr:oT.bind(null,e)}),e.zr.push(async t=>{t?(e.Zr.wr(),await ma(e)):(await e.Zr.stop(),e.Qr.length>0&&(V("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))})),e.Zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n,s,r,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,n,s,r,a){const c=Date.now()+s,h=new el(t,n,c,r,a);return h.start(s),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nl(e,t){if(bn("AsyncQueue",`${t}: ${e}`),dr(e))return new Z(A.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.comparator=t?(n,s)=>t(n,s)||J.comparator(n.key,s.key):(n,s)=>J.comparator(n.key,s.key),this.keyedMap=ec(),this.sortedSet=new Qt(this.comparator)}static emptySet(t){return new Li(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Li)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Li;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.eo=new Qt(J.comparator)}track(t){const n=t.doc.key,s=this.eo.get(n);s?t.type!==0&&s.type===3?this.eo=this.eo.insert(n,t):t.type===3&&s.type!==1?this.eo=this.eo.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.eo=this.eo.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.eo=this.eo.remove(n):t.type===1&&s.type===2?this.eo=this.eo.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):Q():this.eo=this.eo.insert(n,t)}no(){const t=[];return this.eo.inorderTraversal((n,s)=>{t.push(s)}),t}}class Vi{constructor(t,n,s,r,a,c,h,f){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f}static fromInitialDocuments(t,n,s,r){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Vi(t,n,Li.emptySet(n),a,s,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&aa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.so=void 0,this.listeners=[]}}class lT{constructor(){this.queries=new pr(t=>Lp(t),aa),this.onlineState="Unknown",this.io=new Set}}async function om(e,t){const n=tt(e),s=t.query;let r=!1,a=n.queries.get(s);if(a||(r=!0,a=new cT),r)try{a.so=await n.onListen(s)}catch(c){const h=nl(c,`Initialization of query '${Qu(t.query)}' failed`);return void t.onError(h)}n.queries.set(s,a),a.listeners.push(t),t.ro(n.onlineState),a.so&&t.oo(a.so)&&il(n)}async function am(e,t){const n=tt(e),s=t.query;let r=!1;const a=n.queries.get(s);if(a){const c=a.listeners.indexOf(t);c>=0&&(a.listeners.splice(c,1),r=a.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function hT(e,t){const n=tt(e);let s=!1;for(const r of t){const a=r.query,c=n.queries.get(a);if(c){for(const h of c.listeners)h.oo(r)&&(s=!0);c.so=r}}s&&il(n)}function dT(e,t,n){const s=tt(e),r=s.queries.get(t);if(r)for(const a of r.listeners)a.onError(n);s.queries.delete(t)}function il(e){e.io.forEach(t=>{t.next()})}class um{constructor(t,n,s){this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=s||{}}oo(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new Vi(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let n=!1;return this.ao?this.ho(t)&&(this.co.next(t),n=!0):this.lo(t,this.onlineState)&&(this.fo(t),n=!0),this.uo=t,n}onError(t){this.co.error(t)}ro(t){this.onlineState=t;let n=!1;return this.uo&&!this.ao&&this.lo(this.uo,t)&&(this.fo(this.uo),n=!0),n}lo(t,n){if(!t.fromCache)return!0;const s=n!=="Offline";return(!this.options.wo||!s)&&(!t.docs.isEmpty()||n==="Offline")}ho(t){if(t.docChanges.length>0)return!0;const n=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}fo(t){t=Vi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.ao=!0,this.co.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t){this.key=t}}class lm{constructor(t){this.key=t}}class fT{constructor(t,n){this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=bt(),this.mutatedKeys=bt(),this.Ao=xp(t),this.Ro=new Li(this.Ao)}get bo(){return this.To}Po(t,n){const s=n?n.vo:new vd,r=n?n.Ro:this.Ro;let a=n?n.mutatedKeys:this.mutatedKeys,c=r,h=!1;const f=co(this.query)&&r.size===this.query.limit?r.last():null,p=Oo(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((g,_)=>{const w=r.get(g),I=ua(this.query,_)?_:null,E=!!w&&this.mutatedKeys.has(w.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let H=!1;w&&I?w.data.isEqual(I.data)?E!==P&&(s.track({type:3,doc:I}),H=!0):this.Vo(w,I)||(s.track({type:2,doc:I}),H=!0,(f&&this.Ao(I,f)>0||p&&this.Ao(I,p)<0)&&(h=!0)):!w&&I?(s.track({type:0,doc:I}),H=!0):w&&!I&&(s.track({type:1,doc:w}),H=!0,(f||p)&&(h=!0)),H&&(I?(c=c.add(I),a=P?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),co(this.query)||Oo(this.query))for(;c.size>this.query.limit;){const g=co(this.query)?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),s.track({type:1,doc:g})}return{Ro:c,vo:s,Bn:h,mutatedKeys:a}}Vo(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s){const r=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const a=t.vo.no();a.sort((p,g)=>function(_,w){const I=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return I(_)-I(w)}(p.type,g.type)||this.Ao(p.doc,g.doc)),this.So(s);const c=n?this.Do():[],h=this.Io.size===0&&this.current?1:0,f=h!==this.Eo;return this.Eo=h,a.length!==0||f?{snapshot:new Vi(this.query,t.Ro,r,a,t.mutatedKeys,h===0,f,!1),Co:c}:{Co:c}}ro(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new vd,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(n=>this.To=this.To.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.To=this.To.delete(n)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=bt(),this.Ro.forEach(s=>{this.No(s.key)&&(this.Io=this.Io.add(s.key))});const n=[];return t.forEach(s=>{this.Io.has(s)||n.push(new lm(s))}),this.Io.forEach(s=>{t.has(s)||n.push(new cm(s))}),n}ko(t){this.To=t.zn,this.Io=bt();const n=this.Po(t.documents);return this.applyChanges(n,!0)}xo(){return Vi.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,this.Eo===0)}}class pT{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class mT{constructor(t){this.key=t,this.$o=!1}}class gT{constructor(t,n,s,r,a,c){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Oo={},this.Mo=new pr(h=>Lp(h),aa),this.Fo=new Map,this.Lo=new Set,this.Bo=new Qt(J.comparator),this.Uo=new Map,this.qo=new Xc,this.Ko={},this.jo=new Map,this.Qo=zi.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return this.Wo===!0}}async function _T(e,t){const n=PT(e);let s,r;const a=n.Mo.get(t);if(a)s=a.targetId,n.sharedClientState.addLocalQueryTarget(s),r=a.view.xo();else{const c=await O0(n.localStore,Jn(t)),h=n.sharedClientState.addLocalQueryTarget(c.targetId);s=c.targetId,r=await vT(n,t,s,h==="current"),n.isPrimaryClient&&Qp(n.remoteStore,c)}return r}async function vT(e,t,n,s){e.Go=(g,_,w)=>async function(I,E,P,H){let W=E.view.Po(P);W.Bn&&(W=await pd(I.localStore,E.query,!1).then(({documents:et})=>E.view.Po(et,W)));const j=H&&H.targetChanges.get(E.targetId),$=E.view.applyChanges(W,I.isPrimaryClient,j);return wd(I,E.targetId,$.Co),$.snapshot}(e,g,_,w);const r=await pd(e.localStore,t,!0),a=new fT(t,r.zn),c=a.Po(r.documents),h=hr.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline"),f=a.applyChanges(c,e.isPrimaryClient,h);wd(e,n,f.Co);const p=new pT(t,n,a);return e.Mo.set(t,p),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),f.snapshot}async function yT(e,t){const n=tt(e),s=n.Mo.get(t),r=n.Fo.get(s.targetId);if(r.length>1)return n.Fo.set(s.targetId,r.filter(a=>!aa(a,t))),void n.Mo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await rc(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),tm(n.remoteStore,s.targetId),oc(n,s.targetId)}).catch(fr)):(oc(n,s.targetId),await rc(n.localStore,s.targetId,!0))}async function wT(e,t,n){const s=AT(e);try{const r=await function(a,c){const h=tt(a),f=de.now(),p=c.reduce((_,w)=>_.add(w.key),bt());let g;return h.persistence.runTransaction("Locally write mutations","readwrite",_=>h.Wn.vn(_,p).next(w=>{g=w;const I=[];for(const E of c){const P=jw(E,g.get(E.key));P!=null&&I.push(new Xi(E.key,P,Ap(P.value.mapValue),Ci.exists(!0)))}return h.An.addMutationBatch(_,f,I,c)})).then(_=>(_.applyToLocalDocumentSet(g),{batchId:_.batchId,changes:g}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(a,c,h){let f=a.Ko[a.currentUser.toKey()];f||(f=new Qt(vt)),f=f.insert(c,h),a.Ko[a.currentUser.toKey()]=f}(s,r.batchId,n),await gr(s,r.changes),await ma(s.remoteStore)}catch(r){const a=nl(r,"Failed to persist write");n.reject(a)}}async function hm(e,t){const n=tt(e);try{const s=await R0(n.localStore,t);t.targetChanges.forEach((r,a)=>{const c=n.Uo.get(a);c&&(wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.$o=!0:r.modifiedDocuments.size>0?wt(c.$o):r.removedDocuments.size>0&&(wt(c.$o),c.$o=!1))}),await gr(n,s,t)}catch(s){await fr(s)}}function yd(e,t,n){const s=tt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Mo.forEach((a,c)=>{const h=c.view.ro(t);h.snapshot&&r.push(h.snapshot)}),function(a,c){const h=tt(a);h.onlineState=c;let f=!1;h.queries.forEach((p,g)=>{for(const _ of g.listeners)_.ro(c)&&(f=!0)}),f&&il(h)}(s.eventManager,t),r.length&&s.Oo.br(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function TT(e,t,n){const s=tt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const r=s.Uo.get(t),a=r&&r.key;if(a){let c=new Qt(J.comparator);c=c.insert(a,Jt.newNoDocument(a,pt.min()));const h=bt().add(a),f=new da(pt.min(),new Map,new Ht(vt),c,h);await hm(s,f),s.Bo=s.Bo.remove(a),s.Uo.delete(t),sl(s)}else await rc(s.localStore,t,!1).then(()=>oc(s,t,n)).catch(fr)}async function bT(e,t){const n=tt(e),s=t.batch.batchId;try{const r=await x0(n.localStore,t);fm(n,s,null),dm(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await gr(n,r)}catch(r){await fr(r)}}async function ET(e,t,n){const s=tt(e);try{const r=await function(a,c){const h=tt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return h.An.lookupMutationBatch(f,c).next(g=>(wt(g!==null),p=g.keys(),h.An.removeMutationBatch(f,g))).next(()=>h.An.performConsistencyCheck(f)).next(()=>h.Wn.vn(f,p))})}(s.localStore,t);fm(s,t,n),dm(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await gr(s,r)}catch(r){await fr(r)}}function dm(e,t){(e.jo.get(t)||[]).forEach(n=>{n.resolve()}),e.jo.delete(t)}function fm(e,t,n){const s=tt(e);let r=s.Ko[s.currentUser.toKey()];if(r){const a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),s.Ko[s.currentUser.toKey()]=r}}function oc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Fo.get(t))e.Mo.delete(s),n&&e.Oo.zo(s,n);e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(s=>{e.qo.containsKey(s)||pm(e,s)})}function pm(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);n!==null&&(tm(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),sl(e))}function wd(e,t,n){for(const s of n)s instanceof cm?(e.qo.addReference(s.key,t),IT(e,s)):s instanceof lm?(V("SyncEngine","Document no longer in limbo: "+s.key),e.qo.removeReference(s.key,t),e.qo.containsKey(s.key)||pm(e,s.key)):Q()}function IT(e,t){const n=t.key,s=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(s)||(V("SyncEngine","New document in limbo: "+n),e.Lo.add(s),sl(e))}function sl(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new J(Pt.fromString(t)),s=e.Qo.next();e.Uo.set(s,new mT(n)),e.Bo=e.Bo.insert(n,s),Qp(e.remoteStore,new qn(Jn(Wc(n.path)),s,2,Vc.I))}}async function gr(e,t,n){const s=tt(e),r=[],a=[],c=[];s.Mo.isEmpty()||(s.Mo.forEach((h,f)=>{c.push(s.Go(f,t,n).then(p=>{if(p){s.isPrimaryClient&&s.sharedClientState.updateQueryState(f.targetId,p.fromCache?"not-current":"current"),r.push(p);const g=Kc.$n(f.targetId,p);a.push(g)}}))}),await Promise.all(c),s.Oo.br(r),await async function(h,f){const p=tt(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(f,_=>O.forEach(_.kn,w=>p.persistence.referenceDelegate.addReference(g,_.targetId,w)).next(()=>O.forEach(_.xn,w=>p.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))}catch(g){if(!dr(g))throw g;V("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const w=p.qn.get(_),I=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(I);p.qn=p.qn.insert(_,E)}}}(s.localStore,a))}async function ST(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){V("SyncEngine","User change. New user:",t.toKey());const s=await Kp(n.localStore,t);n.currentUser=t,function(r,a){r.jo.forEach(c=>{c.forEach(h=>{h.reject(new Z(A.CANCELLED,a))})}),r.jo.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await gr(n,s.Gn)}}function kT(e,t){const n=tt(e),s=n.Uo.get(t);if(s&&s.$o)return bt().add(s.key);{let r=bt();const a=n.Fo.get(t);if(!a)return r;for(const c of a){const h=n.Mo.get(c);r=r.unionWith(h.view.bo)}return r}}function PT(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TT.bind(null,t),t.Oo.br=hT.bind(null,t.eventManager),t.Oo.zo=dT.bind(null,t.eventManager),t}function AT(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ET.bind(null,t),t}class CT{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=fa(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return L0(this.persistence,new A0,t.initialUser,this.k)}Yo(t){return new V0(Jc.ks,this.k)}Jo(t){return new H0}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class LT{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yd(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ST.bind(null,this.syncEngine),await uT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new lT}createDatastore(t){const n=fa(t.databaseInfo.databaseId),s=(r=t.databaseInfo,new Z0(r));var r;return function(a,c,h,f){return new X0(a,c,h,f)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return n=this.localStore,s=this.datastore,r=t.asyncQueue,a=h=>yd(this.syncEngine,h,0),c=gd.Pt()?new gd:new q0,new Y0(n,s,r,a,c);var n,s,r,a,c}createSyncEngine(t,n){return function(s,r,a,c,h,f,p){const g=new gT(s,r,a,c,h,f);return p&&(g.Wo=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(t){const n=tt(t);V("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),await mr(n),n.Hr.shutdown(),n.Jr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ec(this.observer.next,t)}error(t){this.observer.error?this.ec(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}nc(){this.muted=!0}ec(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t,n,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=se.UNAUTHENTICATED,this.clientId=Ip.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async a=>{V("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(V("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=nl(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function RT(e,t){e.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Kp(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function NT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await MT(e);V("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener(r=>_d(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>_d(t.remoteStore,a)),e.onlineComponents=t}async function MT(e){return e.offlineComponents||(V("FirestoreClient","Using default OfflineComponentProvider"),await RT(e,new CT)),e.offlineComponents}async function gm(e){return e.onlineComponents||(V("FirestoreClient","Using default OnlineComponentProvider"),await NT(e,new LT)),e.onlineComponents}function OT(e){return gm(e).then(t=>t.syncEngine)}async function _m(e){const t=await gm(e),n=t.eventManager;return n.onListen=_T.bind(null,t.syncEngine),n.onUnlisten=yT.bind(null,t.syncEngine),n}function DT(e,t,n={}){const s=new Qe;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,h,f){const p=new mm({next:_=>{a.enqueueAndForget(()=>am(r,g));const w=_.docs.has(c);!w&&_.fromCache?f.reject(new Z(A.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&h&&h.source==="server"?f.reject(new Z(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new um(Wc(c.path),p,{includeMetadataChanges:!0,wo:!0});return om(r,g)}(await _m(e),e.asyncQueue,t,n,s)),s.promise}function BT(e,t,n={}){const s=new Qe;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,h,f){const p=new mm({next:_=>{a.enqueueAndForget(()=>am(r,g)),_.fromCache&&h.source==="server"?f.reject(new Z(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new um(c,p,{includeMetadataChanges:!0,wo:!0});return om(r,g)}(await _m(e),e.asyncQueue,t,n,s)),s.promise}class UT{constructor(t,n,s,r,a,c,h,f){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=f}}class Gs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Gs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(e,t,n){if(!n)throw new Z(A.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function FT(e,t,n,s){if(t===!0&&s===!0)throw new Z(A.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bd(e){if(!J.isDocumentKey(e))throw new Z(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ed(e){if(J.isDocumentKey(e))throw new Z(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function rl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q()}function $i(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rl(e);throw new Z(A.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Z(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,FT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,n,s){this._authCredentials=n,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Id({}),this._settingsFrozen=!1,t instanceof Gs?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Z(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(r.options.projectId)}(t))}get app(){if(!this._app)throw new Z(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Z(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Id(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new dw;switch(n.type){case"gapi":const s=n.client;return wt(!(typeof s!="object"||s===null||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new mw(s,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Z(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=Td.get(t);n&&(V("ComponentProvider","Removing Datastore"),Td.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fe(this.firestore,t,this._key)}}class ga{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ga(this.firestore,t,this._query)}}class Tn extends ga{constructor(t,n,s){super(t,n,Wc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fe(this.firestore,null,new J(t))}withConverter(t){return new Tn(this.firestore,t,this._path)}}function K1(e,t,...n){if(e=Ue(e),vm("collection","path",t),e instanceof ol){const s=Pt.fromString(t,...n);return Ed(s),new Tn(e,null,s)}{if(!(e instanceof fe||e instanceof Tn))throw new Z(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Pt.fromString(t,...n));return Ed(s),new Tn(e.firestore,null,s)}}function X1(e,t,...n){if(e=Ue(e),arguments.length===1&&(t=Ip.A()),vm("doc","path",t),e instanceof ol){const s=Pt.fromString(t,...n);return bd(s),new fe(e,null,new J(s))}{if(!(e instanceof fe||e instanceof Tn))throw new Z(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Pt.fromString(t,...n));return bd(s),new fe(e.firestore,e instanceof Tn?e.converter:null,new J(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Jp(this,"async_queue_retry"),this.bc=()=>{const n=wu();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ur.er()};const t=wu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pc(),this.vc(t)}enterRestrictedMode(t){if(!this.yc){this.yc=!0,this.Ac=t||!1;const n=wu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bc)}}enqueue(t){if(this.Pc(),this.yc)return new Promise(()=>{});const n=new Qe;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.gc.push(t),this.Vc()))}async Vc(){if(this.gc.length!==0){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(t){if(!dr(t))throw t;V("AsyncQueue","Operation failed with retryable error: "+t)}this.gc.length>0&&this.ur.Zi(()=>this.Vc())}}vc(t){const n=this.mc.then(()=>(this.Ic=!0,t().catch(s=>{this.Ec=s,this.Ic=!1;const r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(s);throw bn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Ic=!1,s))));return this.mc=n,n}enqueueAfterDelay(t,n,s){this.Pc(),this.Rc.indexOf(t)>-1&&(n=0);const r=el.createAndSchedule(this,t,n,s,a=>this.Sc(a));return this.Tc.push(r),r}Pc(){this.Ec&&Q()}verifyOperationInProgress(){}async Dc(){let t;do t=this.mc,await t;while(t!==this.mc)}Cc(t){for(const n of this.Tc)if(n.timerId===t)return!0;return!1}Nc(t){return this.Dc().then(()=>{this.Tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Dc()})}kc(t){this.Rc.push(t)}Sc(t){const n=this.Tc.indexOf(t);this.Tc.splice(n,1)}}class _a extends ol{constructor(t,n,s){super(t,n,s),this.type="firestore",this._queue=new zT,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}function J1(e=Ef()){return mc(e,"firestore").getImmediate()}function al(e){return e._firestoreClient||ym(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ym(e){var t;const n=e._freezeSettings(),s=function(r,a,c,h){return new UT(r,a,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new xT(e._authCredentials,e._appCheckCredentials,e._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hi(qt.fromBase64String(t))}catch(n){throw new Z(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Hi(qt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vt(this._lat,t._lat)||vt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=/^__.*__$/;class $T{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Xi(t,this.data,this.fieldMask,n,this.fieldTransforms):new ha(t,this.data,n,this.fieldTransforms)}}function Tm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class ll{constructor(t,n,s,r,a,c){this.settings=t,this.databaseId=n,this.k=s,this.ignoreUndefinedProperties=r,a===void 0&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(t){return new ll(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Oc({path:s,Fc:!1});return r.Lc(t),r}Bc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Oc({path:s,Fc:!1});return r.xc(),r}Uc(t){return this.Oc({path:void 0,Fc:!0})}qc(t){return zo(t,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lc(this.path.get(t))}Lc(t){if(t.length===0)throw this.qc("Document fields must not be empty");if(Tm(this.$c)&&VT.test(t))throw this.qc('Document fields cannot begin and end with "__"')}}class HT{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=s||fa(t)}Qc(t,n,s,r=!1){return new ll({$c:t,methodName:n,jc:s,path:re.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function qT(e){const t=e._freezeSettings(),n=fa(e._databaseId);return new HT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jT(e,t,n,s,r,a={}){const c=e.Qc(a.merge||a.mergeFields?2:0,t,n,r);Sm("Data must be an object, but it was:",c,s);const h=Em(s,c);let f,p;if(a.merge)f=new Gu(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const _ of a.mergeFields){const w=WT(t,_,n);if(!c.contains(w))throw new Z(A.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);GT(g,w)||g.push(w)}f=new Gu(g),p=c.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=c.fieldTransforms;return new $T(new Pe(h),f,p)}function bm(e,t){if(Im(e=Ue(e)))return Sm("Unsupported field value:",t,e),Em(e,t);if(e instanceof wm)return function(n,s){if(!Tm(s.$c))throw s.qc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.$c!==4)throw t.qc("Nested arrays are not supported");return function(n,s){const r=[];let a=0;for(const c of n){let h=bm(c,s.Uc(a));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),a++}return{arrayValue:{values:r}}}(e,t)}return function(n,s){if((n=Ue(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Fw(s.k,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=de.fromDate(n);return{timestampValue:Uo(s.k,r)}}if(n instanceof de){const r=new de(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Uo(s.k,r)}}if(n instanceof cl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hi)return{bytesValue:Hp(s.k,n._byteString)};if(n instanceof fe){const r=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(r))throw s.qc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Zc(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.qc(`Unsupported field value: ${rl(n)}`)}(e,t)}function Em(e,t){const n={};return Sp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gi(e,(s,r)=>{const a=bm(r,t.Mc(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function Im(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof de||e instanceof cl||e instanceof Hi||e instanceof fe||e instanceof wm)}function Sm(e,t,n){if(!Im(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=rl(n);throw s==="an object"?t.qc(e+" a custom object"):t.qc(e+" "+s)}}function WT(e,t,n){if((t=Ue(t))instanceof ul)return t._internalPath;if(typeof t=="string")return km(e,t);throw zo("Field path arguments must be of type string or ",e,!1,void 0,n)}const ZT=new RegExp("[~\\*/\\[\\]]");function km(e,t,n){if(t.search(ZT)>=0)throw zo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ul(...t.split("."))._internalPath}catch{throw zo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zo(e,t,n,s,r){const a=s&&!s.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${s}`),c&&(f+=` in document ${r}`),f+=")"),new Z(A.INVALID_ARGUMENT,h+e+f)}function GT(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,n,s,r,a){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KT extends Pm{data(){return super.data()}}function Am(e,t){return typeof t=="string"?km(e,t):t instanceof ul?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Cm extends Pm{constructor(t,n,s,r,a,c){super(t,n,s,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Am("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class fo extends Cm{data(t={}){return super.data(t)}}class XT{constructor(t,n,s,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ks(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new fo(this._firestore,this._userDataWriter,s.key,s,new ks(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>({type:"added",doc:new fo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ks(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:a++}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{const h=new fo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ks(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:JT(c.type),doc:h,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(e){if(Oo(e)&&e.explicitOrderBy.length===0)throw new Z(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{convertValue(t,n="none"){switch(Xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ui(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Q()}}convertObject(t,n){const s={};return Gi(t.fields,(r,a)=>{s[r]=this.convertValue(a,n)}),s}convertGeoPoint(t){return new cl(Mt(t.latitude),Mt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Pp(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Hs(t));default:return null}}convertTimestamp(t){const n=En(t);return new de(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Pt.fromString(t);wt(Zp(s));const r=new Gs(s.get(1),s.get(3)),a=new J(s.popFirst(5));return r.isEqual(n)||bn(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(e){e=$i(e,fe);const t=$i(e.firestore,_a);return DT(al(t),e._key).then(n=>nb(t,e,n))}class Lm extends QT{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,n)}}function Q1(e){e=$i(e,ga);const t=$i(e.firestore,_a),n=al(t),s=new Lm(t);return YT(e._query),BT(n,e._query).then(r=>new XT(t,s,e,r))}function tI(e,t,n){e=$i(e,fe);const s=$i(e.firestore,_a),r=tb(e.converter,t,n);return eb(s,[jT(qT(s),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Ci.none())])}function eb(e,t){return function(n,s){const r=new Qe;return n.asyncQueue.enqueueAndForget(async()=>wT(await OT(n),s,r)),r.promise}(al(e),t)}function nb(e,t,n){const s=n.docs.get(t._key),r=new Lm(e);return new Cm(e,r,t._key,s,new ks(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){(function(n){Zi=n})(er),Ds(new Oi("firestore",(n,{options:s})=>{const r=n.getProvider("app").getImmediate(),a=new _a(r,new fw(n.getProvider("auth-internal")),new _w(n.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC")),wn(Wh,"3.4.4",e),wn(Wh,"3.4.4","esm2017")})();function eI(e,t,n=[]){class s extends HTMLElement{constructor(){super();this.target=this.attachShadow({mode:"open"}),this.data={}}connectedCallback(){n.forEach(a=>{this[a]!==void 0&&(this.data[a]=this[a])}),this.instance=new t({target:this.target,data:this.data}),n.forEach(a=>{this.instance.observe(a,c=>{this.setAttribute(a,c)})})}detachedCallback(){this.instance.destroy(),this.instance=null}attributeChangedCallback(a,c,h){const f=isNaN(h)?h:+h;this.data[a]=f,this.instance&&this.instance.set({[a]:f})}}return Object.defineProperty(s,"observedAttributes",{get(){return n}}),n.forEach(r=>{Object.defineProperty(s.prototype,r,{get(){return this.instance?this.instance.get(r):this.data[r]},set(a){this.data[r]=a,this.instance&&this.instance.set({[r]:a})}})}),customElements.define(e,s),s}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function hl(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function ce(e,t,n,s){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(g){try{p(s.next(g))}catch(_){c(_)}}function f(g){try{p(s.throw(g))}catch(_){c(_)}}function p(g){g.done?a(g.value):r(g.value).then(h,f)}p((s=s.apply(e,t||[])).next())})}function le(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(g){return f([p,g])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(g){p=[6,g],r=0}finally{s=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Rs(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,a;s<r;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var xm=function(e,t){e.componentOnReady?e.componentOnReady().then(function(n){return t(n)}):mn(function(){return t(e)})},mn=function(e){return typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(e):typeof requestAnimationFrame=="function"?requestAnimationFrame(e):setTimeout(e)},Tu,ib=function(e){return e.forEach(function(t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];if(n==="easing"){var r="animation-timing-function";t[r]=s,delete t[n]}else{var r=sb(n);r!==n&&(t[r]=s,delete t[n])}}}),e},sb=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},dl=function(e){if(Tu===void 0){var t=e.style.animationName!==void 0,n=e.style.webkitAnimationName!==void 0;Tu=!t&&n?"-webkit-":""}return Tu},Et=function(e,t,n){var s=t.startsWith("animation")?dl(e):"";e.style.setProperty(s+t,n)},Se=function(e,t){var n=t.startsWith("animation")?dl(e):"";e.style.removeProperty(n+t)},rb=function(e,t){var n,s={passive:!0},r=function(){n&&n()},a=function(c){e===c.target&&(r(),t(c))};return e&&(e.addEventListener("webkitAnimationEnd",a,s),e.addEventListener("animationend",a,s),n=function(){e.removeEventListener("webkitAnimationEnd",a,s),e.removeEventListener("animationend",a,s)}),r},ob=function(e){return e===void 0&&(e=[]),e.map(function(t){var n=t.offset,s=[];for(var r in t)t.hasOwnProperty(r)&&r!=="offset"&&s.push(r+": "+t[r]+";");return n*100+"% { "+s.join(" ")+" }"}).join(" ")},Sd=[],ab=function(e){var t=Sd.indexOf(e);return t<0&&(t=Sd.push(e)-1),"ion-animation-"+t},ub=function(e){var t=e.getRootNode();return t.head||t},cb=function(e,t,n){var s=ub(n),r=dl(n),a=s.querySelector("#"+e);if(a)return a;var c=(n.ownerDocument||document).createElement("style");return c.id=e,c.textContent="@"+r+"keyframes "+e+" { "+t+" } @"+r+"keyframes "+e+"-alt { "+t+" }",s.appendChild(c),c},so=function(e,t){if(e===void 0&&(e=[]),t!==void 0){var n=Array.isArray(t)?t:[t];return Rs(Rs([],e),n)}return e},jn=function(e){var t,n,s,r,a,c,h=[],f=[],p=[],g=!1,_,w={},I=[],E=[],P={},H=0,W=!1,j=!1,$,et,ct,F,B=!0,k=!1,R=!0,U,x,nt=e,Pn=[],Wt=[],St=[],gt=[],me=[],G=[],ze=[],q=[],it=[],ht=[],Tt=typeof AnimationEffect=="function"||typeof window.AnimationEffect=="function",ot=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&Tt,st=100,_t=function(){return ht},Zt=function(T){return gt.forEach(function(C){C.destroy(T)}),Ce(T),St.length=0,gt.length=0,h.length=0,Qi(),g=!1,R=!0,x},Ce=function(T){rn(),T&&ri()},Er=function(){W=!1,j=!1,R=!0,et=void 0,ct=void 0,F=void 0,H=0,k=!1,B=!0},sn=function(T,C){var N=C&&C.oneTimeCallback?Wt:Pn;return N.push({c:T,o:C}),x},Qi=function(){return Pn.length=0,Wt.length=0,x},rn=function(){if(ot)ht.forEach(function(C){C.cancel()}),ht.length=0;else{var T=St.slice();mn(function(){T.forEach(function(C){Se(C,"animation-name"),Se(C,"animation-duration"),Se(C,"animation-timing-function"),Se(C,"animation-iteration-count"),Se(C,"animation-delay"),Se(C,"animation-play-state"),Se(C,"animation-fill-mode"),Se(C,"animation-direction")})})}},ri=function(){me.forEach(function(T){T&&T.parentNode&&T.parentNode.removeChild(T)}),me.length=0},ba=function(T){return G.push(T),x},Ir=function(T){return ze.push(T),x},Sr=function(T){return q.push(T),x},ts=function(T){return it.push(T),x},oi=function(T){return f=so(f,T),x},on=function(T){return p=so(p,T),x},ai=function(T){return T===void 0&&(T={}),w=T,x},es=function(T){T===void 0&&(T=[]);for(var C=0,N=T;C<N.length;C++){var Y=N[C];w[Y]=""}return x},An=function(T){return I=so(I,T),x},Cn=function(T){return E=so(E,T),x},Ea=function(T){return T===void 0&&(T={}),P=T,x},kr=function(T){T===void 0&&(T=[]);for(var C=0,N=T;C<N.length;C++){var Y=N[C];P[Y]=""}return x},Ve=function(){return a!==void 0?a:_?_.getFill():"both"},Le=function(){return et!==void 0?et:c!==void 0?c:_?_.getDirection():"normal"},$e=function(){return W?"linear":s!==void 0?s:_?_.getEasing():"linear"},Gt=function(){return j?0:ct!==void 0?ct:n!==void 0?n:_?_.getDuration():0},we=function(){return r!==void 0?r:_?_.getIterations():1},He=function(){return F!==void 0?F:t!==void 0?t:_?_.getDelay():0},Pr=function(){return h},ns=function(T){return c=T,Xt(!0),x},is=function(T){return a=T,Xt(!0),x},Ar=function(T){return t=T,Xt(!0),x},ie=function(T){return s=T,Xt(!0),x},an=function(T){return!ot&&T===0&&(T=1),n=T,Xt(!0),x},Ia=function(T){return r=T,Xt(!0),x},Sa=function(T){return _=T,x},xe=function(T){if(T!=null)if(T.nodeType===1)St.push(T);else if(T.length>=0)for(var C=0;C<T.length;C++)St.push(T[C]);else console.error("Invalid addElement value");return x},ge=function(T){if(T!=null)if(Array.isArray(T))for(var C=0,N=T;C<N.length;C++){var Y=N[C];Y.parent(x),gt.push(Y)}else T.parent(x),gt.push(T);return x},_e=function(T){var C=h!==T;return h=T,C&&Cr(h),x},Cr=function(T){ot?_t().forEach(function(C){if(C.effect.setKeyframes)C.effect.setKeyframes(T);else{var N=new KeyframeEffect(C.effect.target,T,C.effect.getTiming());C.effect=N}}):ss()},ka=function(){G.forEach(function(Y){return Y()}),ze.forEach(function(Y){return Y()});var T=f,C=p,N=w;St.forEach(function(Y){var Lt=Y.classList;T.forEach(function(ue){return Lt.add(ue)}),C.forEach(function(ue){return Lt.remove(ue)});for(var Te in N)N.hasOwnProperty(Te)&&Et(Y,Te,N[Te])})},Re=function(){us(),q.forEach(function(Lt){return Lt()}),it.forEach(function(Lt){return Lt()});var T=B?1:0,C=I,N=E,Y=P;St.forEach(function(Lt){var Te=Lt.classList;C.forEach(function(ut){return Te.add(ut)}),N.forEach(function(ut){return Te.remove(ut)});for(var ue in Y)Y.hasOwnProperty(ue)&&Et(Lt,ue,Y[ue])}),Pn.forEach(function(Lt){return Lt.c(T,x)}),Wt.forEach(function(Lt){return Lt.c(T,x)}),Wt.length=0,R=!0,B&&(k=!0),B=!0},ae=function(){H!==0&&(H--,H===0&&(Re(),_&&_.animationFinish()))},ss=function(T){T===void 0&&(T=!0),ri();var C=ib(h);St.forEach(function(N){if(C.length>0){var Y=ob(C);U=e!==void 0?e:ab(Y);var Lt=cb(U,Y,N);me.push(Lt),Et(N,"animation-duration",Gt()+"ms"),Et(N,"animation-timing-function",$e()),Et(N,"animation-delay",He()+"ms"),Et(N,"animation-fill-mode",Ve()),Et(N,"animation-direction",Le());var Te=we()===1/0?"infinite":we().toString();Et(N,"animation-iteration-count",Te),Et(N,"animation-play-state","paused"),T&&Et(N,"animation-name",Lt.id+"-alt"),mn(function(){Et(N,"animation-name",Lt.id||null)})}})},ui=function(){St.forEach(function(T){var C=T.animate(h,{id:nt,delay:He(),duration:Gt(),easing:$e(),iterations:we(),fill:Ve(),direction:Le()});C.pause(),ht.push(C)}),ht.length>0&&(ht[0].onfinish=function(){ae()})},Ln=function(T){T===void 0&&(T=!0),ka(),h.length>0&&(ot?ui():ss(T)),g=!0},Kt=function(T){if(T=Math.min(Math.max(T,0),.9999),ot)ht.forEach(function(N){N.currentTime=N.effect.getComputedTiming().delay+Gt()*T,N.pause()});else{var C="-"+Gt()*T+"ms";St.forEach(function(N){h.length>0&&(Et(N,"animation-delay",C),Et(N,"animation-play-state","paused"))})}},Lr=function(T){ht.forEach(function(C){C.effect.updateTiming({delay:He(),duration:Gt(),easing:$e(),iterations:we(),fill:Ve(),direction:Le()})}),T!==void 0&&Kt(T)},ci=function(T,C){T===void 0&&(T=!0),mn(function(){St.forEach(function(N){Et(N,"animation-name",U||null),Et(N,"animation-duration",Gt()+"ms"),Et(N,"animation-timing-function",$e()),Et(N,"animation-delay",C!==void 0?"-"+C*Gt()+"ms":He()+"ms"),Et(N,"animation-fill-mode",Ve()||null),Et(N,"animation-direction",Le()||null);var Y=we()===1/0?"infinite":we().toString();Et(N,"animation-iteration-count",Y),T&&Et(N,"animation-name",U+"-alt"),mn(function(){Et(N,"animation-name",U||null)})})})},Xt=function(T,C,N){return T===void 0&&(T=!1),C===void 0&&(C=!0),T&&gt.forEach(function(Y){Y.update(T,C,N)}),ot?Lr(N):ci(C,N),x},rs=function(T,C){return T===void 0&&(T=!1),gt.forEach(function(N){N.progressStart(T,C)}),as(),W=T,g||Ln(),Xt(!1,!0,C),x},os=function(T){return gt.forEach(function(C){C.progressStep(T)}),Kt(T),x},un=function(T,C,N){return W=!1,gt.forEach(function(Y){Y.progressEnd(T,C,N)}),N!==void 0&&(ct=N),k=!1,B=!0,T===0?(et=Le()==="reverse"?"normal":"reverse",et==="reverse"&&(B=!1),ot?(Xt(),Kt(1-C)):(F=(1-C)*Gt()*-1,Xt(!1,!1))):T===1&&(ot?(Xt(),Kt(C)):(F=C*Gt()*-1,Xt(!1,!1))),T!==void 0&&(sn(function(){ct=void 0,et=void 0,F=void 0},{oneTimeCallback:!0}),_||Rr()),x},as=function(){g&&(ot?ht.forEach(function(T){T.pause()}):St.forEach(function(T){Et(T,"animation-play-state","paused")}))},Pa=function(){return gt.forEach(function(T){T.pause()}),as(),x},Aa=function(){$=void 0,ae()},us=function(){$&&clearTimeout($)},Ca=function(){if(us(),mn(function(){St.forEach(function(Y){h.length>0&&Et(Y,"animation-play-state","running")})}),h.length===0||St.length===0)ae();else{var T=He()||0,C=Gt()||0,N=we()||1;isFinite(N)&&($=setTimeout(Aa,T+C*N+st)),rb(St[0],function(){us(),mn(function(){La(),mn(ae)})})}},La=function(){St.forEach(function(T){Se(T,"animation-duration"),Se(T,"animation-delay"),Se(T,"animation-play-state")})},xr=function(){ht.forEach(function(T){T.play()}),(h.length===0||St.length===0)&&ae()},cs=function(){ot?(Kt(0),Lr()):ci()},Rr=function(T){return new Promise(function(C){T&&T.sync&&(j=!0,sn(function(){return j=!1},{oneTimeCallback:!0})),g||Ln(),k&&(cs(),k=!1),R&&(H=gt.length+1,R=!1),sn(function(){return C()},{oneTimeCallback:!0}),gt.forEach(function(N){N.play()}),ot?xr():Ca()})},xa=function(){gt.forEach(function(T){T.stop()}),g&&(rn(),g=!1),Er()},xn=function(T,C){var N,Y=h[0];return Y!==void 0&&(Y.offset===void 0||Y.offset===0)?Y[T]=C:h=Rs([(N={offset:0},N[T]=C,N)],h),x},li=function(T,C){var N,Y=h[h.length-1];return Y!==void 0&&(Y.offset===void 0||Y.offset===1)?Y[T]=C:h=Rs(Rs([],h),[(N={offset:1},N[T]=C,N)]),x},cn=function(T,C,N){return xn(T,C).to(T,N)};return x={parentAnimation:_,elements:St,childAnimations:gt,id:nt,animationFinish:ae,from:xn,to:li,fromTo:cn,parent:Sa,play:Rr,pause:Pa,stop:xa,destroy:Zt,keyframes:_e,addAnimation:ge,addElement:xe,update:Xt,fill:is,direction:ns,iterations:Ia,duration:an,easing:ie,delay:Ar,getWebAnimations:_t,getKeyframes:Pr,getFill:Ve,getDirection:Le,getDelay:He,getIterations:we,getEasing:$e,getDuration:Gt,afterAddRead:Sr,afterAddWrite:ts,afterClearStyles:kr,afterStyles:Ea,afterRemoveClass:Cn,afterAddClass:An,beforeAddRead:ba,beforeAddWrite:Ir,beforeClearStyles:es,beforeStyles:ai,beforeRemoveClass:on,beforeAddClass:oi,onFinish:sn,progressStart:rs,progressStep:os,progressEnd:un}},lb=typeof window!="undefined"?window:{};lb.document;(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})();var hb=function(e){return fb(e).$modeName$},db=new WeakMap,fb=function(e){return db.get(e)};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var pb,fl=function(e){return e&&hb(e)||pb},mb=99,pl=function(e){return jn().duration(e?400:300)},gb=function(e){var t,n,s=e.width+8,r=jn(),a=jn();e.isEndSide?(t=s+"px",n="0px"):(t=-s+"px",n="0px"),r.addElement(e.menuInnerEl).fromTo("transform","translateX("+t+")","translateX("+n+")");var c=fl(e),h=c==="ios",f=h?.2:.25;return a.addElement(e.backdropEl).fromTo("opacity",.01,f),pl(h).addAnimation([r,a])},_b=function(e){var t,n,s=fl(e),r=e.width;e.isEndSide?(t=-r+"px",n=r+"px"):(t=r+"px",n=-r+"px");var a=jn().addElement(e.menuInnerEl).fromTo("transform","translateX("+n+")","translateX(0px)"),c=jn().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX("+t+")"),h=jn().addElement(e.backdropEl).fromTo("opacity",.01,.32);return pl(s==="ios").addAnimation([a,c,h])},vb=function(e){var t=fl(e),n=e.width*(e.isEndSide?-1:1)+"px",s=jn().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX("+n+")");return pl(t==="ios").addAnimation(s)},yb=function(){var e=new Map,t=[],n=function(k){return ce(void 0,void 0,void 0,function(){var R;return le(this,function(U){switch(U.label){case 0:return[4,p(k)];case 1:return R=U.sent(),R?[2,R.open()]:[2,!1]}})})},s=function(k){return ce(void 0,void 0,void 0,function(){var R;return le(this,function(U){switch(U.label){case 0:return[4,k!==void 0?p(k):g()];case 1:return R=U.sent(),R!==void 0?[2,R.close()]:[2,!1]}})})},r=function(k){return ce(void 0,void 0,void 0,function(){var R;return le(this,function(U){switch(U.label){case 0:return[4,p(k)];case 1:return R=U.sent(),R?[2,R.toggle()]:[2,!1]}})})},a=function(k,R){return ce(void 0,void 0,void 0,function(){var U;return le(this,function(x){switch(x.label){case 0:return[4,p(R)];case 1:return U=x.sent(),U&&(U.disabled=!k),[2,U]}})})},c=function(k,R){return ce(void 0,void 0,void 0,function(){var U;return le(this,function(x){switch(x.label){case 0:return[4,p(R)];case 1:return U=x.sent(),U&&(U.swipeGesture=k),[2,U]}})})},h=function(k){return ce(void 0,void 0,void 0,function(){var R,R;return le(this,function(U){switch(U.label){case 0:return k==null?[3,2]:[4,p(k)];case 1:return R=U.sent(),[2,R!==void 0&&R.isOpen()];case 2:return[4,g()];case 3:return R=U.sent(),[2,R!==void 0]}})})},f=function(k){return ce(void 0,void 0,void 0,function(){var R;return le(this,function(U){switch(U.label){case 0:return[4,p(k)];case 1:return R=U.sent(),R?[2,!R.disabled]:[2,!1]}})})},p=function(k){return ce(void 0,void 0,void 0,function(){var R,U;return le(this,function(x){switch(x.label){case 0:return[4,B()];case 1:return x.sent(),k==="start"||k==="end"?(R=F(function(nt){return nt.side===k&&!nt.disabled}),R?[2,R]:[2,F(function(nt){return nt.side===k})]):k!=null?[2,F(function(nt){return nt.menuId===k})]:(U=F(function(nt){return!nt.disabled}),U?[2,U]:[2,t.length>0?t[0].el:void 0])}})})},g=function(){return ce(void 0,void 0,void 0,function(){return le(this,function(k){switch(k.label){case 0:return[4,B()];case 1:return k.sent(),[2,$()]}})})},_=function(){return ce(void 0,void 0,void 0,function(){return le(this,function(k){switch(k.label){case 0:return[4,B()];case 1:return k.sent(),[2,et()]}})})},w=function(){return ce(void 0,void 0,void 0,function(){return le(this,function(k){switch(k.label){case 0:return[4,B()];case 1:return k.sent(),[2,ct()]}})})},I=function(k,R){e.set(k,R)},E=function(k){t.indexOf(k)<0&&(k.disabled||H(k),t.push(k))},P=function(k){var R=t.indexOf(k);R>-1&&t.splice(R,1)},H=function(k){var R=k.side;t.filter(function(U){return U.side===R&&U!==k}).forEach(function(U){return U.disabled=!0})},W=function(k,R,U){return ce(void 0,void 0,void 0,function(){var x;return le(this,function(nt){switch(nt.label){case 0:return ct()?[2,!1]:R?[4,g()]:[3,3];case 1:return x=nt.sent(),x&&k.el!==x?[4,x.setOpen(!1,!1)]:[3,3];case 2:nt.sent(),nt.label=3;case 3:return[2,k._setOpen(R,U)]}})})},j=function(k,R){var U=e.get(k);if(!U)throw new Error("animation not registered");var x=U(R);return x},$=function(){return F(function(k){return k._isOpen})},et=function(){return t.map(function(k){return k.el})},ct=function(){return t.some(function(k){return k.isAnimating})},F=function(k){var R=t.find(k);if(R!==void 0)return R.el},B=function(){return Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(function(k){return new Promise(function(R){return xm(k,R)})}))};return I("reveal",vb),I("push",_b),I("overlay",gb),typeof document!="undefined"&&document.addEventListener("ionBackButton",function(k){var R=$();R&&k.detail.register(mb,function(){return R.close()})}),{registerAnimation:I,get:p,getMenus:_,getOpen:g,isEnabled:f,swipeGesture:c,isAnimating:w,isOpen:h,enable:a,toggle:r,close:s,open:n,_getOpenSync:$,_createAnimation:j,_register:E,_unregister:P,_setOpen:W,_setActiveMenu:H}};yb();var wb=function(e){return{create:function(t){return Tb(e,t)},dismiss:function(t,n,s){return Eb(document,t,n,e,s)},getTop:function(){return ce(this,void 0,void 0,function(){return le(this,function(t){return[2,Rm(document,e)]})})}}},nI=wb("ion-popover"),Tb=function(e,t){return typeof window!="undefined"&&typeof window.customElements!="undefined"?window.customElements.whenDefined(e).then(function(){var n=document.createElement(e);return n.classList.add("overlay-hidden"),Object.assign(n,Object.assign(Object.assign({},t),{hasController:!0})),Sb(document).appendChild(n),new Promise(function(s){return xm(n,s)})}):Promise.resolve()},bb=function(e){return e.classList.contains("overlay-hidden")},Eb=function(e,t,n,s,r){var a=Rm(e,s,r);return a?a.dismiss(t,n):Promise.reject("overlay does not exist")},Ib=function(e,t){return t===void 0&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter(function(n){return n.overlayIndex>0})},Rm=function(e,t,n){var s=Ib(e,t).filter(function(r){return!bb(r)});return n===void 0?s[s.length-1]:s.find(function(r){return r.id===n})},Sb=function(e){return e.querySelector("ion-app")||e.body};function Nm(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kb=Nm,Mm=new Qs("auth","Firebase",Nm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new fc("@firebase/auth");function po(e,...t){kd.logLevel<=mt.ERROR&&kd.error(`Auth (${er}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(e,...t){throw ml(e,...t)}function De(e,...t){return ml(e,...t)}function Pb(e,t,n){const s=Object.assign(Object.assign({},kb()),{[t]:n});return new Qs("auth","Firebase",s).create(t,{appName:e.name})}function ml(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return Mm.create(e,...t)}function K(e,t,...n){if(!e)throw ml(t,...n)}function Je(e){const t="INTERNAL ASSERTION FAILED: "+e;throw po(t),new Error(t)}function nn(e,t){e||Je(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map;function Ye(e){nn(e instanceof Function,"Expected a class definition");let t=Pd.get(e);return t?(nn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pd.set(e,t),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e,t){const n=mc(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(To(a,t!=null?t:{}))return r;Ae(r,"already-initialized")}return n.initialize({options:t})}function Cb(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Ye);(t==null?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(){var e;return typeof self!="undefined"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Lb(){return Ad()==="http:"||Ad()==="https:"}function Ad(){var e;return typeof self!="undefined"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lb()||yf()||"connection"in navigator)?navigator.onLine:!0}function Rb(){if(typeof navigator=="undefined")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t,n){this.shortDelay=t,this.longDelay=n,nn(n>t,"Short delay should be less than long delay!"),this.isMobile=vf()||wf()}get(){return xb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e,t){nn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new _r(3e4,6e4);function vr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function yr(e,t,n,s,r={}){return Dm(e,r,async()=>{let a={},c={};s&&(t==="GET"?c=s:a={body:JSON.stringify(s)});const h=tr(Object.assign({key:e.config.apiKey},c)).slice(1),f=await e._getAdditionalHeaders();return f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode),Om.fetch()(Bm(e,e.config.apiHost,n,h),Object.assign({method:t,headers:f,referrerPolicy:"no-referrer"},a))})}async function Dm(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},Nb),t);try{const r=new Ob(e),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bu(e,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw bu(e,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw bu(e,"email-already-in-use",c);const g=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Pb(e,g,p);Ae(e,g)}}catch(r){if(r instanceof ni)throw r;Ae(e,"network-request-failed")}}async function wr(e,t,n,s,r={}){const a=await yr(e,t,n,s,r);return"mfaPendingCredential"in a&&Ae(e,"multi-factor-auth-required",{_serverResponse:a}),a}function Bm(e,t,n,s){const r=`${t}${n}?${s}`;return e.config.emulator?gl(e.config,r):`${e.config.apiScheme}://${r}`}class Ob{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(De(this.auth,"network-request-failed")),Mb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bu(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=De(e,t,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(e,t){return yr(e,"POST","/v1/accounts:delete",t)}async function Bb(e,t){return yr(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(e){if(!!e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ub(e,t=!1){const n=Ue(e),s=await n.getIdToken(t),r=_l(s);K(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:s,authTime:Ns(Eu(r.auth_time)),issuedAtTime:Ns(Eu(r.iat)),expirationTime:Ns(Eu(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Eu(e){return Number(e)*1e3}function _l(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return po("JWT malformed, contained fewer than 3 sections"),null;try{const r=av(n);return r?JSON.parse(r):(po("Failed to decode base64 JWT payload"),null)}catch(r){return po("Caught error parsing JWT payload as JSON",r),null}}function Fb(e){const t=_l(e);return K(t,"internal-error"),K(typeof t.exp!="undefined","internal-error"),K(typeof t.iat!="undefined","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof ni&&zb(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function zb({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ns(this.lastLoginAt),this.creationTime=Ns(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(e){var t;const n=e.auth,s=await e.getIdToken(),r=await Ks(e,Bb(n,{idToken:s}));K(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];e._notifyReloadListener(a);const c=((t=a.providerUserInfo)===null||t===void 0?void 0:t.length)?qb(a.providerUserInfo):[],h=Hb(e.providerData,c),f=e.isAnonymous,p=!(e.email&&a.passwordHash)&&!(h==null?void 0:h.length),g=f?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Um(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(e,_)}async function $b(e){const t=Ue(e);await Vo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Hb(e,t){return[...e.filter(s=>!t.some(r=>r.providerId===s.providerId)),...t]}function qb(e){return e.map(t=>{var{providerId:n}=t,s=hl(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(e,t){const n=await Dm(e,{},async()=>{const s=tr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,c=Bm(e,r,"/v1/token",`key=${a}`),h=await e._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Om.fetch()(c,{method:"POST",headers:h,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){K(t.idToken,"internal-error"),K(typeof t.idToken!="undefined","internal-error"),K(typeof t.refreshToken!="undefined","internal-error");const n="expiresIn"in t&&typeof t.expiresIn!="undefined"?Number(t.expiresIn):Fb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return K(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:r,expiresIn:a}=await jb(t,n);this.updateTokensAndExpiration(s,r,Number(a))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:r,expirationTime:a}=n,c=new Xs;return s&&(K(typeof s=="string","internal-error",{appName:t}),c.refreshToken=s),r&&(K(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),a&&(K(typeof a=="number","internal-error",{appName:t}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return Je("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(e,t){K(typeof e=="string"||typeof e=="undefined","internal-error",{appName:t})}class Wn{constructor(t){var{uid:n,auth:s,stsTokenManager:r}=t,a=hl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Um(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const n=await Ks(this,this.stsTokenManager.getToken(this.auth,t));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ub(this,t)}reload(){return $b(this)}_assign(t){this!==t&&(K(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Wn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Vo(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Ks(this,Db(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,r,a,c,h,f,p,g;const _=(s=n.displayName)!==null&&s!==void 0?s:void 0,w=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,E=(c=n.photoURL)!==null&&c!==void 0?c:void 0,P=(h=n.tenantId)!==null&&h!==void 0?h:void 0,H=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,W=(p=n.createdAt)!==null&&p!==void 0?p:void 0,j=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:et,isAnonymous:ct,providerData:F,stsTokenManager:B}=n;K($&&B,t,"internal-error");const k=Xs.fromJSON(this.name,B);K(typeof $=="string",t,"internal-error"),fn(_,t.name),fn(w,t.name),K(typeof et=="boolean",t,"internal-error"),K(typeof ct=="boolean",t,"internal-error"),fn(I,t.name),fn(E,t.name),fn(P,t.name),fn(H,t.name),fn(W,t.name),fn(j,t.name);const R=new Wn({uid:$,auth:t,email:w,emailVerified:et,displayName:_,isAnonymous:ct,photoURL:E,phoneNumber:I,tenantId:P,stsTokenManager:k,createdAt:W,lastLoginAt:j});return F&&Array.isArray(F)&&(R.providerData=F.map(U=>Object.assign({},U))),H&&(R._redirectEventId=H),R}static async _fromIdTokenResponse(t,n,s=!1){const r=new Xs;r.updateFromServerResponse(n);const a=new Wn({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:s});return await Vo(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Fm.type="NONE";const Cd=Fm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e,t,n){return`firebase:${e}:${t}:${n}`}class xi{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:r,name:a}=this.auth;this.fullUserKey=mo(this.userKey,r.apiKey,a),this.fullPersistenceKey=mo("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Wn._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new xi(Ye(Cd),t,s);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||Ye(Cd);const c=mo(s,t.config.apiKey,t.name);let h=null;for(const p of n)try{const g=await p._get(c);if(g){const _=Wn._fromJSON(t,g);p!==a&&(h=_),a=p;break}}catch{}const f=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new xi(a,t,s):(a=f[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new xi(a,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($m(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qm(t))return"Blackberry";if(jm(t))return"Webos";if(vl(t))return"Safari";if((t.includes("chrome/")||Vm(t))&&!t.includes("edge/"))return"Chrome";if(Hm(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zm(e=Ut()){return/firefox\//i.test(e)}function vl(e=Ut()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vm(e=Ut()){return/crios\//i.test(e)}function $m(e=Ut()){return/iemobile/i.test(e)}function Hm(e=Ut()){return/android/i.test(e)}function qm(e=Ut()){return/blackberry/i.test(e)}function jm(e=Ut()){return/webos/i.test(e)}function va(e=Ut()){return/iphone|ipad|ipod/i.test(e)}function Wb(e=Ut()){var t;return va(e)&&!!((t=window.navigator)===null||t===void 0?void 0:t.standalone)}function Zb(){return Tf()&&document.documentMode===10}function Wm(e=Ut()){return va(e)||Hm(e)||jm(e)||qm(e)||/windows phone/i.test(e)||$m(e)}function Gb(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(e,t=[]){let n;switch(e){case"Browser":n=Ld(Ut());break;case"Worker":n=`${Ld(Ut())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${er}/${s}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,n){this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xd(this),this.idTokenSubscription=new xd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mm,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ye(n)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await xi.create(this,t),!this._deleted)){if((s=this._popupRedirectResolver)===null||s===void 0?void 0:s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t)}}async initializeCurrentUser(t){var n;let s=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(t);(!r||r===a)&&(c==null?void 0:c.user)&&(s=c.user)}return s?s._redirectEventId?(K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)):this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Vo(t)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Rb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Ue(t):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&K(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ye(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Qs("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ye(t)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[Ye(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),c=this._isInitialized?Promise.resolve():this._initializationPromise;return K(c,this,"internal-error"),c.then(()=>a(this.currentUser)),typeof n=="function"?t.addObserver(n,s,r):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Zm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function ya(e){return Ue(e)}class xd{constructor(t){this.auth=t,this.observer=null,this.addObserver=mv(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Je("not implemented")}_getIdTokenResponse(t){return Je("not implemented")}_linkToIdToken(t,n){return Je("not implemented")}_getReauthenticationResolver(t){return Je("not implemented")}}async function Xb(e,t){return yr(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(e,t){return wr(e,"POST","/v1/accounts:signInWithPassword",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(e,t){return wr(e,"POST","/v1/accounts:signInWithEmailLink",vr(e,t))}async function Qb(e,t){return wr(e,"POST","/v1/accounts:signInWithEmailLink",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends yl{constructor(t,n,s,r=null){super("password",s);this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Js(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Js(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Jb(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Yb(t,{email:this._email,oobCode:this._password});default:Ae(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return Xb(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Qb(t,{idToken:n,email:this._email,oobCode:this._password});default:Ae(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(e,t){return wr(e,"POST","/v1/accounts:signInWithIdp",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="http://localhost";class Qn extends yl{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(t){const n=new Qn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ae("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:r}=n,a=hl(n,["providerId","signInMethod"]);if(!s||!r)return null;const c=new Qn(s,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return Ri(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ri(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ri(t,n)}buildRequest(){const t={requestUri:tE,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=tr(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nE(e){const t=Es(Is(e)).link,n=t?Es(Is(t)).deep_link_id:null,s=Es(Is(e)).deep_link_id;return(s?Es(Is(s)).link:null)||s||n||t||e}class wl{constructor(t){var n,s,r,a,c,h;const f=Es(Is(t)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,g=(s=f.oobCode)!==null&&s!==void 0?s:null,_=eE((r=f.mode)!==null&&r!==void 0?r:null);K(p&&g&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=g,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(t){const n=nE(t);try{return new wl(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.providerId=Yi.PROVIDER_ID}static credential(t,n){return Js._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=wl.parseLink(n);return K(s,"argument-error"),Js._fromEmailAndCode(t,s.code,s.tenantId)}}Yi.PROVIDER_ID="password";Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Gm{constructor(){super(...arguments);this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends Tr{constructor(){super("facebook.com")}static credential(t){return Qn._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return gn.credentialFromTaggedObject(t)}static credentialFromError(t){return gn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return gn.credential(t.oauthAccessToken)}catch{return null}}}gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends Tr{constructor(){super("google.com");this.addScope("profile")}static credential(t,n){return Qn._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return _n.credentialFromTaggedObject(t)}static credentialFromError(t){return _n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return _n.credential(n,s)}catch{return null}}}_n.GOOGLE_SIGN_IN_METHOD="google.com";_n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends Tr{constructor(){super("github.com")}static credential(t){return Qn._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vn.credentialFromTaggedObject(t)}static credentialFromError(t){return vn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vn.credential(t.oauthAccessToken)}catch{return null}}}vn.GITHUB_SIGN_IN_METHOD="github.com";vn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends Tr{constructor(){super("twitter.com")}static credential(t,n){return Qn._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return yn.credentialFromTaggedObject(t)}static credentialFromError(t){return yn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return yn.credential(n,s)}catch{return null}}}yn.TWITTER_SIGN_IN_METHOD="twitter.com";yn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(e,t){return wr(e,"POST","/v1/accounts:signUp",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,r=!1){const a=await Wn._fromIdTokenResponse(t,s,r),c=Rd(s);return new ti({user:a,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const r=Rd(s);return new ti({user:t,providerId:r,_tokenResponse:s,operationType:n})}}function Rd(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends ni{constructor(t,n,s,r){var a;super(n.code,n.message);this.operationType=s,this.user=r,Object.setPrototypeOf(this,$o.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,r){return new $o(t,n,s,r)}}function Km(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$o._fromErrorAndOperation(e,a,t,s):a})}async function sE(e,t,n=!1){const s=await Ks(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ti._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(e,t,n=!1){const{auth:s}=e,r="reauthenticate";try{const a=await Ks(e,Km(s,r,t,e),n);K(a.idToken,s,"internal-error");const c=_l(a.idToken);K(c,s,"internal-error");const{sub:h}=c;return K(e.uid===h,s,"user-mismatch"),ti._forOperation(e,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ae(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xm(e,t,n=!1){const s="signIn",r=await Km(e,s,t),a=await ti._fromIdTokenResponse(e,s,r);return n||await e._updateCurrentUser(a.user),a}async function oE(e,t){return Xm(ya(e),t)}async function iI(e,t,n){const s=ya(e),r=await iE(s,{returnSecureToken:!0,email:t,password:n}),a=await ti._fromIdTokenResponse(s,"signIn",r);return await s._updateCurrentUser(a.user),a}function sI(e,t,n){return oE(Ue(e),Yi.credential(t,n))}const Ho="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ho,"1"),this.storage.removeItem(Ho),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){const e=Ut();return vl(e)||va(e)}const uE=1e3,cE=10;class Ym extends Jm{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=aE()&&Gb(),this.fallbackToPolling=Wm(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&t(n,r,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const s=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(s);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!n)return}const r=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},a=this.storage.getItem(s);Zb()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,cE):r()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},uE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Ym.type="LOCAL";const lE=Ym;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Jm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Qm.type="SESSION";const tg=Qm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(e){return Promise.all(e.map(async t=>{try{const n=await t;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const s=new wa(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c==null?void 0:c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),f=await hE(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:f})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,f)=>{const p=Tl("",20);r.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},s);c={messageChannel:r,onMessage(_){const w=_;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(w.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return window}function fE(e){Be().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){return typeof Be().WorkerGlobalScope!="undefined"&&typeof Be().importScripts=="function"}async function pE(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mE(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function gE(){return eg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="firebaseLocalStorageDb",_E=1,qo="firebaseLocalStorage",ig="fbase_key";class br{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ta(e,t){return e.transaction([qo],t?"readwrite":"readonly").objectStore(qo)}function vE(){const e=indexedDB.deleteDatabase(ng);return new br(e).toPromise()}function uc(){const e=indexedDB.open(ng,_E);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(qo,{keyPath:ig})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(qo)?t(s):(s.close(),await vE(),t(await uc()))})})}async function Nd(e,t,n){const s=Ta(e,!0).put({[ig]:t,value:n});return new br(s).toPromise()}async function yE(e,t){const n=Ta(e,!1).get(t),s=await new br(n).toPromise();return s===void 0?null:s.value}function Md(e,t){const n=Ta(e,!0).delete(t);return new br(n).toPromise()}const wE=800,TE=3;class sg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uc(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>TE)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wa._getInstance(gE()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await pE(),!this.activeServiceWorker)return;this.sender=new dE(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);!s||((t=s[0])===null||t===void 0?void 0:t.fulfilled)&&((n=s[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await uc();return await Nd(t,Ho,"1"),await Md(t,Ho),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nd(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>yE(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Md(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const a=Ta(r,!1).getAll();return new br(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;for(const{fbase_key:r,value:a}of t)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sg.type="LOCAL";const bE=sg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function IE(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=r=>{const a=De("internal-error");a.customData=r,n(a)},s.type="text/javascript",s.charset="UTF-8",EE().appendChild(s)})}function SE(e){return`__${e}${Math.floor(Math.random()*1e6)}`}new _r(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(e,t){return t?Ye(t):(K(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends yl{constructor(t){super("custom","custom");this.params=t}_getIdTokenResponse(t){return Ri(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ri(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ri(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function PE(e){return Xm(e.auth,new bl(e),e.bypassAuthState)}function AE(e){const{auth:t,user:n}=e;return K(n,t,"internal-error"),rE(n,new bl(e),e.bypassAuthState)}async function CE(e){const{auth:t,user:n}=e;return K(n,t,"internal-error"),sE(n,new bl(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,s,r,a=!1){this.auth=t,this.resolver=s,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:r,tenantId:a,error:c,type:h}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PE;case"linkViaPopup":case"linkViaRedirect":return CE;case"reauthViaPopup":case"reauthViaRedirect":return AE;default:Ae(this.auth,"internal-error")}}resolve(t){nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new _r(2e3,1e4);class Pi extends rg{constructor(t,n,s,r,a){super(t,n,r,a);this.provider=s,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return K(t,this.auth,"internal-error"),t}async onExecution(){nn(this.filter.length===1,"Popup operations only handle one event");const t=Tl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(De(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0?void 0:s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(t,LE.get())};t()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="pendingRedirect",Iu=new Map;class RE extends rg{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s);this.eventId=null}async execute(){let t=Iu.get(this.auth._key());if(!t){try{const s=await NE(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Iu.set(this.auth._key(),t)}return this.bypassAuthState||Iu.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NE(e,t){const n=OE(t),s=ME(e);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function ME(e){return Ye(e._redirectPersistence)}function OE(e){return mo(xE,e.config.apiKey,e.name)}async function DE(e,t,n=!1){const s=ya(e),r=kE(s,t),c=await new RE(s,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=10*60*1e3;class UE{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!FE(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!og(t)){const r=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(De(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=BE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Od(t))}saveEventToCache(t){this.cachedEventUids.add(Od(t)),this.lastProcessedEventTime=Date.now()}}function Od(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function og({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function FE(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return og(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(e,t={}){return yr(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$E=/^https?/;async function HE(e){if(e.config.emulator)return;const{authorizedDomains:t}=await zE(e);for(const n of t)try{if(qE(n))return}catch{}Ae(e,"unauthorized-domain")}function qE(e){const t=ac(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!$E.test(n))return!1;if(VE.test(e))return s===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new _r(3e4,6e4);function Dd(){const e=Be().___jsl;if(e==null?void 0:e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function WE(e){return new Promise((t,n)=>{var s,r,a;function c(){Dd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dd(),n(De(e,"network-request-failed"))},timeout:jE.get()})}if((r=(s=Be().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0?void 0:r.Iframe)t(gapi.iframes.getContext());else if((a=Be().gapi)===null||a===void 0?void 0:a.load)c();else{const h=SE("iframefcb");return Be()[h]=()=>{gapi.load?c():n(De(e,"network-request-failed"))},IE(`https://apis.google.com/js/api.js?onload=${h}`).catch(f=>n(f))}}).catch(t=>{throw go=null,t})}let go=null;function ZE(e){return go=go||WE(e),go}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=new _r(5e3,15e3),KE="__/auth/iframe",XE="emulator/auth/iframe",JE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QE(e){const t=e.config;K(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gl(t,XE):`https://${e.config.authDomain}/${KE}`,s={apiKey:t.apiKey,appName:e.name,v:er},r=YE.get(e.config.apiHost);r&&(s.eid=r);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${tr(s).slice(1)}`}async function t1(e){const t=await ZE(e),n=Be().gapi;return K(n,e,"internal-error"),t.open({where:document.body,url:QE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JE,dontclear:!0},s=>new Promise(async(r,a)=>{await s.restyle({setHideOnLeave:!1});const c=De(e,"network-request-failed"),h=Be().setTimeout(()=>{a(c)},GE.get());function f(){Be().clearTimeout(h),r(s)}s.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n1=500,i1=600,s1="_blank",r1="http://localhost";class Bd{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o1(e,t,n,s=n1,r=i1){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const f=Object.assign(Object.assign({},e1),{width:s.toString(),height:r.toString(),top:a,left:c}),p=Ut().toLowerCase();n&&(h=Vm(p)?s1:n),zm(p)&&(t=t||r1,f.scrollbars="yes");const g=Object.entries(f).reduce((w,[I,E])=>`${w}${I}=${E},`,"");if(Wb(p)&&h!=="_self")return a1(t||"",h),new Bd(null);const _=window.open(t||"",h,g);K(_,e,"popup-blocked");try{_.focus()}catch{}return new Bd(_)}function a1(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__/auth/handler",c1="emulator/auth/handler";function Ud(e,t,n,s,r,a){K(e.config.authDomain,e,"auth-domain-config-required"),K(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:er,eventId:r};if(t instanceof Gm){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",pv(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,p]of Object.entries(a||{}))c[f]=p}if(t instanceof Tr){const f=t.getScopes().filter(p=>p!=="");f.length>0&&(c.scopes=f.join(","))}e.tenantId&&(c.tid=e.tenantId);const h=c;for(const f of Object.keys(h))h[f]===void 0&&delete h[f];return`${l1(e)}?${tr(h).slice(1)}`}function l1({config:e}){return e.emulator?gl(e,c1):`https://${e.authDomain}/${u1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="webStorageSupport";class h1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tg,this._completeRedirectFn=DE}async _openPopup(t,n,s,r){var a;nn((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=Ud(t,n,s,ac(),r);return o1(t,c,Tl())}async _openRedirect(t,n,s,r){return await this._originValidation(t),fE(Ud(t,n,s,ac(),r)),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(nn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await t1(t),s=new UE(t);return n.register("authEvent",r=>(K(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Su,{type:Su},r=>{var a;const c=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Su];c!==void 0&&n(!!c),Ae(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HE(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wm()||vl()||va()}}const d1=h1;var Fd="@firebase/auth",zd="0.19.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{var r;t(((r=s)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);!n||(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function m1(e){Ds(new Oi("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:a}=s.options;return(c=>{K(r&&!r.includes(":"),"invalid-api-key",{appName:c.name}),K(!(a==null?void 0:a.includes(":")),"argument-error",{appName:c.name});const h={apiKey:r,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zm(e)},f=new Kb(c,h);return Cb(f,n),f})(s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ds(new Oi("auth-internal",t=>{const n=ya(t.getProvider("auth").getImmediate());return(s=>new f1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(Fd,zd,p1(e)),wn(Fd,zd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(e=Ef()){const t=mc(e,"auth");return t.isInitialized()?t.getImmediate():Ab(e,{popupRedirectResolver:d1,persistence:[bE,lE,tg]})}m1("Browser");var g1="firebase",_1="9.6.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(g1,_1,"app");export{G1 as $,R1 as A,y1 as B,w1 as C,K1 as D,P1 as E,gf as F,j1 as G,z1 as H,V_ as I,z_ as J,$_ as K,H1 as L,O1 as M,X1 as N,D1 as O,I1 as P,nI as Q,eI as R,$1 as S,rI as T,J1 as U,sI as V,iI as W,U1 as X,B1 as Y,F1 as Z,M1 as _,E1 as a,q1 as a0,b1 as b,L1 as c,N_ as d,S1 as e,C1 as f,k1 as g,df as h,V1 as i,N1 as j,kh as k,A1 as l,Z1 as m,Hn as n,de as o,tI as p,Y1 as q,Ys as r,L_ as s,ff as t,Q1 as u,M_ as v,W1 as w,x1 as x,T1 as y,v1 as z};
